var Rp=n=>{throw TypeError(n)};var ac=(n,e,t)=>e.has(n)||Rp("Cannot "+t);var $=(n,e,t)=>(ac(n,e,"read from private field"),t?t.call(n):e.get(n)),pe=(n,e,t)=>e.has(n)?Rp("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),ce=(n,e,t,s)=>(ac(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),ut=(n,e,t)=>(ac(n,e,"access private method"),t);var ba=(n,e,t,s)=>({set _(o){ce(n,e,o,t)},get _(){return $(n,e,s)}});function Hy(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(s,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function Gy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lc={exports:{}},kr={},uc={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp;function Jy(){if(Pp)return fe;Pp=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),g=Symbol.iterator;function w(O){return O===null||typeof O!="object"?null:(O=g&&O[g]||O["@@iterator"],typeof O=="function"?O:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,x={};function k(O,I,se){this.props=O,this.context=I,this.refs=x,this.updater=se||_}k.prototype.isReactComponent={},k.prototype.setState=function(O,I){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,I,"setState")},k.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function C(){}C.prototype=k.prototype;function R(O,I,se){this.props=O,this.context=I,this.refs=x,this.updater=se||_}var P=R.prototype=new C;P.constructor=R,S(P,k.prototype),P.isPureReactComponent=!0;var j=Array.isArray,U=Object.prototype.hasOwnProperty,B={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function Q(O,I,se){var de,ve={},ge=null,Ee=null;if(I!=null)for(de in I.ref!==void 0&&(Ee=I.ref),I.key!==void 0&&(ge=""+I.key),I)U.call(I,de)&&!G.hasOwnProperty(de)&&(ve[de]=I[de]);var Se=arguments.length-2;if(Se===1)ve.children=se;else if(1<Se){for(var Pe=Array(Se),_t=0;_t<Se;_t++)Pe[_t]=arguments[_t+2];ve.children=Pe}if(O&&O.defaultProps)for(de in Se=O.defaultProps,Se)ve[de]===void 0&&(ve[de]=Se[de]);return{$$typeof:n,type:O,key:ge,ref:Ee,props:ve,_owner:B.current}}function ie(O,I){return{$$typeof:n,type:O.type,key:I,ref:O.ref,props:O.props,_owner:O._owner}}function we(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function Le(O){var I={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(se){return I[se]})}var xe=/\/+/g;function he(O,I){return typeof O=="object"&&O!==null&&O.key!=null?Le(""+O.key):I.toString(36)}function _e(O,I,se,de,ve){var ge=typeof O;(ge==="undefined"||ge==="boolean")&&(O=null);var Ee=!1;if(O===null)Ee=!0;else switch(ge){case"string":case"number":Ee=!0;break;case"object":switch(O.$$typeof){case n:case e:Ee=!0}}if(Ee)return Ee=O,ve=ve(Ee),O=de===""?"."+he(Ee,0):de,j(ve)?(se="",O!=null&&(se=O.replace(xe,"$&/")+"/"),_e(ve,I,se,"",function(_t){return _t})):ve!=null&&(we(ve)&&(ve=ie(ve,se+(!ve.key||Ee&&Ee.key===ve.key?"":(""+ve.key).replace(xe,"$&/")+"/")+O)),I.push(ve)),1;if(Ee=0,de=de===""?".":de+":",j(O))for(var Se=0;Se<O.length;Se++){ge=O[Se];var Pe=de+he(ge,Se);Ee+=_e(ge,I,se,Pe,ve)}else if(Pe=w(O),typeof Pe=="function")for(O=Pe.call(O),Se=0;!(ge=O.next()).done;)ge=ge.value,Pe=de+he(ge,Se++),Ee+=_e(ge,I,se,Pe,ve);else if(ge==="object")throw I=String(O),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return Ee}function Fe(O,I,se){if(O==null)return O;var de=[],ve=0;return _e(O,de,"","",function(ge){return I.call(se,ge,ve++)}),de}function Ae(O){if(O._status===-1){var I=O._result;I=I(),I.then(function(se){(O._status===0||O._status===-1)&&(O._status=1,O._result=se)},function(se){(O._status===0||O._status===-1)&&(O._status=2,O._result=se)}),O._status===-1&&(O._status=0,O._result=I)}if(O._status===1)return O._result.default;throw O._result}var be={current:null},q={transition:null},ne={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:q,ReactCurrentOwner:B};function H(){throw Error("act(...) is not supported in production builds of React.")}return fe.Children={map:Fe,forEach:function(O,I,se){Fe(O,function(){I.apply(this,arguments)},se)},count:function(O){var I=0;return Fe(O,function(){I++}),I},toArray:function(O){return Fe(O,function(I){return I})||[]},only:function(O){if(!we(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},fe.Component=k,fe.Fragment=t,fe.Profiler=o,fe.PureComponent=R,fe.StrictMode=s,fe.Suspense=d,fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,fe.act=H,fe.cloneElement=function(O,I,se){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var de=S({},O.props),ve=O.key,ge=O.ref,Ee=O._owner;if(I!=null){if(I.ref!==void 0&&(ge=I.ref,Ee=B.current),I.key!==void 0&&(ve=""+I.key),O.type&&O.type.defaultProps)var Se=O.type.defaultProps;for(Pe in I)U.call(I,Pe)&&!G.hasOwnProperty(Pe)&&(de[Pe]=I[Pe]===void 0&&Se!==void 0?Se[Pe]:I[Pe])}var Pe=arguments.length-2;if(Pe===1)de.children=se;else if(1<Pe){Se=Array(Pe);for(var _t=0;_t<Pe;_t++)Se[_t]=arguments[_t+2];de.children=Se}return{$$typeof:n,type:O.type,key:ve,ref:ge,props:de,_owner:Ee}},fe.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:a,_context:O},O.Consumer=O},fe.createElement=Q,fe.createFactory=function(O){var I=Q.bind(null,O);return I.type=O,I},fe.createRef=function(){return{current:null}},fe.forwardRef=function(O){return{$$typeof:h,render:O}},fe.isValidElement=we,fe.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:Ae}},fe.memo=function(O,I){return{$$typeof:p,type:O,compare:I===void 0?null:I}},fe.startTransition=function(O){var I=q.transition;q.transition={};try{O()}finally{q.transition=I}},fe.unstable_act=H,fe.useCallback=function(O,I){return be.current.useCallback(O,I)},fe.useContext=function(O){return be.current.useContext(O)},fe.useDebugValue=function(){},fe.useDeferredValue=function(O){return be.current.useDeferredValue(O)},fe.useEffect=function(O,I){return be.current.useEffect(O,I)},fe.useId=function(){return be.current.useId()},fe.useImperativeHandle=function(O,I,se){return be.current.useImperativeHandle(O,I,se)},fe.useInsertionEffect=function(O,I){return be.current.useInsertionEffect(O,I)},fe.useLayoutEffect=function(O,I){return be.current.useLayoutEffect(O,I)},fe.useMemo=function(O,I){return be.current.useMemo(O,I)},fe.useReducer=function(O,I,se){return be.current.useReducer(O,I,se)},fe.useRef=function(O){return be.current.useRef(O)},fe.useState=function(O){return be.current.useState(O)},fe.useSyncExternalStore=function(O,I,se){return be.current.useSyncExternalStore(O,I,se)},fe.useTransition=function(){return be.current.useTransition()},fe.version="18.3.1",fe}var Op;function mh(){return Op||(Op=1,uc.exports=Jy()),uc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lp;function Qy(){if(Lp)return kr;Lp=1;var n=mh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,d,p){var v,g={},w=null,_=null;p!==void 0&&(w=""+p),d.key!==void 0&&(w=""+d.key),d.ref!==void 0&&(_=d.ref);for(v in d)s.call(d,v)&&!a.hasOwnProperty(v)&&(g[v]=d[v]);if(h&&h.defaultProps)for(v in d=h.defaultProps,d)g[v]===void 0&&(g[v]=d[v]);return{$$typeof:e,type:h,key:w,ref:_,props:g,_owner:o.current}}return kr.Fragment=t,kr.jsx=u,kr.jsxs=u,kr}var Ap;function Xy(){return Ap||(Ap=1,lc.exports=Qy()),lc.exports}var y=Xy(),z=mh();const Rr=Gy(z),Yy=Hy({__proto__:null,default:Rr},[z]);var xa={},cc={exports:{}},bt={},hc={exports:{}},dc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp;function Zy(){return Mp||(Mp=1,(function(n){function e(q,ne){var H=q.length;q.push(ne);e:for(;0<H;){var O=H-1>>>1,I=q[O];if(0<o(I,ne))q[O]=ne,q[H]=I,H=O;else break e}}function t(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var ne=q[0],H=q.pop();if(H!==ne){q[0]=H;e:for(var O=0,I=q.length,se=I>>>1;O<se;){var de=2*(O+1)-1,ve=q[de],ge=de+1,Ee=q[ge];if(0>o(ve,H))ge<I&&0>o(Ee,ve)?(q[O]=Ee,q[ge]=H,O=ge):(q[O]=ve,q[de]=H,O=de);else if(ge<I&&0>o(Ee,H))q[O]=Ee,q[ge]=H,O=ge;else break e}}return ne}function o(q,ne){var H=q.sortIndex-ne.sortIndex;return H!==0?H:q.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var d=[],p=[],v=1,g=null,w=3,_=!1,S=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(q){for(var ne=t(p);ne!==null;){if(ne.callback===null)s(p);else if(ne.startTime<=q)s(p),ne.sortIndex=ne.expirationTime,e(d,ne);else break;ne=t(p)}}function j(q){if(x=!1,P(q),!S)if(t(d)!==null)S=!0,Ae(U);else{var ne=t(p);ne!==null&&be(j,ne.startTime-q)}}function U(q,ne){S=!1,x&&(x=!1,C(Q),Q=-1),_=!0;var H=w;try{for(P(ne),g=t(d);g!==null&&(!(g.expirationTime>ne)||q&&!Le());){var O=g.callback;if(typeof O=="function"){g.callback=null,w=g.priorityLevel;var I=O(g.expirationTime<=ne);ne=n.unstable_now(),typeof I=="function"?g.callback=I:g===t(d)&&s(d),P(ne)}else s(d);g=t(d)}if(g!==null)var se=!0;else{var de=t(p);de!==null&&be(j,de.startTime-ne),se=!1}return se}finally{g=null,w=H,_=!1}}var B=!1,G=null,Q=-1,ie=5,we=-1;function Le(){return!(n.unstable_now()-we<ie)}function xe(){if(G!==null){var q=n.unstable_now();we=q;var ne=!0;try{ne=G(!0,q)}finally{ne?he():(B=!1,G=null)}}else B=!1}var he;if(typeof R=="function")he=function(){R(xe)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,Fe=_e.port2;_e.port1.onmessage=xe,he=function(){Fe.postMessage(null)}}else he=function(){k(xe,0)};function Ae(q){G=q,B||(B=!0,he())}function be(q,ne){Q=k(function(){q(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){S||_||(S=!0,Ae(U))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(q){switch(w){case 1:case 2:case 3:var ne=3;break;default:ne=w}var H=w;w=ne;try{return q()}finally{w=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,ne){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var H=w;w=q;try{return ne()}finally{w=H}},n.unstable_scheduleCallback=function(q,ne,H){var O=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?O+H:O):H=O,q){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=H+I,q={id:v++,callback:ne,priorityLevel:q,startTime:H,expirationTime:I,sortIndex:-1},H>O?(q.sortIndex=H,e(p,q),t(d)===null&&q===t(p)&&(x?(C(Q),Q=-1):x=!0,be(j,H-O))):(q.sortIndex=I,e(d,q),S||_||(S=!0,Ae(U))),q},n.unstable_shouldYield=Le,n.unstable_wrapCallback=function(q){var ne=w;return function(){var H=w;w=ne;try{return q.apply(this,arguments)}finally{w=H}}}})(dc)),dc}var Ip;function ew(){return Ip||(Ip=1,hc.exports=Zy()),hc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p;function tw(){if($p)return bt;$p=1;var n=mh(),e=ew();function t(i){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function a(i,r){u(i,r),u(i+"Capture",r)}function u(i,r){for(o[i]=r,i=0;i<r.length;i++)s.add(r[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},g={};function w(i){return d.call(g,i)?!0:d.call(v,i)?!1:p.test(i)?g[i]=!0:(v[i]=!0,!1)}function _(i,r,l,c){if(l!==null&&l.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function S(i,r,l,c){if(r===null||typeof r>"u"||_(i,r,l,c))return!0;if(c)return!1;if(l!==null)switch(l.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function x(i,r,l,c,f,m,b){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=i,this.type=r,this.sanitizeURL=m,this.removeEmptyString=b}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){k[i]=new x(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var r=i[0];k[r]=new x(r,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){k[i]=new x(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){k[i]=new x(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){k[i]=new x(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){k[i]=new x(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){k[i]=new x(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){k[i]=new x(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){k[i]=new x(i,5,!1,i.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function R(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var r=i.replace(C,R);k[r]=new x(r,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var r=i.replace(C,R);k[r]=new x(r,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var r=i.replace(C,R);k[r]=new x(r,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){k[i]=new x(i,1,!1,i.toLowerCase(),null,!1,!1)}),k.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){k[i]=new x(i,1,!1,i.toLowerCase(),null,!0,!0)});function P(i,r,l,c){var f=k.hasOwnProperty(r)?k[r]:null;(f!==null?f.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(S(r,l,f,c)&&(l=null),c||f===null?w(r)&&(l===null?i.removeAttribute(r):i.setAttribute(r,""+l)):f.mustUseProperty?i[f.propertyName]=l===null?f.type===3?!1:"":l:(r=f.attributeName,c=f.attributeNamespace,l===null?i.removeAttribute(r):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,c?i.setAttributeNS(c,r,l):i.setAttribute(r,l))))}var j=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),B=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),we=Symbol.for("react.provider"),Le=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),Fe=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),q=Symbol.iterator;function ne(i){return i===null||typeof i!="object"?null:(i=q&&i[q]||i["@@iterator"],typeof i=="function"?i:null)}var H=Object.assign,O;function I(i){if(O===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);O=r&&r[1]||""}return`
`+O+i}var se=!1;function de(i,r){if(!i||se)return"";se=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(M){var c=M}Reflect.construct(i,[],r)}else{try{r.call()}catch(M){c=M}i.call(r.prototype)}else{try{throw Error()}catch(M){c=M}i()}}catch(M){if(M&&c&&typeof M.stack=="string"){for(var f=M.stack.split(`
`),m=c.stack.split(`
`),b=f.length-1,E=m.length-1;1<=b&&0<=E&&f[b]!==m[E];)E--;for(;1<=b&&0<=E;b--,E--)if(f[b]!==m[E]){if(b!==1||E!==1)do if(b--,E--,0>E||f[b]!==m[E]){var T=`
`+f[b].replace(" at new "," at ");return i.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",i.displayName)),T}while(1<=b&&0<=E);break}}}finally{se=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?I(i):""}function ve(i){switch(i.tag){case 5:return I(i.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return i=de(i.type,!1),i;case 11:return i=de(i.type.render,!1),i;case 1:return i=de(i.type,!0),i;default:return""}}function ge(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case G:return"Fragment";case B:return"Portal";case ie:return"Profiler";case Q:return"StrictMode";case he:return"Suspense";case _e:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Le:return(i.displayName||"Context")+".Consumer";case we:return(i._context.displayName||"Context")+".Provider";case xe:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Fe:return r=i.displayName||null,r!==null?r:ge(i.type)||"Memo";case Ae:r=i._payload,i=i._init;try{return ge(i(r))}catch{}}return null}function Ee(i){var r=i.type;switch(i.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=r.render,i=i.displayName||i.name||"",r.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(r);case 8:return r===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Se(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Pe(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function _t(i){var r=Pe(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),c=""+i[r];if(!i.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){c=""+b,m.call(this,b)}}),Object.defineProperty(i,r,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(b){c=""+b},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function uo(i){i._valueTracker||(i._valueTracker=_t(i))}function Mh(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return i&&(c=Pe(i)?i.checked?"true":"false":i.value),i=c,i!==l?(r.setValue(i),!0):!1}function co(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function pl(i,r){var l=r.checked;return H({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function Ih(i,r){var l=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;l=Se(r.value!=null?r.value:l),i._wrapperState={initialChecked:c,initialValue:l,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function $h(i,r){r=r.checked,r!=null&&P(i,"checked",r,!1)}function ml(i,r){$h(i,r);var l=Se(r.value),c=r.type;if(l!=null)c==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(c==="submit"||c==="reset"){i.removeAttribute("value");return}r.hasOwnProperty("value")?vl(i,r.type,l):r.hasOwnProperty("defaultValue")&&vl(i,r.type,Se(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(i.defaultChecked=!!r.defaultChecked)}function zh(i,r,l){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+i._wrapperState.initialValue,l||r===i.value||(i.value=r),i.defaultValue=r}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function vl(i,r,l){(r!=="number"||co(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var Di=Array.isArray;function Ds(i,r,l,c){if(i=i.options,r){r={};for(var f=0;f<l.length;f++)r["$"+l[f]]=!0;for(l=0;l<i.length;l++)f=r.hasOwnProperty("$"+i[l].value),i[l].selected!==f&&(i[l].selected=f),f&&c&&(i[l].defaultSelected=!0)}else{for(l=""+Se(l),r=null,f=0;f<i.length;f++){if(i[f].value===l){i[f].selected=!0,c&&(i[f].defaultSelected=!0);return}r!==null||i[f].disabled||(r=i[f])}r!==null&&(r.selected=!0)}}function gl(i,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return H({},r,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Dh(i,r){var l=r.value;if(l==null){if(l=r.children,r=r.defaultValue,l!=null){if(r!=null)throw Error(t(92));if(Di(l)){if(1<l.length)throw Error(t(93));l=l[0]}r=l}r==null&&(r=""),l=r}i._wrapperState={initialValue:Se(l)}}function Uh(i,r){var l=Se(r.value),c=Se(r.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),r.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),c!=null&&(i.defaultValue=""+c)}function Fh(i){var r=i.textContent;r===i._wrapperState.initialValue&&r!==""&&r!==null&&(i.value=r)}function Bh(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yl(i,r){return i==null||i==="http://www.w3.org/1999/xhtml"?Bh(r):i==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ho,Vh=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,l,c,f){MSApp.execUnsafeLocalFunction(function(){return i(r,l,c,f)})}:i})(function(i,r){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=r;else{for(ho=ho||document.createElement("div"),ho.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ho.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;r.firstChild;)i.appendChild(r.firstChild)}});function Ui(i,r){if(r){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=r;return}}i.textContent=r}var Fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xg=["Webkit","ms","Moz","O"];Object.keys(Fi).forEach(function(i){Xg.forEach(function(r){r=r+i.charAt(0).toUpperCase()+i.substring(1),Fi[r]=Fi[i]})});function Wh(i,r,l){return r==null||typeof r=="boolean"||r===""?"":l||typeof r!="number"||r===0||Fi.hasOwnProperty(i)&&Fi[i]?(""+r).trim():r+"px"}function Kh(i,r){i=i.style;for(var l in r)if(r.hasOwnProperty(l)){var c=l.indexOf("--")===0,f=Wh(l,r[l],c);l==="float"&&(l="cssFloat"),c?i.setProperty(l,f):i[l]=f}}var Yg=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wl(i,r){if(r){if(Yg[i]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function bl(i,r){if(i.indexOf("-")===-1)return typeof r.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xl=null;function _l(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Sl=null,Us=null,Fs=null;function qh(i){if(i=ur(i)){if(typeof Sl!="function")throw Error(t(280));var r=i.stateNode;r&&(r=Mo(r),Sl(i.stateNode,i.type,r))}}function Hh(i){Us?Fs?Fs.push(i):Fs=[i]:Us=i}function Gh(){if(Us){var i=Us,r=Fs;if(Fs=Us=null,qh(i),r)for(i=0;i<r.length;i++)qh(r[i])}}function Jh(i,r){return i(r)}function Qh(){}var kl=!1;function Xh(i,r,l){if(kl)return i(r,l);kl=!0;try{return Jh(i,r,l)}finally{kl=!1,(Us!==null||Fs!==null)&&(Qh(),Gh())}}function Bi(i,r){var l=i.stateNode;if(l===null)return null;var c=Mo(l);if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,r,typeof l));return l}var El=!1;if(h)try{var Vi={};Object.defineProperty(Vi,"passive",{get:function(){El=!0}}),window.addEventListener("test",Vi,Vi),window.removeEventListener("test",Vi,Vi)}catch{El=!1}function Zg(i,r,l,c,f,m,b,E,T){var M=Array.prototype.slice.call(arguments,3);try{r.apply(l,M)}catch(F){this.onError(F)}}var Wi=!1,fo=null,po=!1,Cl=null,e0={onError:function(i){Wi=!0,fo=i}};function t0(i,r,l,c,f,m,b,E,T){Wi=!1,fo=null,Zg.apply(e0,arguments)}function n0(i,r,l,c,f,m,b,E,T){if(t0.apply(this,arguments),Wi){if(Wi){var M=fo;Wi=!1,fo=null}else throw Error(t(198));po||(po=!0,Cl=M)}}function as(i){var r=i,l=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(l=r.return),i=r.return;while(i)}return r.tag===3?l:null}function Yh(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function Zh(i){if(as(i)!==i)throw Error(t(188))}function s0(i){var r=i.alternate;if(!r){if(r=as(i),r===null)throw Error(t(188));return r!==i?null:i}for(var l=i,c=r;;){var f=l.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){l=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===l)return Zh(f),i;if(m===c)return Zh(f),r;m=m.sibling}throw Error(t(188))}if(l.return!==c.return)l=f,c=m;else{for(var b=!1,E=f.child;E;){if(E===l){b=!0,l=f,c=m;break}if(E===c){b=!0,c=f,l=m;break}E=E.sibling}if(!b){for(E=m.child;E;){if(E===l){b=!0,l=m,c=f;break}if(E===c){b=!0,c=m,l=f;break}E=E.sibling}if(!b)throw Error(t(189))}}if(l.alternate!==c)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:r}function ed(i){return i=s0(i),i!==null?td(i):null}function td(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var r=td(i);if(r!==null)return r;i=i.sibling}return null}var nd=e.unstable_scheduleCallback,sd=e.unstable_cancelCallback,i0=e.unstable_shouldYield,r0=e.unstable_requestPaint,Be=e.unstable_now,o0=e.unstable_getCurrentPriorityLevel,Tl=e.unstable_ImmediatePriority,id=e.unstable_UserBlockingPriority,mo=e.unstable_NormalPriority,a0=e.unstable_LowPriority,rd=e.unstable_IdlePriority,vo=null,en=null;function l0(i){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(vo,i,void 0,(i.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:h0,u0=Math.log,c0=Math.LN2;function h0(i){return i>>>=0,i===0?32:31-(u0(i)/c0|0)|0}var go=64,yo=4194304;function Ki(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function wo(i,r){var l=i.pendingLanes;if(l===0)return 0;var c=0,f=i.suspendedLanes,m=i.pingedLanes,b=l&268435455;if(b!==0){var E=b&~f;E!==0?c=Ki(E):(m&=b,m!==0&&(c=Ki(m)))}else b=l&~f,b!==0?c=Ki(b):m!==0&&(c=Ki(m));if(c===0)return 0;if(r!==0&&r!==c&&(r&f)===0&&(f=c&-c,m=r&-r,f>=m||f===16&&(m&4194240)!==0))return r;if((c&4)!==0&&(c|=l&16),r=i.entangledLanes,r!==0)for(i=i.entanglements,r&=c;0<r;)l=31-zt(r),f=1<<l,c|=i[l],r&=~f;return c}function d0(i,r){switch(i){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f0(i,r){for(var l=i.suspendedLanes,c=i.pingedLanes,f=i.expirationTimes,m=i.pendingLanes;0<m;){var b=31-zt(m),E=1<<b,T=f[b];T===-1?((E&l)===0||(E&c)!==0)&&(f[b]=d0(E,r)):T<=r&&(i.expiredLanes|=E),m&=~E}}function jl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function od(){var i=go;return go<<=1,(go&4194240)===0&&(go=64),i}function Nl(i){for(var r=[],l=0;31>l;l++)r.push(i);return r}function qi(i,r,l){i.pendingLanes|=r,r!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,r=31-zt(r),i[r]=l}function p0(i,r){var l=i.pendingLanes&~r;i.pendingLanes=r,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=r,i.mutableReadLanes&=r,i.entangledLanes&=r,r=i.entanglements;var c=i.eventTimes;for(i=i.expirationTimes;0<l;){var f=31-zt(l),m=1<<f;r[f]=0,c[f]=-1,i[f]=-1,l&=~m}}function Rl(i,r){var l=i.entangledLanes|=r;for(i=i.entanglements;l;){var c=31-zt(l),f=1<<c;f&r|i[c]&r&&(i[c]|=r),l&=~f}}var ke=0;function ad(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var ld,Pl,ud,cd,hd,Ol=!1,bo=[],Tn=null,jn=null,Nn=null,Hi=new Map,Gi=new Map,Rn=[],m0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dd(i,r){switch(i){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":Nn=null;break;case"pointerover":case"pointerout":Hi.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gi.delete(r.pointerId)}}function Ji(i,r,l,c,f,m){return i===null||i.nativeEvent!==m?(i={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=ur(r),r!==null&&Pl(r)),i):(i.eventSystemFlags|=c,r=i.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),i)}function v0(i,r,l,c,f){switch(r){case"focusin":return Tn=Ji(Tn,i,r,l,c,f),!0;case"dragenter":return jn=Ji(jn,i,r,l,c,f),!0;case"mouseover":return Nn=Ji(Nn,i,r,l,c,f),!0;case"pointerover":var m=f.pointerId;return Hi.set(m,Ji(Hi.get(m)||null,i,r,l,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Gi.set(m,Ji(Gi.get(m)||null,i,r,l,c,f)),!0}return!1}function fd(i){var r=ls(i.target);if(r!==null){var l=as(r);if(l!==null){if(r=l.tag,r===13){if(r=Yh(l),r!==null){i.blockedOn=r,hd(i.priority,function(){ud(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function xo(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var l=Al(i.domEventName,i.eventSystemFlags,r[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var c=new l.constructor(l.type,l);xl=c,l.target.dispatchEvent(c),xl=null}else return r=ur(l),r!==null&&Pl(r),i.blockedOn=l,!1;r.shift()}return!0}function pd(i,r,l){xo(i)&&l.delete(r)}function g0(){Ol=!1,Tn!==null&&xo(Tn)&&(Tn=null),jn!==null&&xo(jn)&&(jn=null),Nn!==null&&xo(Nn)&&(Nn=null),Hi.forEach(pd),Gi.forEach(pd)}function Qi(i,r){i.blockedOn===r&&(i.blockedOn=null,Ol||(Ol=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,g0)))}function Xi(i){function r(f){return Qi(f,i)}if(0<bo.length){Qi(bo[0],i);for(var l=1;l<bo.length;l++){var c=bo[l];c.blockedOn===i&&(c.blockedOn=null)}}for(Tn!==null&&Qi(Tn,i),jn!==null&&Qi(jn,i),Nn!==null&&Qi(Nn,i),Hi.forEach(r),Gi.forEach(r),l=0;l<Rn.length;l++)c=Rn[l],c.blockedOn===i&&(c.blockedOn=null);for(;0<Rn.length&&(l=Rn[0],l.blockedOn===null);)fd(l),l.blockedOn===null&&Rn.shift()}var Bs=j.ReactCurrentBatchConfig,_o=!0;function y0(i,r,l,c){var f=ke,m=Bs.transition;Bs.transition=null;try{ke=1,Ll(i,r,l,c)}finally{ke=f,Bs.transition=m}}function w0(i,r,l,c){var f=ke,m=Bs.transition;Bs.transition=null;try{ke=4,Ll(i,r,l,c)}finally{ke=f,Bs.transition=m}}function Ll(i,r,l,c){if(_o){var f=Al(i,r,l,c);if(f===null)Xl(i,r,c,So,l),dd(i,c);else if(v0(f,i,r,l,c))c.stopPropagation();else if(dd(i,c),r&4&&-1<m0.indexOf(i)){for(;f!==null;){var m=ur(f);if(m!==null&&ld(m),m=Al(i,r,l,c),m===null&&Xl(i,r,c,So,l),m===f)break;f=m}f!==null&&c.stopPropagation()}else Xl(i,r,c,null,l)}}var So=null;function Al(i,r,l,c){if(So=null,i=_l(c),i=ls(i),i!==null)if(r=as(i),r===null)i=null;else if(l=r.tag,l===13){if(i=Yh(r),i!==null)return i;i=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null);return So=i,null}function md(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o0()){case Tl:return 1;case id:return 4;case mo:case a0:return 16;case rd:return 536870912;default:return 16}default:return 16}}var Pn=null,Ml=null,ko=null;function vd(){if(ko)return ko;var i,r=Ml,l=r.length,c,f="value"in Pn?Pn.value:Pn.textContent,m=f.length;for(i=0;i<l&&r[i]===f[i];i++);var b=l-i;for(c=1;c<=b&&r[l-c]===f[m-c];c++);return ko=f.slice(i,1<c?1-c:void 0)}function Eo(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Co(){return!0}function gd(){return!1}function St(i){function r(l,c,f,m,b){this._reactName=l,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var E in i)i.hasOwnProperty(E)&&(l=i[E],this[E]=l?l(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Co:gd,this.isPropagationStopped=gd,this}return H(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Co)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Co)},persist:function(){},isPersistent:Co}),r}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Il=St(Vs),Yi=H({},Vs,{view:0,detail:0}),b0=St(Yi),$l,zl,Zi,To=H({},Yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ul,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Zi&&(Zi&&i.type==="mousemove"?($l=i.screenX-Zi.screenX,zl=i.screenY-Zi.screenY):zl=$l=0,Zi=i),$l)},movementY:function(i){return"movementY"in i?i.movementY:zl}}),yd=St(To),x0=H({},To,{dataTransfer:0}),_0=St(x0),S0=H({},Yi,{relatedTarget:0}),Dl=St(S0),k0=H({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),E0=St(k0),C0=H({},Vs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),T0=St(C0),j0=H({},Vs,{data:0}),wd=St(j0),N0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function O0(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=P0[i])?!!r[i]:!1}function Ul(){return O0}var L0=H({},Yi,{key:function(i){if(i.key){var r=N0[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Eo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?R0[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ul,charCode:function(i){return i.type==="keypress"?Eo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Eo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),A0=St(L0),M0=H({},To,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bd=St(M0),I0=H({},Yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ul}),$0=St(I0),z0=H({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),D0=St(z0),U0=H({},To,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),F0=St(U0),B0=[9,13,27,32],Fl=h&&"CompositionEvent"in window,er=null;h&&"documentMode"in document&&(er=document.documentMode);var V0=h&&"TextEvent"in window&&!er,xd=h&&(!Fl||er&&8<er&&11>=er),_d=" ",Sd=!1;function kd(i,r){switch(i){case"keyup":return B0.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ed(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ws=!1;function W0(i,r){switch(i){case"compositionend":return Ed(r);case"keypress":return r.which!==32?null:(Sd=!0,_d);case"textInput":return i=r.data,i===_d&&Sd?null:i;default:return null}}function K0(i,r){if(Ws)return i==="compositionend"||!Fl&&kd(i,r)?(i=vd(),ko=Ml=Pn=null,Ws=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return xd&&r.locale!=="ko"?null:r.data;default:return null}}var q0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cd(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!q0[i.type]:r==="textarea"}function Td(i,r,l,c){Hh(c),r=Oo(r,"onChange"),0<r.length&&(l=new Il("onChange","change",null,l,c),i.push({event:l,listeners:r}))}var tr=null,nr=null;function H0(i){Kd(i,0)}function jo(i){var r=Js(i);if(Mh(r))return i}function G0(i,r){if(i==="change")return r}var jd=!1;if(h){var Bl;if(h){var Vl="oninput"in document;if(!Vl){var Nd=document.createElement("div");Nd.setAttribute("oninput","return;"),Vl=typeof Nd.oninput=="function"}Bl=Vl}else Bl=!1;jd=Bl&&(!document.documentMode||9<document.documentMode)}function Rd(){tr&&(tr.detachEvent("onpropertychange",Pd),nr=tr=null)}function Pd(i){if(i.propertyName==="value"&&jo(nr)){var r=[];Td(r,nr,i,_l(i)),Xh(H0,r)}}function J0(i,r,l){i==="focusin"?(Rd(),tr=r,nr=l,tr.attachEvent("onpropertychange",Pd)):i==="focusout"&&Rd()}function Q0(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return jo(nr)}function X0(i,r){if(i==="click")return jo(r)}function Y0(i,r){if(i==="input"||i==="change")return jo(r)}function Z0(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Dt=typeof Object.is=="function"?Object.is:Z0;function sr(i,r){if(Dt(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var l=Object.keys(i),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var f=l[c];if(!d.call(r,f)||!Dt(i[f],r[f]))return!1}return!0}function Od(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ld(i,r){var l=Od(i);i=0;for(var c;l;){if(l.nodeType===3){if(c=i+l.textContent.length,i<=r&&c>=r)return{node:l,offset:r-i};i=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Od(l)}}function Ad(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Ad(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Md(){for(var i=window,r=co();r instanceof i.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)i=r.contentWindow;else break;r=co(i.document)}return r}function Wl(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}function ey(i){var r=Md(),l=i.focusedElem,c=i.selectionRange;if(r!==l&&l&&l.ownerDocument&&Ad(l.ownerDocument.documentElement,l)){if(c!==null&&Wl(l)){if(r=c.start,i=c.end,i===void 0&&(i=r),"selectionStart"in l)l.selectionStart=r,l.selectionEnd=Math.min(i,l.value.length);else if(i=(r=l.ownerDocument||document)&&r.defaultView||window,i.getSelection){i=i.getSelection();var f=l.textContent.length,m=Math.min(c.start,f);c=c.end===void 0?m:Math.min(c.end,f),!i.extend&&m>c&&(f=c,c=m,m=f),f=Ld(l,m);var b=Ld(l,c);f&&b&&(i.rangeCount!==1||i.anchorNode!==f.node||i.anchorOffset!==f.offset||i.focusNode!==b.node||i.focusOffset!==b.offset)&&(r=r.createRange(),r.setStart(f.node,f.offset),i.removeAllRanges(),m>c?(i.addRange(r),i.extend(b.node,b.offset)):(r.setEnd(b.node,b.offset),i.addRange(r)))}}for(r=[],i=l;i=i.parentNode;)i.nodeType===1&&r.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<r.length;l++)i=r[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var ty=h&&"documentMode"in document&&11>=document.documentMode,Ks=null,Kl=null,ir=null,ql=!1;function Id(i,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ql||Ks==null||Ks!==co(c)||(c=Ks,"selectionStart"in c&&Wl(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ir&&sr(ir,c)||(ir=c,c=Oo(Kl,"onSelect"),0<c.length&&(r=new Il("onSelect","select",null,r,l),i.push({event:r,listeners:c}),r.target=Ks)))}function No(i,r){var l={};return l[i.toLowerCase()]=r.toLowerCase(),l["Webkit"+i]="webkit"+r,l["Moz"+i]="moz"+r,l}var qs={animationend:No("Animation","AnimationEnd"),animationiteration:No("Animation","AnimationIteration"),animationstart:No("Animation","AnimationStart"),transitionend:No("Transition","TransitionEnd")},Hl={},$d={};h&&($d=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function Ro(i){if(Hl[i])return Hl[i];if(!qs[i])return i;var r=qs[i],l;for(l in r)if(r.hasOwnProperty(l)&&l in $d)return Hl[i]=r[l];return i}var zd=Ro("animationend"),Dd=Ro("animationiteration"),Ud=Ro("animationstart"),Fd=Ro("transitionend"),Bd=new Map,Vd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function On(i,r){Bd.set(i,r),a(r,[i])}for(var Gl=0;Gl<Vd.length;Gl++){var Jl=Vd[Gl],ny=Jl.toLowerCase(),sy=Jl[0].toUpperCase()+Jl.slice(1);On(ny,"on"+sy)}On(zd,"onAnimationEnd"),On(Dd,"onAnimationIteration"),On(Ud,"onAnimationStart"),On("dblclick","onDoubleClick"),On("focusin","onFocus"),On("focusout","onBlur"),On(Fd,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iy=new Set("cancel close invalid load scroll toggle".split(" ").concat(rr));function Wd(i,r,l){var c=i.type||"unknown-event";i.currentTarget=l,n0(c,r,void 0,i),i.currentTarget=null}function Kd(i,r){r=(r&4)!==0;for(var l=0;l<i.length;l++){var c=i[l],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var b=c.length-1;0<=b;b--){var E=c[b],T=E.instance,M=E.currentTarget;if(E=E.listener,T!==m&&f.isPropagationStopped())break e;Wd(f,E,M),m=T}else for(b=0;b<c.length;b++){if(E=c[b],T=E.instance,M=E.currentTarget,E=E.listener,T!==m&&f.isPropagationStopped())break e;Wd(f,E,M),m=T}}}if(po)throw i=Cl,po=!1,Cl=null,i}function je(i,r){var l=r[su];l===void 0&&(l=r[su]=new Set);var c=i+"__bubble";l.has(c)||(qd(r,i,2,!1),l.add(c))}function Ql(i,r,l){var c=0;r&&(c|=4),qd(l,i,c,r)}var Po="_reactListening"+Math.random().toString(36).slice(2);function or(i){if(!i[Po]){i[Po]=!0,s.forEach(function(l){l!=="selectionchange"&&(iy.has(l)||Ql(l,!1,i),Ql(l,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Po]||(r[Po]=!0,Ql("selectionchange",!1,r))}}function qd(i,r,l,c){switch(md(r)){case 1:var f=y0;break;case 4:f=w0;break;default:f=Ll}l=f.bind(null,r,l,i),f=void 0,!El||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?i.addEventListener(r,l,{capture:!0,passive:f}):i.addEventListener(r,l,!0):f!==void 0?i.addEventListener(r,l,{passive:f}):i.addEventListener(r,l,!1)}function Xl(i,r,l,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var E=c.stateNode.containerInfo;if(E===f||E.nodeType===8&&E.parentNode===f)break;if(b===4)for(b=c.return;b!==null;){var T=b.tag;if((T===3||T===4)&&(T=b.stateNode.containerInfo,T===f||T.nodeType===8&&T.parentNode===f))return;b=b.return}for(;E!==null;){if(b=ls(E),b===null)return;if(T=b.tag,T===5||T===6){c=m=b;continue e}E=E.parentNode}}c=c.return}Xh(function(){var M=m,F=_l(l),V=[];e:{var D=Bd.get(i);if(D!==void 0){var J=Il,Y=i;switch(i){case"keypress":if(Eo(l)===0)break e;case"keydown":case"keyup":J=A0;break;case"focusin":Y="focus",J=Dl;break;case"focusout":Y="blur",J=Dl;break;case"beforeblur":case"afterblur":J=Dl;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=yd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=_0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=$0;break;case zd:case Dd:case Ud:J=E0;break;case Fd:J=D0;break;case"scroll":J=b0;break;case"wheel":J=F0;break;case"copy":case"cut":case"paste":J=T0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=bd}var Z=(r&4)!==0,Ve=!Z&&i==="scroll",L=Z?D!==null?D+"Capture":null:D;Z=[];for(var N=M,A;N!==null;){A=N;var K=A.stateNode;if(A.tag===5&&K!==null&&(A=K,L!==null&&(K=Bi(N,L),K!=null&&Z.push(ar(N,K,A)))),Ve)break;N=N.return}0<Z.length&&(D=new J(D,Y,null,l,F),V.push({event:D,listeners:Z}))}}if((r&7)===0){e:{if(D=i==="mouseover"||i==="pointerover",J=i==="mouseout"||i==="pointerout",D&&l!==xl&&(Y=l.relatedTarget||l.fromElement)&&(ls(Y)||Y[hn]))break e;if((J||D)&&(D=F.window===F?F:(D=F.ownerDocument)?D.defaultView||D.parentWindow:window,J?(Y=l.relatedTarget||l.toElement,J=M,Y=Y?ls(Y):null,Y!==null&&(Ve=as(Y),Y!==Ve||Y.tag!==5&&Y.tag!==6)&&(Y=null)):(J=null,Y=M),J!==Y)){if(Z=yd,K="onMouseLeave",L="onMouseEnter",N="mouse",(i==="pointerout"||i==="pointerover")&&(Z=bd,K="onPointerLeave",L="onPointerEnter",N="pointer"),Ve=J==null?D:Js(J),A=Y==null?D:Js(Y),D=new Z(K,N+"leave",J,l,F),D.target=Ve,D.relatedTarget=A,K=null,ls(F)===M&&(Z=new Z(L,N+"enter",Y,l,F),Z.target=A,Z.relatedTarget=Ve,K=Z),Ve=K,J&&Y)t:{for(Z=J,L=Y,N=0,A=Z;A;A=Hs(A))N++;for(A=0,K=L;K;K=Hs(K))A++;for(;0<N-A;)Z=Hs(Z),N--;for(;0<A-N;)L=Hs(L),A--;for(;N--;){if(Z===L||L!==null&&Z===L.alternate)break t;Z=Hs(Z),L=Hs(L)}Z=null}else Z=null;J!==null&&Hd(V,D,J,Z,!1),Y!==null&&Ve!==null&&Hd(V,Ve,Y,Z,!0)}}e:{if(D=M?Js(M):window,J=D.nodeName&&D.nodeName.toLowerCase(),J==="select"||J==="input"&&D.type==="file")var ee=G0;else if(Cd(D))if(jd)ee=Y0;else{ee=Q0;var re=J0}else(J=D.nodeName)&&J.toLowerCase()==="input"&&(D.type==="checkbox"||D.type==="radio")&&(ee=X0);if(ee&&(ee=ee(i,M))){Td(V,ee,l,F);break e}re&&re(i,D,M),i==="focusout"&&(re=D._wrapperState)&&re.controlled&&D.type==="number"&&vl(D,"number",D.value)}switch(re=M?Js(M):window,i){case"focusin":(Cd(re)||re.contentEditable==="true")&&(Ks=re,Kl=M,ir=null);break;case"focusout":ir=Kl=Ks=null;break;case"mousedown":ql=!0;break;case"contextmenu":case"mouseup":case"dragend":ql=!1,Id(V,l,F);break;case"selectionchange":if(ty)break;case"keydown":case"keyup":Id(V,l,F)}var oe;if(Fl)e:{switch(i){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else Ws?kd(i,l)&&(ue="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(ue="onCompositionStart");ue&&(xd&&l.locale!=="ko"&&(Ws||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Ws&&(oe=vd()):(Pn=F,Ml="value"in Pn?Pn.value:Pn.textContent,Ws=!0)),re=Oo(M,ue),0<re.length&&(ue=new wd(ue,i,null,l,F),V.push({event:ue,listeners:re}),oe?ue.data=oe:(oe=Ed(l),oe!==null&&(ue.data=oe)))),(oe=V0?W0(i,l):K0(i,l))&&(M=Oo(M,"onBeforeInput"),0<M.length&&(F=new wd("onBeforeInput","beforeinput",null,l,F),V.push({event:F,listeners:M}),F.data=oe))}Kd(V,r)})}function ar(i,r,l){return{instance:i,listener:r,currentTarget:l}}function Oo(i,r){for(var l=r+"Capture",c=[];i!==null;){var f=i,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=Bi(i,l),m!=null&&c.unshift(ar(i,m,f)),m=Bi(i,r),m!=null&&c.push(ar(i,m,f))),i=i.return}return c}function Hs(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Hd(i,r,l,c,f){for(var m=r._reactName,b=[];l!==null&&l!==c;){var E=l,T=E.alternate,M=E.stateNode;if(T!==null&&T===c)break;E.tag===5&&M!==null&&(E=M,f?(T=Bi(l,m),T!=null&&b.unshift(ar(l,T,E))):f||(T=Bi(l,m),T!=null&&b.push(ar(l,T,E)))),l=l.return}b.length!==0&&i.push({event:r,listeners:b})}var ry=/\r\n?/g,oy=/\u0000|\uFFFD/g;function Gd(i){return(typeof i=="string"?i:""+i).replace(ry,`
`).replace(oy,"")}function Lo(i,r,l){if(r=Gd(r),Gd(i)!==r&&l)throw Error(t(425))}function Ao(){}var Yl=null,Zl=null;function eu(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var tu=typeof setTimeout=="function"?setTimeout:void 0,ay=typeof clearTimeout=="function"?clearTimeout:void 0,Jd=typeof Promise=="function"?Promise:void 0,ly=typeof queueMicrotask=="function"?queueMicrotask:typeof Jd<"u"?function(i){return Jd.resolve(null).then(i).catch(uy)}:tu;function uy(i){setTimeout(function(){throw i})}function nu(i,r){var l=r,c=0;do{var f=l.nextSibling;if(i.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(c===0){i.removeChild(f),Xi(r);return}c--}else l!=="$"&&l!=="$?"&&l!=="$!"||c++;l=f}while(l);Xi(r)}function Ln(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return i}function Qd(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return i;r--}else l==="/$"&&r++}i=i.previousSibling}return null}var Gs=Math.random().toString(36).slice(2),tn="__reactFiber$"+Gs,lr="__reactProps$"+Gs,hn="__reactContainer$"+Gs,su="__reactEvents$"+Gs,cy="__reactListeners$"+Gs,hy="__reactHandles$"+Gs;function ls(i){var r=i[tn];if(r)return r;for(var l=i.parentNode;l;){if(r=l[hn]||l[tn]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(i=Qd(i);i!==null;){if(l=i[tn])return l;i=Qd(i)}return r}i=l,l=i.parentNode}return null}function ur(i){return i=i[tn]||i[hn],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Js(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Mo(i){return i[lr]||null}var iu=[],Qs=-1;function An(i){return{current:i}}function Ne(i){0>Qs||(i.current=iu[Qs],iu[Qs]=null,Qs--)}function Ce(i,r){Qs++,iu[Qs]=i.current,i.current=r}var Mn={},rt=An(Mn),mt=An(!1),us=Mn;function Xs(i,r){var l=i.type.contextTypes;if(!l)return Mn;var c=i.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in l)f[m]=r[m];return c&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=r,i.__reactInternalMemoizedMaskedChildContext=f),f}function vt(i){return i=i.childContextTypes,i!=null}function Io(){Ne(mt),Ne(rt)}function Xd(i,r,l){if(rt.current!==Mn)throw Error(t(168));Ce(rt,r),Ce(mt,l)}function Yd(i,r,l){var c=i.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return l;c=c.getChildContext();for(var f in c)if(!(f in r))throw Error(t(108,Ee(i)||"Unknown",f));return H({},l,c)}function $o(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Mn,us=rt.current,Ce(rt,i),Ce(mt,mt.current),!0}function Zd(i,r,l){var c=i.stateNode;if(!c)throw Error(t(169));l?(i=Yd(i,r,us),c.__reactInternalMemoizedMergedChildContext=i,Ne(mt),Ne(rt),Ce(rt,i)):Ne(mt),Ce(mt,l)}var dn=null,zo=!1,ru=!1;function ef(i){dn===null?dn=[i]:dn.push(i)}function dy(i){zo=!0,ef(i)}function In(){if(!ru&&dn!==null){ru=!0;var i=0,r=ke;try{var l=dn;for(ke=1;i<l.length;i++){var c=l[i];do c=c(!0);while(c!==null)}dn=null,zo=!1}catch(f){throw dn!==null&&(dn=dn.slice(i+1)),nd(Tl,In),f}finally{ke=r,ru=!1}}return null}var Ys=[],Zs=0,Do=null,Uo=0,Rt=[],Pt=0,cs=null,fn=1,pn="";function hs(i,r){Ys[Zs++]=Uo,Ys[Zs++]=Do,Do=i,Uo=r}function tf(i,r,l){Rt[Pt++]=fn,Rt[Pt++]=pn,Rt[Pt++]=cs,cs=i;var c=fn;i=pn;var f=32-zt(c)-1;c&=~(1<<f),l+=1;var m=32-zt(r)+f;if(30<m){var b=f-f%5;m=(c&(1<<b)-1).toString(32),c>>=b,f-=b,fn=1<<32-zt(r)+f|l<<f|c,pn=m+i}else fn=1<<m|l<<f|c,pn=i}function ou(i){i.return!==null&&(hs(i,1),tf(i,1,0))}function au(i){for(;i===Do;)Do=Ys[--Zs],Ys[Zs]=null,Uo=Ys[--Zs],Ys[Zs]=null;for(;i===cs;)cs=Rt[--Pt],Rt[Pt]=null,pn=Rt[--Pt],Rt[Pt]=null,fn=Rt[--Pt],Rt[Pt]=null}var kt=null,Et=null,Oe=!1,Ut=null;function nf(i,r){var l=Mt(5,null,null,0);l.elementType="DELETED",l.stateNode=r,l.return=i,r=i.deletions,r===null?(i.deletions=[l],i.flags|=16):r.push(l)}function sf(i,r){switch(i.tag){case 5:var l=i.type;return r=r.nodeType!==1||l.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(i.stateNode=r,kt=i,Et=Ln(r.firstChild),!0):!1;case 6:return r=i.pendingProps===""||r.nodeType!==3?null:r,r!==null?(i.stateNode=r,kt=i,Et=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(l=cs!==null?{id:fn,overflow:pn}:null,i.memoizedState={dehydrated:r,treeContext:l,retryLane:1073741824},l=Mt(18,null,null,0),l.stateNode=r,l.return=i,i.child=l,kt=i,Et=null,!0):!1;default:return!1}}function lu(i){return(i.mode&1)!==0&&(i.flags&128)===0}function uu(i){if(Oe){var r=Et;if(r){var l=r;if(!sf(i,r)){if(lu(i))throw Error(t(418));r=Ln(l.nextSibling);var c=kt;r&&sf(i,r)?nf(c,l):(i.flags=i.flags&-4097|2,Oe=!1,kt=i)}}else{if(lu(i))throw Error(t(418));i.flags=i.flags&-4097|2,Oe=!1,kt=i}}}function rf(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;kt=i}function Fo(i){if(i!==kt)return!1;if(!Oe)return rf(i),Oe=!0,!1;var r;if((r=i.tag!==3)&&!(r=i.tag!==5)&&(r=i.type,r=r!=="head"&&r!=="body"&&!eu(i.type,i.memoizedProps)),r&&(r=Et)){if(lu(i))throw of(),Error(t(418));for(;r;)nf(i,r),r=Ln(r.nextSibling)}if(rf(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(r===0){Et=Ln(i.nextSibling);break e}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++}i=i.nextSibling}Et=null}}else Et=kt?Ln(i.stateNode.nextSibling):null;return!0}function of(){for(var i=Et;i;)i=Ln(i.nextSibling)}function ei(){Et=kt=null,Oe=!1}function cu(i){Ut===null?Ut=[i]:Ut.push(i)}var fy=j.ReactCurrentBatchConfig;function cr(i,r,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var c=l.stateNode}if(!c)throw Error(t(147,i));var f=c,m=""+i;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===m?r.ref:(r=function(b){var E=f.refs;b===null?delete E[m]:E[m]=b},r._stringRef=m,r)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function Bo(i,r){throw i=Object.prototype.toString.call(r),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i))}function af(i){var r=i._init;return r(i._payload)}function lf(i){function r(L,N){if(i){var A=L.deletions;A===null?(L.deletions=[N],L.flags|=16):A.push(N)}}function l(L,N){if(!i)return null;for(;N!==null;)r(L,N),N=N.sibling;return null}function c(L,N){for(L=new Map;N!==null;)N.key!==null?L.set(N.key,N):L.set(N.index,N),N=N.sibling;return L}function f(L,N){return L=Wn(L,N),L.index=0,L.sibling=null,L}function m(L,N,A){return L.index=A,i?(A=L.alternate,A!==null?(A=A.index,A<N?(L.flags|=2,N):A):(L.flags|=2,N)):(L.flags|=1048576,N)}function b(L){return i&&L.alternate===null&&(L.flags|=2),L}function E(L,N,A,K){return N===null||N.tag!==6?(N=tc(A,L.mode,K),N.return=L,N):(N=f(N,A),N.return=L,N)}function T(L,N,A,K){var ee=A.type;return ee===G?F(L,N,A.props.children,K,A.key):N!==null&&(N.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===Ae&&af(ee)===N.type)?(K=f(N,A.props),K.ref=cr(L,N,A),K.return=L,K):(K=da(A.type,A.key,A.props,null,L.mode,K),K.ref=cr(L,N,A),K.return=L,K)}function M(L,N,A,K){return N===null||N.tag!==4||N.stateNode.containerInfo!==A.containerInfo||N.stateNode.implementation!==A.implementation?(N=nc(A,L.mode,K),N.return=L,N):(N=f(N,A.children||[]),N.return=L,N)}function F(L,N,A,K,ee){return N===null||N.tag!==7?(N=ws(A,L.mode,K,ee),N.return=L,N):(N=f(N,A),N.return=L,N)}function V(L,N,A){if(typeof N=="string"&&N!==""||typeof N=="number")return N=tc(""+N,L.mode,A),N.return=L,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case U:return A=da(N.type,N.key,N.props,null,L.mode,A),A.ref=cr(L,null,N),A.return=L,A;case B:return N=nc(N,L.mode,A),N.return=L,N;case Ae:var K=N._init;return V(L,K(N._payload),A)}if(Di(N)||ne(N))return N=ws(N,L.mode,A,null),N.return=L,N;Bo(L,N)}return null}function D(L,N,A,K){var ee=N!==null?N.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return ee!==null?null:E(L,N,""+A,K);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case U:return A.key===ee?T(L,N,A,K):null;case B:return A.key===ee?M(L,N,A,K):null;case Ae:return ee=A._init,D(L,N,ee(A._payload),K)}if(Di(A)||ne(A))return ee!==null?null:F(L,N,A,K,null);Bo(L,A)}return null}function J(L,N,A,K,ee){if(typeof K=="string"&&K!==""||typeof K=="number")return L=L.get(A)||null,E(N,L,""+K,ee);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case U:return L=L.get(K.key===null?A:K.key)||null,T(N,L,K,ee);case B:return L=L.get(K.key===null?A:K.key)||null,M(N,L,K,ee);case Ae:var re=K._init;return J(L,N,A,re(K._payload),ee)}if(Di(K)||ne(K))return L=L.get(A)||null,F(N,L,K,ee,null);Bo(N,K)}return null}function Y(L,N,A,K){for(var ee=null,re=null,oe=N,ue=N=0,Ye=null;oe!==null&&ue<A.length;ue++){oe.index>ue?(Ye=oe,oe=null):Ye=oe.sibling;var ye=D(L,oe,A[ue],K);if(ye===null){oe===null&&(oe=Ye);break}i&&oe&&ye.alternate===null&&r(L,oe),N=m(ye,N,ue),re===null?ee=ye:re.sibling=ye,re=ye,oe=Ye}if(ue===A.length)return l(L,oe),Oe&&hs(L,ue),ee;if(oe===null){for(;ue<A.length;ue++)oe=V(L,A[ue],K),oe!==null&&(N=m(oe,N,ue),re===null?ee=oe:re.sibling=oe,re=oe);return Oe&&hs(L,ue),ee}for(oe=c(L,oe);ue<A.length;ue++)Ye=J(oe,L,ue,A[ue],K),Ye!==null&&(i&&Ye.alternate!==null&&oe.delete(Ye.key===null?ue:Ye.key),N=m(Ye,N,ue),re===null?ee=Ye:re.sibling=Ye,re=Ye);return i&&oe.forEach(function(Kn){return r(L,Kn)}),Oe&&hs(L,ue),ee}function Z(L,N,A,K){var ee=ne(A);if(typeof ee!="function")throw Error(t(150));if(A=ee.call(A),A==null)throw Error(t(151));for(var re=ee=null,oe=N,ue=N=0,Ye=null,ye=A.next();oe!==null&&!ye.done;ue++,ye=A.next()){oe.index>ue?(Ye=oe,oe=null):Ye=oe.sibling;var Kn=D(L,oe,ye.value,K);if(Kn===null){oe===null&&(oe=Ye);break}i&&oe&&Kn.alternate===null&&r(L,oe),N=m(Kn,N,ue),re===null?ee=Kn:re.sibling=Kn,re=Kn,oe=Ye}if(ye.done)return l(L,oe),Oe&&hs(L,ue),ee;if(oe===null){for(;!ye.done;ue++,ye=A.next())ye=V(L,ye.value,K),ye!==null&&(N=m(ye,N,ue),re===null?ee=ye:re.sibling=ye,re=ye);return Oe&&hs(L,ue),ee}for(oe=c(L,oe);!ye.done;ue++,ye=A.next())ye=J(oe,L,ue,ye.value,K),ye!==null&&(i&&ye.alternate!==null&&oe.delete(ye.key===null?ue:ye.key),N=m(ye,N,ue),re===null?ee=ye:re.sibling=ye,re=ye);return i&&oe.forEach(function(qy){return r(L,qy)}),Oe&&hs(L,ue),ee}function Ve(L,N,A,K){if(typeof A=="object"&&A!==null&&A.type===G&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case U:e:{for(var ee=A.key,re=N;re!==null;){if(re.key===ee){if(ee=A.type,ee===G){if(re.tag===7){l(L,re.sibling),N=f(re,A.props.children),N.return=L,L=N;break e}}else if(re.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===Ae&&af(ee)===re.type){l(L,re.sibling),N=f(re,A.props),N.ref=cr(L,re,A),N.return=L,L=N;break e}l(L,re);break}else r(L,re);re=re.sibling}A.type===G?(N=ws(A.props.children,L.mode,K,A.key),N.return=L,L=N):(K=da(A.type,A.key,A.props,null,L.mode,K),K.ref=cr(L,N,A),K.return=L,L=K)}return b(L);case B:e:{for(re=A.key;N!==null;){if(N.key===re)if(N.tag===4&&N.stateNode.containerInfo===A.containerInfo&&N.stateNode.implementation===A.implementation){l(L,N.sibling),N=f(N,A.children||[]),N.return=L,L=N;break e}else{l(L,N);break}else r(L,N);N=N.sibling}N=nc(A,L.mode,K),N.return=L,L=N}return b(L);case Ae:return re=A._init,Ve(L,N,re(A._payload),K)}if(Di(A))return Y(L,N,A,K);if(ne(A))return Z(L,N,A,K);Bo(L,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,N!==null&&N.tag===6?(l(L,N.sibling),N=f(N,A),N.return=L,L=N):(l(L,N),N=tc(A,L.mode,K),N.return=L,L=N),b(L)):l(L,N)}return Ve}var ti=lf(!0),uf=lf(!1),Vo=An(null),Wo=null,ni=null,hu=null;function du(){hu=ni=Wo=null}function fu(i){var r=Vo.current;Ne(Vo),i._currentValue=r}function pu(i,r,l){for(;i!==null;){var c=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),i===l)break;i=i.return}}function si(i,r){Wo=i,hu=ni=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&r)!==0&&(gt=!0),i.firstContext=null)}function Ot(i){var r=i._currentValue;if(hu!==i)if(i={context:i,memoizedValue:r,next:null},ni===null){if(Wo===null)throw Error(t(308));ni=i,Wo.dependencies={lanes:0,firstContext:i}}else ni=ni.next=i;return r}var ds=null;function mu(i){ds===null?ds=[i]:ds.push(i)}function cf(i,r,l,c){var f=r.interleaved;return f===null?(l.next=l,mu(r)):(l.next=f.next,f.next=l),r.interleaved=l,mn(i,c)}function mn(i,r){i.lanes|=r;var l=i.alternate;for(l!==null&&(l.lanes|=r),l=i,i=i.return;i!==null;)i.childLanes|=r,l=i.alternate,l!==null&&(l.childLanes|=r),l=i,i=i.return;return l.tag===3?l.stateNode:null}var $n=!1;function vu(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hf(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function vn(i,r){return{eventTime:i,lane:r,tag:0,payload:null,callback:null,next:null}}function zn(i,r,l){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(me&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,mn(i,l)}return f=c.interleaved,f===null?(r.next=r,mu(c)):(r.next=f.next,f.next=r),c.interleaved=r,mn(i,l)}function Ko(i,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194240)!==0)){var c=r.lanes;c&=i.pendingLanes,l|=c,r.lanes=l,Rl(i,l)}}function df(i,r){var l=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var f=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var b={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};m===null?f=m=b:m=m.next=b,l=l.next}while(l!==null);m===null?f=m=r:m=m.next=r}else f=m=r;l={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,effects:c.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=r:i.next=r,l.lastBaseUpdate=r}function qo(i,r,l,c){var f=i.updateQueue;$n=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var T=E,M=T.next;T.next=null,b===null?m=M:b.next=M,b=T;var F=i.alternate;F!==null&&(F=F.updateQueue,E=F.lastBaseUpdate,E!==b&&(E===null?F.firstBaseUpdate=M:E.next=M,F.lastBaseUpdate=T))}if(m!==null){var V=f.baseState;b=0,F=M=T=null,E=m;do{var D=E.lane,J=E.eventTime;if((c&D)===D){F!==null&&(F=F.next={eventTime:J,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var Y=i,Z=E;switch(D=r,J=l,Z.tag){case 1:if(Y=Z.payload,typeof Y=="function"){V=Y.call(J,V,D);break e}V=Y;break e;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=Z.payload,D=typeof Y=="function"?Y.call(J,V,D):Y,D==null)break e;V=H({},V,D);break e;case 2:$n=!0}}E.callback!==null&&E.lane!==0&&(i.flags|=64,D=f.effects,D===null?f.effects=[E]:D.push(E))}else J={eventTime:J,lane:D,tag:E.tag,payload:E.payload,callback:E.callback,next:null},F===null?(M=F=J,T=V):F=F.next=J,b|=D;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;D=E,E=D.next,D.next=null,f.lastBaseUpdate=D,f.shared.pending=null}}while(!0);if(F===null&&(T=V),f.baseState=T,f.firstBaseUpdate=M,f.lastBaseUpdate=F,r=f.shared.interleaved,r!==null){f=r;do b|=f.lane,f=f.next;while(f!==r)}else m===null&&(f.shared.lanes=0);ms|=b,i.lanes=b,i.memoizedState=V}}function ff(i,r,l){if(i=r.effects,r.effects=null,i!==null)for(r=0;r<i.length;r++){var c=i[r],f=c.callback;if(f!==null){if(c.callback=null,c=l,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var hr={},nn=An(hr),dr=An(hr),fr=An(hr);function fs(i){if(i===hr)throw Error(t(174));return i}function gu(i,r){switch(Ce(fr,r),Ce(dr,i),Ce(nn,hr),i=r.nodeType,i){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:yl(null,"");break;default:i=i===8?r.parentNode:r,r=i.namespaceURI||null,i=i.tagName,r=yl(r,i)}Ne(nn),Ce(nn,r)}function ii(){Ne(nn),Ne(dr),Ne(fr)}function pf(i){fs(fr.current);var r=fs(nn.current),l=yl(r,i.type);r!==l&&(Ce(dr,i),Ce(nn,l))}function yu(i){dr.current===i&&(Ne(nn),Ne(dr))}var Me=An(0);function Ho(i){for(var r=i;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var wu=[];function bu(){for(var i=0;i<wu.length;i++)wu[i]._workInProgressVersionPrimary=null;wu.length=0}var Go=j.ReactCurrentDispatcher,xu=j.ReactCurrentBatchConfig,ps=0,Ie=null,He=null,Qe=null,Jo=!1,pr=!1,mr=0,py=0;function ot(){throw Error(t(321))}function _u(i,r){if(r===null)return!1;for(var l=0;l<r.length&&l<i.length;l++)if(!Dt(i[l],r[l]))return!1;return!0}function Su(i,r,l,c,f,m){if(ps=m,Ie=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Go.current=i===null||i.memoizedState===null?yy:wy,i=l(c,f),pr){m=0;do{if(pr=!1,mr=0,25<=m)throw Error(t(301));m+=1,Qe=He=null,r.updateQueue=null,Go.current=by,i=l(c,f)}while(pr)}if(Go.current=Yo,r=He!==null&&He.next!==null,ps=0,Qe=He=Ie=null,Jo=!1,r)throw Error(t(300));return i}function ku(){var i=mr!==0;return mr=0,i}function sn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Ie.memoizedState=Qe=i:Qe=Qe.next=i,Qe}function Lt(){if(He===null){var i=Ie.alternate;i=i!==null?i.memoizedState:null}else i=He.next;var r=Qe===null?Ie.memoizedState:Qe.next;if(r!==null)Qe=r,He=i;else{if(i===null)throw Error(t(310));He=i,i={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Qe===null?Ie.memoizedState=Qe=i:Qe=Qe.next=i}return Qe}function vr(i,r){return typeof r=="function"?r(i):r}function Eu(i){var r=Lt(),l=r.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var c=He,f=c.baseQueue,m=l.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}c.baseQueue=f=m,l.pending=null}if(f!==null){m=f.next,c=c.baseState;var E=b=null,T=null,M=m;do{var F=M.lane;if((ps&F)===F)T!==null&&(T=T.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),c=M.hasEagerState?M.eagerState:i(c,M.action);else{var V={lane:F,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};T===null?(E=T=V,b=c):T=T.next=V,Ie.lanes|=F,ms|=F}M=M.next}while(M!==null&&M!==m);T===null?b=c:T.next=E,Dt(c,r.memoizedState)||(gt=!0),r.memoizedState=c,r.baseState=b,r.baseQueue=T,l.lastRenderedState=c}if(i=l.interleaved,i!==null){f=i;do m=f.lane,Ie.lanes|=m,ms|=m,f=f.next;while(f!==i)}else f===null&&(l.lanes=0);return[r.memoizedState,l.dispatch]}function Cu(i){var r=Lt(),l=r.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var c=l.dispatch,f=l.pending,m=r.memoizedState;if(f!==null){l.pending=null;var b=f=f.next;do m=i(m,b.action),b=b.next;while(b!==f);Dt(m,r.memoizedState)||(gt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),l.lastRenderedState=m}return[m,c]}function mf(){}function vf(i,r){var l=Ie,c=Lt(),f=r(),m=!Dt(c.memoizedState,f);if(m&&(c.memoizedState=f,gt=!0),c=c.queue,Tu(wf.bind(null,l,c,i),[i]),c.getSnapshot!==r||m||Qe!==null&&Qe.memoizedState.tag&1){if(l.flags|=2048,gr(9,yf.bind(null,l,c,f,r),void 0,null),Xe===null)throw Error(t(349));(ps&30)!==0||gf(l,r,f)}return f}function gf(i,r,l){i.flags|=16384,i={getSnapshot:r,value:l},r=Ie.updateQueue,r===null?(r={lastEffect:null,stores:null},Ie.updateQueue=r,r.stores=[i]):(l=r.stores,l===null?r.stores=[i]:l.push(i))}function yf(i,r,l,c){r.value=l,r.getSnapshot=c,bf(r)&&xf(i)}function wf(i,r,l){return l(function(){bf(r)&&xf(i)})}function bf(i){var r=i.getSnapshot;i=i.value;try{var l=r();return!Dt(i,l)}catch{return!0}}function xf(i){var r=mn(i,1);r!==null&&Wt(r,i,1,-1)}function _f(i){var r=sn();return typeof i=="function"&&(i=i()),r.memoizedState=r.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vr,lastRenderedState:i},r.queue=i,i=i.dispatch=gy.bind(null,Ie,i),[r.memoizedState,i]}function gr(i,r,l,c){return i={tag:i,create:r,destroy:l,deps:c,next:null},r=Ie.updateQueue,r===null?(r={lastEffect:null,stores:null},Ie.updateQueue=r,r.lastEffect=i.next=i):(l=r.lastEffect,l===null?r.lastEffect=i.next=i:(c=l.next,l.next=i,i.next=c,r.lastEffect=i)),i}function Sf(){return Lt().memoizedState}function Qo(i,r,l,c){var f=sn();Ie.flags|=i,f.memoizedState=gr(1|r,l,void 0,c===void 0?null:c)}function Xo(i,r,l,c){var f=Lt();c=c===void 0?null:c;var m=void 0;if(He!==null){var b=He.memoizedState;if(m=b.destroy,c!==null&&_u(c,b.deps)){f.memoizedState=gr(r,l,m,c);return}}Ie.flags|=i,f.memoizedState=gr(1|r,l,m,c)}function kf(i,r){return Qo(8390656,8,i,r)}function Tu(i,r){return Xo(2048,8,i,r)}function Ef(i,r){return Xo(4,2,i,r)}function Cf(i,r){return Xo(4,4,i,r)}function Tf(i,r){if(typeof r=="function")return i=i(),r(i),function(){r(null)};if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function jf(i,r,l){return l=l!=null?l.concat([i]):null,Xo(4,4,Tf.bind(null,r,i),l)}function ju(){}function Nf(i,r){var l=Lt();r=r===void 0?null:r;var c=l.memoizedState;return c!==null&&r!==null&&_u(r,c[1])?c[0]:(l.memoizedState=[i,r],i)}function Rf(i,r){var l=Lt();r=r===void 0?null:r;var c=l.memoizedState;return c!==null&&r!==null&&_u(r,c[1])?c[0]:(i=i(),l.memoizedState=[i,r],i)}function Pf(i,r,l){return(ps&21)===0?(i.baseState&&(i.baseState=!1,gt=!0),i.memoizedState=l):(Dt(l,r)||(l=od(),Ie.lanes|=l,ms|=l,i.baseState=!0),r)}function my(i,r){var l=ke;ke=l!==0&&4>l?l:4,i(!0);var c=xu.transition;xu.transition={};try{i(!1),r()}finally{ke=l,xu.transition=c}}function Of(){return Lt().memoizedState}function vy(i,r,l){var c=Bn(i);if(l={lane:c,action:l,hasEagerState:!1,eagerState:null,next:null},Lf(i))Af(r,l);else if(l=cf(i,r,l,c),l!==null){var f=dt();Wt(l,i,c,f),Mf(l,r,c)}}function gy(i,r,l){var c=Bn(i),f={lane:c,action:l,hasEagerState:!1,eagerState:null,next:null};if(Lf(i))Af(r,f);else{var m=i.alternate;if(i.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var b=r.lastRenderedState,E=m(b,l);if(f.hasEagerState=!0,f.eagerState=E,Dt(E,b)){var T=r.interleaved;T===null?(f.next=f,mu(r)):(f.next=T.next,T.next=f),r.interleaved=f;return}}catch{}finally{}l=cf(i,r,f,c),l!==null&&(f=dt(),Wt(l,i,c,f),Mf(l,r,c))}}function Lf(i){var r=i.alternate;return i===Ie||r!==null&&r===Ie}function Af(i,r){pr=Jo=!0;var l=i.pending;l===null?r.next=r:(r.next=l.next,l.next=r),i.pending=r}function Mf(i,r,l){if((l&4194240)!==0){var c=r.lanes;c&=i.pendingLanes,l|=c,r.lanes=l,Rl(i,l)}}var Yo={readContext:Ot,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},yy={readContext:Ot,useCallback:function(i,r){return sn().memoizedState=[i,r===void 0?null:r],i},useContext:Ot,useEffect:kf,useImperativeHandle:function(i,r,l){return l=l!=null?l.concat([i]):null,Qo(4194308,4,Tf.bind(null,r,i),l)},useLayoutEffect:function(i,r){return Qo(4194308,4,i,r)},useInsertionEffect:function(i,r){return Qo(4,2,i,r)},useMemo:function(i,r){var l=sn();return r=r===void 0?null:r,i=i(),l.memoizedState=[i,r],i},useReducer:function(i,r,l){var c=sn();return r=l!==void 0?l(r):r,c.memoizedState=c.baseState=r,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:r},c.queue=i,i=i.dispatch=vy.bind(null,Ie,i),[c.memoizedState,i]},useRef:function(i){var r=sn();return i={current:i},r.memoizedState=i},useState:_f,useDebugValue:ju,useDeferredValue:function(i){return sn().memoizedState=i},useTransition:function(){var i=_f(!1),r=i[0];return i=my.bind(null,i[1]),sn().memoizedState=i,[r,i]},useMutableSource:function(){},useSyncExternalStore:function(i,r,l){var c=Ie,f=sn();if(Oe){if(l===void 0)throw Error(t(407));l=l()}else{if(l=r(),Xe===null)throw Error(t(349));(ps&30)!==0||gf(c,r,l)}f.memoizedState=l;var m={value:l,getSnapshot:r};return f.queue=m,kf(wf.bind(null,c,m,i),[i]),c.flags|=2048,gr(9,yf.bind(null,c,m,l,r),void 0,null),l},useId:function(){var i=sn(),r=Xe.identifierPrefix;if(Oe){var l=pn,c=fn;l=(c&~(1<<32-zt(c)-1)).toString(32)+l,r=":"+r+"R"+l,l=mr++,0<l&&(r+="H"+l.toString(32)),r+=":"}else l=py++,r=":"+r+"r"+l.toString(32)+":";return i.memoizedState=r},unstable_isNewReconciler:!1},wy={readContext:Ot,useCallback:Nf,useContext:Ot,useEffect:Tu,useImperativeHandle:jf,useInsertionEffect:Ef,useLayoutEffect:Cf,useMemo:Rf,useReducer:Eu,useRef:Sf,useState:function(){return Eu(vr)},useDebugValue:ju,useDeferredValue:function(i){var r=Lt();return Pf(r,He.memoizedState,i)},useTransition:function(){var i=Eu(vr)[0],r=Lt().memoizedState;return[i,r]},useMutableSource:mf,useSyncExternalStore:vf,useId:Of,unstable_isNewReconciler:!1},by={readContext:Ot,useCallback:Nf,useContext:Ot,useEffect:Tu,useImperativeHandle:jf,useInsertionEffect:Ef,useLayoutEffect:Cf,useMemo:Rf,useReducer:Cu,useRef:Sf,useState:function(){return Cu(vr)},useDebugValue:ju,useDeferredValue:function(i){var r=Lt();return He===null?r.memoizedState=i:Pf(r,He.memoizedState,i)},useTransition:function(){var i=Cu(vr)[0],r=Lt().memoizedState;return[i,r]},useMutableSource:mf,useSyncExternalStore:vf,useId:Of,unstable_isNewReconciler:!1};function Ft(i,r){if(i&&i.defaultProps){r=H({},r),i=i.defaultProps;for(var l in i)r[l]===void 0&&(r[l]=i[l]);return r}return r}function Nu(i,r,l,c){r=i.memoizedState,l=l(c,r),l=l==null?r:H({},r,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Zo={isMounted:function(i){return(i=i._reactInternals)?as(i)===i:!1},enqueueSetState:function(i,r,l){i=i._reactInternals;var c=dt(),f=Bn(i),m=vn(c,f);m.payload=r,l!=null&&(m.callback=l),r=zn(i,m,f),r!==null&&(Wt(r,i,f,c),Ko(r,i,f))},enqueueReplaceState:function(i,r,l){i=i._reactInternals;var c=dt(),f=Bn(i),m=vn(c,f);m.tag=1,m.payload=r,l!=null&&(m.callback=l),r=zn(i,m,f),r!==null&&(Wt(r,i,f,c),Ko(r,i,f))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var l=dt(),c=Bn(i),f=vn(l,c);f.tag=2,r!=null&&(f.callback=r),r=zn(i,f,c),r!==null&&(Wt(r,i,c,l),Ko(r,i,c))}};function If(i,r,l,c,f,m,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,m,b):r.prototype&&r.prototype.isPureReactComponent?!sr(l,c)||!sr(f,m):!0}function $f(i,r,l){var c=!1,f=Mn,m=r.contextType;return typeof m=="object"&&m!==null?m=Ot(m):(f=vt(r)?us:rt.current,c=r.contextTypes,m=(c=c!=null)?Xs(i,f):Mn),r=new r(l,m),i.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Zo,i.stateNode=r,r._reactInternals=i,c&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=f,i.__reactInternalMemoizedMaskedChildContext=m),r}function zf(i,r,l,c){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==i&&Zo.enqueueReplaceState(r,r.state,null)}function Ru(i,r,l,c){var f=i.stateNode;f.props=l,f.state=i.memoizedState,f.refs={},vu(i);var m=r.contextType;typeof m=="object"&&m!==null?f.context=Ot(m):(m=vt(r)?us:rt.current,f.context=Xs(i,m)),f.state=i.memoizedState,m=r.getDerivedStateFromProps,typeof m=="function"&&(Nu(i,r,m,l),f.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(r=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),r!==f.state&&Zo.enqueueReplaceState(f,f.state,null),qo(i,l,f,c),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308)}function ri(i,r){try{var l="",c=r;do l+=ve(c),c=c.return;while(c);var f=l}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:i,source:r,stack:f,digest:null}}function Pu(i,r,l){return{value:i,source:null,stack:l??null,digest:r??null}}function Ou(i,r){try{console.error(r.value)}catch(l){setTimeout(function(){throw l})}}var xy=typeof WeakMap=="function"?WeakMap:Map;function Df(i,r,l){l=vn(-1,l),l.tag=3,l.payload={element:null};var c=r.value;return l.callback=function(){oa||(oa=!0,Hu=c),Ou(i,r)},l}function Uf(i,r,l){l=vn(-1,l),l.tag=3;var c=i.type.getDerivedStateFromError;if(typeof c=="function"){var f=r.value;l.payload=function(){return c(f)},l.callback=function(){Ou(i,r)}}var m=i.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(l.callback=function(){Ou(i,r),typeof c!="function"&&(Un===null?Un=new Set([this]):Un.add(this));var b=r.stack;this.componentDidCatch(r.value,{componentStack:b!==null?b:""})}),l}function Ff(i,r,l){var c=i.pingCache;if(c===null){c=i.pingCache=new xy;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(l)||(f.add(l),i=My.bind(null,i,r,l),r.then(i,i))}function Bf(i){do{var r;if((r=i.tag===13)&&(r=i.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return i;i=i.return}while(i!==null);return null}function Vf(i,r,l,c,f){return(i.mode&1)===0?(i===r?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(r=vn(-1,1),r.tag=2,zn(l,r,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=f,i)}var _y=j.ReactCurrentOwner,gt=!1;function ht(i,r,l,c){r.child=i===null?uf(r,null,l,c):ti(r,i.child,l,c)}function Wf(i,r,l,c,f){l=l.render;var m=r.ref;return si(r,f),c=Su(i,r,l,c,m,f),l=ku(),i!==null&&!gt?(r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~f,gn(i,r,f)):(Oe&&l&&ou(r),r.flags|=1,ht(i,r,c,f),r.child)}function Kf(i,r,l,c,f){if(i===null){var m=l.type;return typeof m=="function"&&!ec(m)&&m.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(r.tag=15,r.type=m,qf(i,r,m,c,f)):(i=da(l.type,null,c,r,r.mode,f),i.ref=r.ref,i.return=r,r.child=i)}if(m=i.child,(i.lanes&f)===0){var b=m.memoizedProps;if(l=l.compare,l=l!==null?l:sr,l(b,c)&&i.ref===r.ref)return gn(i,r,f)}return r.flags|=1,i=Wn(m,c),i.ref=r.ref,i.return=r,r.child=i}function qf(i,r,l,c,f){if(i!==null){var m=i.memoizedProps;if(sr(m,c)&&i.ref===r.ref)if(gt=!1,r.pendingProps=c=m,(i.lanes&f)!==0)(i.flags&131072)!==0&&(gt=!0);else return r.lanes=i.lanes,gn(i,r,f)}return Lu(i,r,l,c,f)}function Hf(i,r,l){var c=r.pendingProps,f=c.children,m=i!==null?i.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(ai,Ct),Ct|=l;else{if((l&1073741824)===0)return i=m!==null?m.baseLanes|l:l,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:i,cachePool:null,transitions:null},r.updateQueue=null,Ce(ai,Ct),Ct|=i,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:l,Ce(ai,Ct),Ct|=c}else m!==null?(c=m.baseLanes|l,r.memoizedState=null):c=l,Ce(ai,Ct),Ct|=c;return ht(i,r,f,l),r.child}function Gf(i,r){var l=r.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(r.flags|=512,r.flags|=2097152)}function Lu(i,r,l,c,f){var m=vt(l)?us:rt.current;return m=Xs(r,m),si(r,f),l=Su(i,r,l,c,m,f),c=ku(),i!==null&&!gt?(r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~f,gn(i,r,f)):(Oe&&c&&ou(r),r.flags|=1,ht(i,r,l,f),r.child)}function Jf(i,r,l,c,f){if(vt(l)){var m=!0;$o(r)}else m=!1;if(si(r,f),r.stateNode===null)ta(i,r),$f(r,l,c),Ru(r,l,c,f),c=!0;else if(i===null){var b=r.stateNode,E=r.memoizedProps;b.props=E;var T=b.context,M=l.contextType;typeof M=="object"&&M!==null?M=Ot(M):(M=vt(l)?us:rt.current,M=Xs(r,M));var F=l.getDerivedStateFromProps,V=typeof F=="function"||typeof b.getSnapshotBeforeUpdate=="function";V||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==c||T!==M)&&zf(r,b,c,M),$n=!1;var D=r.memoizedState;b.state=D,qo(r,c,b,f),T=r.memoizedState,E!==c||D!==T||mt.current||$n?(typeof F=="function"&&(Nu(r,l,F,c),T=r.memoizedState),(E=$n||If(r,l,E,c,D,T,M))?(V||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(r.flags|=4194308)):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=T),b.props=c,b.state=T,b.context=M,c=E):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{b=r.stateNode,hf(i,r),E=r.memoizedProps,M=r.type===r.elementType?E:Ft(r.type,E),b.props=M,V=r.pendingProps,D=b.context,T=l.contextType,typeof T=="object"&&T!==null?T=Ot(T):(T=vt(l)?us:rt.current,T=Xs(r,T));var J=l.getDerivedStateFromProps;(F=typeof J=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==V||D!==T)&&zf(r,b,c,T),$n=!1,D=r.memoizedState,b.state=D,qo(r,c,b,f);var Y=r.memoizedState;E!==V||D!==Y||mt.current||$n?(typeof J=="function"&&(Nu(r,l,J,c),Y=r.memoizedState),(M=$n||If(r,l,M,c,D,Y,T)||!1)?(F||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(c,Y,T),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(c,Y,T)),typeof b.componentDidUpdate=="function"&&(r.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof b.componentDidUpdate!="function"||E===i.memoizedProps&&D===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&D===i.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Y),b.props=c,b.state=Y,b.context=T,c=M):(typeof b.componentDidUpdate!="function"||E===i.memoizedProps&&D===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&D===i.memoizedState||(r.flags|=1024),c=!1)}return Au(i,r,l,c,m,f)}function Au(i,r,l,c,f,m){Gf(i,r);var b=(r.flags&128)!==0;if(!c&&!b)return f&&Zd(r,l,!1),gn(i,r,m);c=r.stateNode,_y.current=r;var E=b&&typeof l.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,i!==null&&b?(r.child=ti(r,i.child,null,m),r.child=ti(r,null,E,m)):ht(i,r,E,m),r.memoizedState=c.state,f&&Zd(r,l,!0),r.child}function Qf(i){var r=i.stateNode;r.pendingContext?Xd(i,r.pendingContext,r.pendingContext!==r.context):r.context&&Xd(i,r.context,!1),gu(i,r.containerInfo)}function Xf(i,r,l,c,f){return ei(),cu(f),r.flags|=256,ht(i,r,l,c),r.child}var Mu={dehydrated:null,treeContext:null,retryLane:0};function Iu(i){return{baseLanes:i,cachePool:null,transitions:null}}function Yf(i,r,l){var c=r.pendingProps,f=Me.current,m=!1,b=(r.flags&128)!==0,E;if((E=b)||(E=i!==null&&i.memoizedState===null?!1:(f&2)!==0),E?(m=!0,r.flags&=-129):(i===null||i.memoizedState!==null)&&(f|=1),Ce(Me,f&1),i===null)return uu(r),i=r.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((r.mode&1)===0?r.lanes=1:i.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(b=c.children,i=c.fallback,m?(c=r.mode,m=r.child,b={mode:"hidden",children:b},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=b):m=fa(b,c,0,null),i=ws(i,c,l,null),m.return=r,i.return=r,m.sibling=i,r.child=m,r.child.memoizedState=Iu(l),r.memoizedState=Mu,i):$u(r,b));if(f=i.memoizedState,f!==null&&(E=f.dehydrated,E!==null))return Sy(i,r,b,c,E,f,l);if(m){m=c.fallback,b=r.mode,f=i.child,E=f.sibling;var T={mode:"hidden",children:c.children};return(b&1)===0&&r.child!==f?(c=r.child,c.childLanes=0,c.pendingProps=T,r.deletions=null):(c=Wn(f,T),c.subtreeFlags=f.subtreeFlags&14680064),E!==null?m=Wn(E,m):(m=ws(m,b,l,null),m.flags|=2),m.return=r,c.return=r,c.sibling=m,r.child=c,c=m,m=r.child,b=i.child.memoizedState,b=b===null?Iu(l):{baseLanes:b.baseLanes|l,cachePool:null,transitions:b.transitions},m.memoizedState=b,m.childLanes=i.childLanes&~l,r.memoizedState=Mu,c}return m=i.child,i=m.sibling,c=Wn(m,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=l),c.return=r,c.sibling=null,i!==null&&(l=r.deletions,l===null?(r.deletions=[i],r.flags|=16):l.push(i)),r.child=c,r.memoizedState=null,c}function $u(i,r){return r=fa({mode:"visible",children:r},i.mode,0,null),r.return=i,i.child=r}function ea(i,r,l,c){return c!==null&&cu(c),ti(r,i.child,null,l),i=$u(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Sy(i,r,l,c,f,m,b){if(l)return r.flags&256?(r.flags&=-257,c=Pu(Error(t(422))),ea(i,r,b,c)):r.memoizedState!==null?(r.child=i.child,r.flags|=128,null):(m=c.fallback,f=r.mode,c=fa({mode:"visible",children:c.children},f,0,null),m=ws(m,f,b,null),m.flags|=2,c.return=r,m.return=r,c.sibling=m,r.child=c,(r.mode&1)!==0&&ti(r,i.child,null,b),r.child.memoizedState=Iu(b),r.memoizedState=Mu,m);if((r.mode&1)===0)return ea(i,r,b,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var E=c.dgst;return c=E,m=Error(t(419)),c=Pu(m,c,void 0),ea(i,r,b,c)}if(E=(b&i.childLanes)!==0,gt||E){if(c=Xe,c!==null){switch(b&-b){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|b))!==0?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,mn(i,f),Wt(c,i,f,-1))}return Zu(),c=Pu(Error(t(421))),ea(i,r,b,c)}return f.data==="$?"?(r.flags|=128,r.child=i.child,r=Iy.bind(null,i),f._reactRetry=r,null):(i=m.treeContext,Et=Ln(f.nextSibling),kt=r,Oe=!0,Ut=null,i!==null&&(Rt[Pt++]=fn,Rt[Pt++]=pn,Rt[Pt++]=cs,fn=i.id,pn=i.overflow,cs=r),r=$u(r,c.children),r.flags|=4096,r)}function Zf(i,r,l){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r),pu(i.return,r,l)}function zu(i,r,l,c,f){var m=i.memoizedState;m===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:f}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=l,m.tailMode=f)}function ep(i,r,l){var c=r.pendingProps,f=c.revealOrder,m=c.tail;if(ht(i,r,c.children,l),c=Me.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Zf(i,l,r);else if(i.tag===19)Zf(i,l,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}if(Ce(Me,c),(r.mode&1)===0)r.memoizedState=null;else switch(f){case"forwards":for(l=r.child,f=null;l!==null;)i=l.alternate,i!==null&&Ho(i)===null&&(f=l),l=l.sibling;l=f,l===null?(f=r.child,r.child=null):(f=l.sibling,l.sibling=null),zu(r,!1,f,l,m);break;case"backwards":for(l=null,f=r.child,r.child=null;f!==null;){if(i=f.alternate,i!==null&&Ho(i)===null){r.child=f;break}i=f.sibling,f.sibling=l,l=f,f=i}zu(r,!0,l,null,m);break;case"together":zu(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ta(i,r){(r.mode&1)===0&&i!==null&&(i.alternate=null,r.alternate=null,r.flags|=2)}function gn(i,r,l){if(i!==null&&(r.dependencies=i.dependencies),ms|=r.lanes,(l&r.childLanes)===0)return null;if(i!==null&&r.child!==i.child)throw Error(t(153));if(r.child!==null){for(i=r.child,l=Wn(i,i.pendingProps),r.child=l,l.return=r;i.sibling!==null;)i=i.sibling,l=l.sibling=Wn(i,i.pendingProps),l.return=r;l.sibling=null}return r.child}function ky(i,r,l){switch(r.tag){case 3:Qf(r),ei();break;case 5:pf(r);break;case 1:vt(r.type)&&$o(r);break;case 4:gu(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,f=r.memoizedProps.value;Ce(Vo,c._currentValue),c._currentValue=f;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Ce(Me,Me.current&1),r.flags|=128,null):(l&r.child.childLanes)!==0?Yf(i,r,l):(Ce(Me,Me.current&1),i=gn(i,r,l),i!==null?i.sibling:null);Ce(Me,Me.current&1);break;case 19:if(c=(l&r.childLanes)!==0,(i.flags&128)!==0){if(c)return ep(i,r,l);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ce(Me,Me.current),c)break;return null;case 22:case 23:return r.lanes=0,Hf(i,r,l)}return gn(i,r,l)}var tp,Du,np,sp;tp=function(i,r){for(var l=r.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Du=function(){},np=function(i,r,l,c){var f=i.memoizedProps;if(f!==c){i=r.stateNode,fs(nn.current);var m=null;switch(l){case"input":f=pl(i,f),c=pl(i,c),m=[];break;case"select":f=H({},f,{value:void 0}),c=H({},c,{value:void 0}),m=[];break;case"textarea":f=gl(i,f),c=gl(i,c),m=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(i.onclick=Ao)}wl(l,c);var b;l=null;for(M in f)if(!c.hasOwnProperty(M)&&f.hasOwnProperty(M)&&f[M]!=null)if(M==="style"){var E=f[M];for(b in E)E.hasOwnProperty(b)&&(l||(l={}),l[b]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(o.hasOwnProperty(M)?m||(m=[]):(m=m||[]).push(M,null));for(M in c){var T=c[M];if(E=f!=null?f[M]:void 0,c.hasOwnProperty(M)&&T!==E&&(T!=null||E!=null))if(M==="style")if(E){for(b in E)!E.hasOwnProperty(b)||T&&T.hasOwnProperty(b)||(l||(l={}),l[b]="");for(b in T)T.hasOwnProperty(b)&&E[b]!==T[b]&&(l||(l={}),l[b]=T[b])}else l||(m||(m=[]),m.push(M,l)),l=T;else M==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,E=E?E.__html:void 0,T!=null&&E!==T&&(m=m||[]).push(M,T)):M==="children"?typeof T!="string"&&typeof T!="number"||(m=m||[]).push(M,""+T):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(o.hasOwnProperty(M)?(T!=null&&M==="onScroll"&&je("scroll",i),m||E===T||(m=[])):(m=m||[]).push(M,T))}l&&(m=m||[]).push("style",l);var M=m;(r.updateQueue=M)&&(r.flags|=4)}},sp=function(i,r,l,c){l!==c&&(r.flags|=4)};function yr(i,r){if(!Oe)switch(i.tailMode){case"hidden":r=i.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function at(i){var r=i.alternate!==null&&i.alternate.child===i.child,l=0,c=0;if(r)for(var f=i.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=c,i.childLanes=l,r}function Ey(i,r,l){var c=r.pendingProps;switch(au(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(r),null;case 1:return vt(r.type)&&Io(),at(r),null;case 3:return c=r.stateNode,ii(),Ne(mt),Ne(rt),bu(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(Fo(r)?r.flags|=4:i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ut!==null&&(Qu(Ut),Ut=null))),Du(i,r),at(r),null;case 5:yu(r);var f=fs(fr.current);if(l=r.type,i!==null&&r.stateNode!=null)np(i,r,l,c,f),i.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return at(r),null}if(i=fs(nn.current),Fo(r)){c=r.stateNode,l=r.type;var m=r.memoizedProps;switch(c[tn]=r,c[lr]=m,i=(r.mode&1)!==0,l){case"dialog":je("cancel",c),je("close",c);break;case"iframe":case"object":case"embed":je("load",c);break;case"video":case"audio":for(f=0;f<rr.length;f++)je(rr[f],c);break;case"source":je("error",c);break;case"img":case"image":case"link":je("error",c),je("load",c);break;case"details":je("toggle",c);break;case"input":Ih(c,m),je("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},je("invalid",c);break;case"textarea":Dh(c,m),je("invalid",c)}wl(l,m),f=null;for(var b in m)if(m.hasOwnProperty(b)){var E=m[b];b==="children"?typeof E=="string"?c.textContent!==E&&(m.suppressHydrationWarning!==!0&&Lo(c.textContent,E,i),f=["children",E]):typeof E=="number"&&c.textContent!==""+E&&(m.suppressHydrationWarning!==!0&&Lo(c.textContent,E,i),f=["children",""+E]):o.hasOwnProperty(b)&&E!=null&&b==="onScroll"&&je("scroll",c)}switch(l){case"input":uo(c),zh(c,m,!0);break;case"textarea":uo(c),Fh(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=Ao)}c=f,r.updateQueue=c,c!==null&&(r.flags|=4)}else{b=f.nodeType===9?f:f.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Bh(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=b.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof c.is=="string"?i=b.createElement(l,{is:c.is}):(i=b.createElement(l),l==="select"&&(b=i,c.multiple?b.multiple=!0:c.size&&(b.size=c.size))):i=b.createElementNS(i,l),i[tn]=r,i[lr]=c,tp(i,r,!1,!1),r.stateNode=i;e:{switch(b=bl(l,c),l){case"dialog":je("cancel",i),je("close",i),f=c;break;case"iframe":case"object":case"embed":je("load",i),f=c;break;case"video":case"audio":for(f=0;f<rr.length;f++)je(rr[f],i);f=c;break;case"source":je("error",i),f=c;break;case"img":case"image":case"link":je("error",i),je("load",i),f=c;break;case"details":je("toggle",i),f=c;break;case"input":Ih(i,c),f=pl(i,c),je("invalid",i);break;case"option":f=c;break;case"select":i._wrapperState={wasMultiple:!!c.multiple},f=H({},c,{value:void 0}),je("invalid",i);break;case"textarea":Dh(i,c),f=gl(i,c),je("invalid",i);break;default:f=c}wl(l,f),E=f;for(m in E)if(E.hasOwnProperty(m)){var T=E[m];m==="style"?Kh(i,T):m==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,T!=null&&Vh(i,T)):m==="children"?typeof T=="string"?(l!=="textarea"||T!=="")&&Ui(i,T):typeof T=="number"&&Ui(i,""+T):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?T!=null&&m==="onScroll"&&je("scroll",i):T!=null&&P(i,m,T,b))}switch(l){case"input":uo(i),zh(i,c,!1);break;case"textarea":uo(i),Fh(i);break;case"option":c.value!=null&&i.setAttribute("value",""+Se(c.value));break;case"select":i.multiple=!!c.multiple,m=c.value,m!=null?Ds(i,!!c.multiple,m,!1):c.defaultValue!=null&&Ds(i,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(i.onclick=Ao)}switch(l){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return at(r),null;case 6:if(i&&r.stateNode!=null)sp(i,r,i.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(l=fs(fr.current),fs(nn.current),Fo(r)){if(c=r.stateNode,l=r.memoizedProps,c[tn]=r,(m=c.nodeValue!==l)&&(i=kt,i!==null))switch(i.tag){case 3:Lo(c.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Lo(c.nodeValue,l,(i.mode&1)!==0)}m&&(r.flags|=4)}else c=(l.nodeType===9?l:l.ownerDocument).createTextNode(c),c[tn]=r,r.stateNode=c}return at(r),null;case 13:if(Ne(Me),c=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Oe&&Et!==null&&(r.mode&1)!==0&&(r.flags&128)===0)of(),ei(),r.flags|=98560,m=!1;else if(m=Fo(r),c!==null&&c.dehydrated!==null){if(i===null){if(!m)throw Error(t(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[tn]=r}else ei(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;at(r),m=!1}else Ut!==null&&(Qu(Ut),Ut=null),m=!0;if(!m)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=l,r):(c=c!==null,c!==(i!==null&&i.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(i===null||(Me.current&1)!==0?Ge===0&&(Ge=3):Zu())),r.updateQueue!==null&&(r.flags|=4),at(r),null);case 4:return ii(),Du(i,r),i===null&&or(r.stateNode.containerInfo),at(r),null;case 10:return fu(r.type._context),at(r),null;case 17:return vt(r.type)&&Io(),at(r),null;case 19:if(Ne(Me),m=r.memoizedState,m===null)return at(r),null;if(c=(r.flags&128)!==0,b=m.rendering,b===null)if(c)yr(m,!1);else{if(Ge!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(b=Ho(i),b!==null){for(r.flags|=128,yr(m,!1),c=b.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=l,l=r.child;l!==null;)m=l,i=c,m.flags&=14680066,b=m.alternate,b===null?(m.childLanes=0,m.lanes=i,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=b.childLanes,m.lanes=b.lanes,m.child=b.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=b.memoizedProps,m.memoizedState=b.memoizedState,m.updateQueue=b.updateQueue,m.type=b.type,i=b.dependencies,m.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return Ce(Me,Me.current&1|2),r.child}i=i.sibling}m.tail!==null&&Be()>li&&(r.flags|=128,c=!0,yr(m,!1),r.lanes=4194304)}else{if(!c)if(i=Ho(b),i!==null){if(r.flags|=128,c=!0,l=i.updateQueue,l!==null&&(r.updateQueue=l,r.flags|=4),yr(m,!0),m.tail===null&&m.tailMode==="hidden"&&!b.alternate&&!Oe)return at(r),null}else 2*Be()-m.renderingStartTime>li&&l!==1073741824&&(r.flags|=128,c=!0,yr(m,!1),r.lanes=4194304);m.isBackwards?(b.sibling=r.child,r.child=b):(l=m.last,l!==null?l.sibling=b:r.child=b,m.last=b)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=Be(),r.sibling=null,l=Me.current,Ce(Me,c?l&1|2:l&1),r):(at(r),null);case 22:case 23:return Yu(),c=r.memoizedState!==null,i!==null&&i.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(Ct&1073741824)!==0&&(at(r),r.subtreeFlags&6&&(r.flags|=8192)):at(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function Cy(i,r){switch(au(r),r.tag){case 1:return vt(r.type)&&Io(),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return ii(),Ne(mt),Ne(rt),bu(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 5:return yu(r),null;case 13:if(Ne(Me),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(t(340));ei()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return Ne(Me),null;case 4:return ii(),null;case 10:return fu(r.type._context),null;case 22:case 23:return Yu(),null;case 24:return null;default:return null}}var na=!1,lt=!1,Ty=typeof WeakSet=="function"?WeakSet:Set,X=null;function oi(i,r){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(c){ze(i,r,c)}else l.current=null}function Uu(i,r,l){try{l()}catch(c){ze(i,r,c)}}var ip=!1;function jy(i,r){if(Yl=_o,i=Md(),Wl(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var b=0,E=-1,T=-1,M=0,F=0,V=i,D=null;t:for(;;){for(var J;V!==l||f!==0&&V.nodeType!==3||(E=b+f),V!==m||c!==0&&V.nodeType!==3||(T=b+c),V.nodeType===3&&(b+=V.nodeValue.length),(J=V.firstChild)!==null;)D=V,V=J;for(;;){if(V===i)break t;if(D===l&&++M===f&&(E=b),D===m&&++F===c&&(T=b),(J=V.nextSibling)!==null)break;V=D,D=V.parentNode}V=J}l=E===-1||T===-1?null:{start:E,end:T}}else l=null}l=l||{start:0,end:0}}else l=null;for(Zl={focusedElem:i,selectionRange:l},_o=!1,X=r;X!==null;)if(r=X,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,X=i;else for(;X!==null;){r=X;try{var Y=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(Y!==null){var Z=Y.memoizedProps,Ve=Y.memoizedState,L=r.stateNode,N=L.getSnapshotBeforeUpdate(r.elementType===r.type?Z:Ft(r.type,Z),Ve);L.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var A=r.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(K){ze(r,r.return,K)}if(i=r.sibling,i!==null){i.return=r.return,X=i;break}X=r.return}return Y=ip,ip=!1,Y}function wr(i,r,l){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&i)===i){var m=f.destroy;f.destroy=void 0,m!==void 0&&Uu(r,l,m)}f=f.next}while(f!==c)}}function sa(i,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&i)===i){var c=l.create;l.destroy=c()}l=l.next}while(l!==r)}}function Fu(i){var r=i.ref;if(r!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof r=="function"?r(i):r.current=i}}function rp(i){var r=i.alternate;r!==null&&(i.alternate=null,rp(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&(delete r[tn],delete r[lr],delete r[su],delete r[cy],delete r[hy])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function op(i){return i.tag===5||i.tag===3||i.tag===4}function ap(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||op(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Bu(i,r,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?l.nodeType===8?l.parentNode.insertBefore(i,r):l.insertBefore(i,r):(l.nodeType===8?(r=l.parentNode,r.insertBefore(i,l)):(r=l,r.appendChild(i)),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Ao));else if(c!==4&&(i=i.child,i!==null))for(Bu(i,r,l),i=i.sibling;i!==null;)Bu(i,r,l),i=i.sibling}function Vu(i,r,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?l.insertBefore(i,r):l.appendChild(i);else if(c!==4&&(i=i.child,i!==null))for(Vu(i,r,l),i=i.sibling;i!==null;)Vu(i,r,l),i=i.sibling}var et=null,Bt=!1;function Dn(i,r,l){for(l=l.child;l!==null;)lp(i,r,l),l=l.sibling}function lp(i,r,l){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(vo,l)}catch{}switch(l.tag){case 5:lt||oi(l,r);case 6:var c=et,f=Bt;et=null,Dn(i,r,l),et=c,Bt=f,et!==null&&(Bt?(i=et,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):et.removeChild(l.stateNode));break;case 18:et!==null&&(Bt?(i=et,l=l.stateNode,i.nodeType===8?nu(i.parentNode,l):i.nodeType===1&&nu(i,l),Xi(i)):nu(et,l.stateNode));break;case 4:c=et,f=Bt,et=l.stateNode.containerInfo,Bt=!0,Dn(i,r,l),et=c,Bt=f;break;case 0:case 11:case 14:case 15:if(!lt&&(c=l.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var m=f,b=m.destroy;m=m.tag,b!==void 0&&((m&2)!==0||(m&4)!==0)&&Uu(l,r,b),f=f.next}while(f!==c)}Dn(i,r,l);break;case 1:if(!lt&&(oi(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=l.memoizedProps,c.state=l.memoizedState,c.componentWillUnmount()}catch(E){ze(l,r,E)}Dn(i,r,l);break;case 21:Dn(i,r,l);break;case 22:l.mode&1?(lt=(c=lt)||l.memoizedState!==null,Dn(i,r,l),lt=c):Dn(i,r,l);break;default:Dn(i,r,l)}}function up(i){var r=i.updateQueue;if(r!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new Ty),r.forEach(function(c){var f=$y.bind(null,i,c);l.has(c)||(l.add(c),c.then(f,f))})}}function Vt(i,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var f=l[c];try{var m=i,b=r,E=b;e:for(;E!==null;){switch(E.tag){case 5:et=E.stateNode,Bt=!1;break e;case 3:et=E.stateNode.containerInfo,Bt=!0;break e;case 4:et=E.stateNode.containerInfo,Bt=!0;break e}E=E.return}if(et===null)throw Error(t(160));lp(m,b,f),et=null,Bt=!1;var T=f.alternate;T!==null&&(T.return=null),f.return=null}catch(M){ze(f,r,M)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)cp(r,i),r=r.sibling}function cp(i,r){var l=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Vt(r,i),rn(i),c&4){try{wr(3,i,i.return),sa(3,i)}catch(Z){ze(i,i.return,Z)}try{wr(5,i,i.return)}catch(Z){ze(i,i.return,Z)}}break;case 1:Vt(r,i),rn(i),c&512&&l!==null&&oi(l,l.return);break;case 5:if(Vt(r,i),rn(i),c&512&&l!==null&&oi(l,l.return),i.flags&32){var f=i.stateNode;try{Ui(f,"")}catch(Z){ze(i,i.return,Z)}}if(c&4&&(f=i.stateNode,f!=null)){var m=i.memoizedProps,b=l!==null?l.memoizedProps:m,E=i.type,T=i.updateQueue;if(i.updateQueue=null,T!==null)try{E==="input"&&m.type==="radio"&&m.name!=null&&$h(f,m),bl(E,b);var M=bl(E,m);for(b=0;b<T.length;b+=2){var F=T[b],V=T[b+1];F==="style"?Kh(f,V):F==="dangerouslySetInnerHTML"?Vh(f,V):F==="children"?Ui(f,V):P(f,F,V,M)}switch(E){case"input":ml(f,m);break;case"textarea":Uh(f,m);break;case"select":var D=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var J=m.value;J!=null?Ds(f,!!m.multiple,J,!1):D!==!!m.multiple&&(m.defaultValue!=null?Ds(f,!!m.multiple,m.defaultValue,!0):Ds(f,!!m.multiple,m.multiple?[]:"",!1))}f[lr]=m}catch(Z){ze(i,i.return,Z)}}break;case 6:if(Vt(r,i),rn(i),c&4){if(i.stateNode===null)throw Error(t(162));f=i.stateNode,m=i.memoizedProps;try{f.nodeValue=m}catch(Z){ze(i,i.return,Z)}}break;case 3:if(Vt(r,i),rn(i),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Xi(r.containerInfo)}catch(Z){ze(i,i.return,Z)}break;case 4:Vt(r,i),rn(i);break;case 13:Vt(r,i),rn(i),f=i.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(qu=Be())),c&4&&up(i);break;case 22:if(F=l!==null&&l.memoizedState!==null,i.mode&1?(lt=(M=lt)||F,Vt(r,i),lt=M):Vt(r,i),rn(i),c&8192){if(M=i.memoizedState!==null,(i.stateNode.isHidden=M)&&!F&&(i.mode&1)!==0)for(X=i,F=i.child;F!==null;){for(V=X=F;X!==null;){switch(D=X,J=D.child,D.tag){case 0:case 11:case 14:case 15:wr(4,D,D.return);break;case 1:oi(D,D.return);var Y=D.stateNode;if(typeof Y.componentWillUnmount=="function"){c=D,l=D.return;try{r=c,Y.props=r.memoizedProps,Y.state=r.memoizedState,Y.componentWillUnmount()}catch(Z){ze(c,l,Z)}}break;case 5:oi(D,D.return);break;case 22:if(D.memoizedState!==null){fp(V);continue}}J!==null?(J.return=D,X=J):fp(V)}F=F.sibling}e:for(F=null,V=i;;){if(V.tag===5){if(F===null){F=V;try{f=V.stateNode,M?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(E=V.stateNode,T=V.memoizedProps.style,b=T!=null&&T.hasOwnProperty("display")?T.display:null,E.style.display=Wh("display",b))}catch(Z){ze(i,i.return,Z)}}}else if(V.tag===6){if(F===null)try{V.stateNode.nodeValue=M?"":V.memoizedProps}catch(Z){ze(i,i.return,Z)}}else if((V.tag!==22&&V.tag!==23||V.memoizedState===null||V===i)&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===i)break e;for(;V.sibling===null;){if(V.return===null||V.return===i)break e;F===V&&(F=null),V=V.return}F===V&&(F=null),V.sibling.return=V.return,V=V.sibling}}break;case 19:Vt(r,i),rn(i),c&4&&up(i);break;case 21:break;default:Vt(r,i),rn(i)}}function rn(i){var r=i.flags;if(r&2){try{e:{for(var l=i.return;l!==null;){if(op(l)){var c=l;break e}l=l.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(Ui(f,""),c.flags&=-33);var m=ap(i);Vu(i,m,f);break;case 3:case 4:var b=c.stateNode.containerInfo,E=ap(i);Bu(i,E,b);break;default:throw Error(t(161))}}catch(T){ze(i,i.return,T)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function Ny(i,r,l){X=i,hp(i)}function hp(i,r,l){for(var c=(i.mode&1)!==0;X!==null;){var f=X,m=f.child;if(f.tag===22&&c){var b=f.memoizedState!==null||na;if(!b){var E=f.alternate,T=E!==null&&E.memoizedState!==null||lt;E=na;var M=lt;if(na=b,(lt=T)&&!M)for(X=f;X!==null;)b=X,T=b.child,b.tag===22&&b.memoizedState!==null?pp(f):T!==null?(T.return=b,X=T):pp(f);for(;m!==null;)X=m,hp(m),m=m.sibling;X=f,na=E,lt=M}dp(i)}else(f.subtreeFlags&8772)!==0&&m!==null?(m.return=f,X=m):dp(i)}}function dp(i){for(;X!==null;){var r=X;if((r.flags&8772)!==0){var l=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:lt||sa(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!lt)if(l===null)c.componentDidMount();else{var f=r.elementType===r.type?l.memoizedProps:Ft(r.type,l.memoizedProps);c.componentDidUpdate(f,l.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=r.updateQueue;m!==null&&ff(r,m,c);break;case 3:var b=r.updateQueue;if(b!==null){if(l=null,r.child!==null)switch(r.child.tag){case 5:l=r.child.stateNode;break;case 1:l=r.child.stateNode}ff(r,b,l)}break;case 5:var E=r.stateNode;if(l===null&&r.flags&4){l=E;var T=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&l.focus();break;case"img":T.src&&(l.src=T.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var M=r.alternate;if(M!==null){var F=M.memoizedState;if(F!==null){var V=F.dehydrated;V!==null&&Xi(V)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}lt||r.flags&512&&Fu(r)}catch(D){ze(r,r.return,D)}}if(r===i){X=null;break}if(l=r.sibling,l!==null){l.return=r.return,X=l;break}X=r.return}}function fp(i){for(;X!==null;){var r=X;if(r===i){X=null;break}var l=r.sibling;if(l!==null){l.return=r.return,X=l;break}X=r.return}}function pp(i){for(;X!==null;){var r=X;try{switch(r.tag){case 0:case 11:case 15:var l=r.return;try{sa(4,r)}catch(T){ze(r,l,T)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var f=r.return;try{c.componentDidMount()}catch(T){ze(r,f,T)}}var m=r.return;try{Fu(r)}catch(T){ze(r,m,T)}break;case 5:var b=r.return;try{Fu(r)}catch(T){ze(r,b,T)}}}catch(T){ze(r,r.return,T)}if(r===i){X=null;break}var E=r.sibling;if(E!==null){E.return=r.return,X=E;break}X=r.return}}var Ry=Math.ceil,ia=j.ReactCurrentDispatcher,Wu=j.ReactCurrentOwner,At=j.ReactCurrentBatchConfig,me=0,Xe=null,Ke=null,tt=0,Ct=0,ai=An(0),Ge=0,br=null,ms=0,ra=0,Ku=0,xr=null,yt=null,qu=0,li=1/0,yn=null,oa=!1,Hu=null,Un=null,aa=!1,Fn=null,la=0,_r=0,Gu=null,ua=-1,ca=0;function dt(){return(me&6)!==0?Be():ua!==-1?ua:ua=Be()}function Bn(i){return(i.mode&1)===0?1:(me&2)!==0&&tt!==0?tt&-tt:fy.transition!==null?(ca===0&&(ca=od()),ca):(i=ke,i!==0||(i=window.event,i=i===void 0?16:md(i.type)),i)}function Wt(i,r,l,c){if(50<_r)throw _r=0,Gu=null,Error(t(185));qi(i,l,c),((me&2)===0||i!==Xe)&&(i===Xe&&((me&2)===0&&(ra|=l),Ge===4&&Vn(i,tt)),wt(i,c),l===1&&me===0&&(r.mode&1)===0&&(li=Be()+500,zo&&In()))}function wt(i,r){var l=i.callbackNode;f0(i,r);var c=wo(i,i===Xe?tt:0);if(c===0)l!==null&&sd(l),i.callbackNode=null,i.callbackPriority=0;else if(r=c&-c,i.callbackPriority!==r){if(l!=null&&sd(l),r===1)i.tag===0?dy(vp.bind(null,i)):ef(vp.bind(null,i)),ly(function(){(me&6)===0&&In()}),l=null;else{switch(ad(c)){case 1:l=Tl;break;case 4:l=id;break;case 16:l=mo;break;case 536870912:l=rd;break;default:l=mo}l=kp(l,mp.bind(null,i))}i.callbackPriority=r,i.callbackNode=l}}function mp(i,r){if(ua=-1,ca=0,(me&6)!==0)throw Error(t(327));var l=i.callbackNode;if(ui()&&i.callbackNode!==l)return null;var c=wo(i,i===Xe?tt:0);if(c===0)return null;if((c&30)!==0||(c&i.expiredLanes)!==0||r)r=ha(i,c);else{r=c;var f=me;me|=2;var m=yp();(Xe!==i||tt!==r)&&(yn=null,li=Be()+500,gs(i,r));do try{Ly();break}catch(E){gp(i,E)}while(!0);du(),ia.current=m,me=f,Ke!==null?r=0:(Xe=null,tt=0,r=Ge)}if(r!==0){if(r===2&&(f=jl(i),f!==0&&(c=f,r=Ju(i,f))),r===1)throw l=br,gs(i,0),Vn(i,c),wt(i,Be()),l;if(r===6)Vn(i,c);else{if(f=i.current.alternate,(c&30)===0&&!Py(f)&&(r=ha(i,c),r===2&&(m=jl(i),m!==0&&(c=m,r=Ju(i,m))),r===1))throw l=br,gs(i,0),Vn(i,c),wt(i,Be()),l;switch(i.finishedWork=f,i.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:ys(i,yt,yn);break;case 3:if(Vn(i,c),(c&130023424)===c&&(r=qu+500-Be(),10<r)){if(wo(i,0)!==0)break;if(f=i.suspendedLanes,(f&c)!==c){dt(),i.pingedLanes|=i.suspendedLanes&f;break}i.timeoutHandle=tu(ys.bind(null,i,yt,yn),r);break}ys(i,yt,yn);break;case 4:if(Vn(i,c),(c&4194240)===c)break;for(r=i.eventTimes,f=-1;0<c;){var b=31-zt(c);m=1<<b,b=r[b],b>f&&(f=b),c&=~m}if(c=f,c=Be()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Ry(c/1960))-c,10<c){i.timeoutHandle=tu(ys.bind(null,i,yt,yn),c);break}ys(i,yt,yn);break;case 5:ys(i,yt,yn);break;default:throw Error(t(329))}}}return wt(i,Be()),i.callbackNode===l?mp.bind(null,i):null}function Ju(i,r){var l=xr;return i.current.memoizedState.isDehydrated&&(gs(i,r).flags|=256),i=ha(i,r),i!==2&&(r=yt,yt=l,r!==null&&Qu(r)),i}function Qu(i){yt===null?yt=i:yt.push.apply(yt,i)}function Py(i){for(var r=i;;){if(r.flags&16384){var l=r.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var c=0;c<l.length;c++){var f=l[c],m=f.getSnapshot;f=f.value;try{if(!Dt(m(),f))return!1}catch{return!1}}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Vn(i,r){for(r&=~Ku,r&=~ra,i.suspendedLanes|=r,i.pingedLanes&=~r,i=i.expirationTimes;0<r;){var l=31-zt(r),c=1<<l;i[l]=-1,r&=~c}}function vp(i){if((me&6)!==0)throw Error(t(327));ui();var r=wo(i,0);if((r&1)===0)return wt(i,Be()),null;var l=ha(i,r);if(i.tag!==0&&l===2){var c=jl(i);c!==0&&(r=c,l=Ju(i,c))}if(l===1)throw l=br,gs(i,0),Vn(i,r),wt(i,Be()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=r,ys(i,yt,yn),wt(i,Be()),null}function Xu(i,r){var l=me;me|=1;try{return i(r)}finally{me=l,me===0&&(li=Be()+500,zo&&In())}}function vs(i){Fn!==null&&Fn.tag===0&&(me&6)===0&&ui();var r=me;me|=1;var l=At.transition,c=ke;try{if(At.transition=null,ke=1,i)return i()}finally{ke=c,At.transition=l,me=r,(me&6)===0&&In()}}function Yu(){Ct=ai.current,Ne(ai)}function gs(i,r){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,ay(l)),Ke!==null)for(l=Ke.return;l!==null;){var c=l;switch(au(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Io();break;case 3:ii(),Ne(mt),Ne(rt),bu();break;case 5:yu(c);break;case 4:ii();break;case 13:Ne(Me);break;case 19:Ne(Me);break;case 10:fu(c.type._context);break;case 22:case 23:Yu()}l=l.return}if(Xe=i,Ke=i=Wn(i.current,null),tt=Ct=r,Ge=0,br=null,Ku=ra=ms=0,yt=xr=null,ds!==null){for(r=0;r<ds.length;r++)if(l=ds[r],c=l.interleaved,c!==null){l.interleaved=null;var f=c.next,m=l.pending;if(m!==null){var b=m.next;m.next=f,c.next=b}l.pending=c}ds=null}return i}function gp(i,r){do{var l=Ke;try{if(du(),Go.current=Yo,Jo){for(var c=Ie.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Jo=!1}if(ps=0,Qe=He=Ie=null,pr=!1,mr=0,Wu.current=null,l===null||l.return===null){Ge=1,br=r,Ke=null;break}e:{var m=i,b=l.return,E=l,T=r;if(r=tt,E.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var M=T,F=E,V=F.tag;if((F.mode&1)===0&&(V===0||V===11||V===15)){var D=F.alternate;D?(F.updateQueue=D.updateQueue,F.memoizedState=D.memoizedState,F.lanes=D.lanes):(F.updateQueue=null,F.memoizedState=null)}var J=Bf(b);if(J!==null){J.flags&=-257,Vf(J,b,E,m,r),J.mode&1&&Ff(m,M,r),r=J,T=M;var Y=r.updateQueue;if(Y===null){var Z=new Set;Z.add(T),r.updateQueue=Z}else Y.add(T);break e}else{if((r&1)===0){Ff(m,M,r),Zu();break e}T=Error(t(426))}}else if(Oe&&E.mode&1){var Ve=Bf(b);if(Ve!==null){(Ve.flags&65536)===0&&(Ve.flags|=256),Vf(Ve,b,E,m,r),cu(ri(T,E));break e}}m=T=ri(T,E),Ge!==4&&(Ge=2),xr===null?xr=[m]:xr.push(m),m=b;do{switch(m.tag){case 3:m.flags|=65536,r&=-r,m.lanes|=r;var L=Df(m,T,r);df(m,L);break e;case 1:E=T;var N=m.type,A=m.stateNode;if((m.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Un===null||!Un.has(A)))){m.flags|=65536,r&=-r,m.lanes|=r;var K=Uf(m,E,r);df(m,K);break e}}m=m.return}while(m!==null)}bp(l)}catch(ee){r=ee,Ke===l&&l!==null&&(Ke=l=l.return);continue}break}while(!0)}function yp(){var i=ia.current;return ia.current=Yo,i===null?Yo:i}function Zu(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),Xe===null||(ms&268435455)===0&&(ra&268435455)===0||Vn(Xe,tt)}function ha(i,r){var l=me;me|=2;var c=yp();(Xe!==i||tt!==r)&&(yn=null,gs(i,r));do try{Oy();break}catch(f){gp(i,f)}while(!0);if(du(),me=l,ia.current=c,Ke!==null)throw Error(t(261));return Xe=null,tt=0,Ge}function Oy(){for(;Ke!==null;)wp(Ke)}function Ly(){for(;Ke!==null&&!i0();)wp(Ke)}function wp(i){var r=Sp(i.alternate,i,Ct);i.memoizedProps=i.pendingProps,r===null?bp(i):Ke=r,Wu.current=null}function bp(i){var r=i;do{var l=r.alternate;if(i=r.return,(r.flags&32768)===0){if(l=Ey(l,r,Ct),l!==null){Ke=l;return}}else{if(l=Cy(l,r),l!==null){l.flags&=32767,Ke=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ge=6,Ke=null;return}}if(r=r.sibling,r!==null){Ke=r;return}Ke=r=i}while(r!==null);Ge===0&&(Ge=5)}function ys(i,r,l){var c=ke,f=At.transition;try{At.transition=null,ke=1,Ay(i,r,l,c)}finally{At.transition=f,ke=c}return null}function Ay(i,r,l,c){do ui();while(Fn!==null);if((me&6)!==0)throw Error(t(327));l=i.finishedWork;var f=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var m=l.lanes|l.childLanes;if(p0(i,m),i===Xe&&(Ke=Xe=null,tt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||aa||(aa=!0,kp(mo,function(){return ui(),null})),m=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||m){m=At.transition,At.transition=null;var b=ke;ke=1;var E=me;me|=4,Wu.current=null,jy(i,l),cp(l,i),ey(Zl),_o=!!Yl,Zl=Yl=null,i.current=l,Ny(l),r0(),me=E,ke=b,At.transition=m}else i.current=l;if(aa&&(aa=!1,Fn=i,la=f),m=i.pendingLanes,m===0&&(Un=null),l0(l.stateNode),wt(i,Be()),r!==null)for(c=i.onRecoverableError,l=0;l<r.length;l++)f=r[l],c(f.value,{componentStack:f.stack,digest:f.digest});if(oa)throw oa=!1,i=Hu,Hu=null,i;return(la&1)!==0&&i.tag!==0&&ui(),m=i.pendingLanes,(m&1)!==0?i===Gu?_r++:(_r=0,Gu=i):_r=0,In(),null}function ui(){if(Fn!==null){var i=ad(la),r=At.transition,l=ke;try{if(At.transition=null,ke=16>i?16:i,Fn===null)var c=!1;else{if(i=Fn,Fn=null,la=0,(me&6)!==0)throw Error(t(331));var f=me;for(me|=4,X=i.current;X!==null;){var m=X,b=m.child;if((X.flags&16)!==0){var E=m.deletions;if(E!==null){for(var T=0;T<E.length;T++){var M=E[T];for(X=M;X!==null;){var F=X;switch(F.tag){case 0:case 11:case 15:wr(8,F,m)}var V=F.child;if(V!==null)V.return=F,X=V;else for(;X!==null;){F=X;var D=F.sibling,J=F.return;if(rp(F),F===M){X=null;break}if(D!==null){D.return=J,X=D;break}X=J}}}var Y=m.alternate;if(Y!==null){var Z=Y.child;if(Z!==null){Y.child=null;do{var Ve=Z.sibling;Z.sibling=null,Z=Ve}while(Z!==null)}}X=m}}if((m.subtreeFlags&2064)!==0&&b!==null)b.return=m,X=b;else e:for(;X!==null;){if(m=X,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:wr(9,m,m.return)}var L=m.sibling;if(L!==null){L.return=m.return,X=L;break e}X=m.return}}var N=i.current;for(X=N;X!==null;){b=X;var A=b.child;if((b.subtreeFlags&2064)!==0&&A!==null)A.return=b,X=A;else e:for(b=N;X!==null;){if(E=X,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:sa(9,E)}}catch(ee){ze(E,E.return,ee)}if(E===b){X=null;break e}var K=E.sibling;if(K!==null){K.return=E.return,X=K;break e}X=E.return}}if(me=f,In(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(vo,i)}catch{}c=!0}return c}finally{ke=l,At.transition=r}}return!1}function xp(i,r,l){r=ri(l,r),r=Df(i,r,1),i=zn(i,r,1),r=dt(),i!==null&&(qi(i,1,r),wt(i,r))}function ze(i,r,l){if(i.tag===3)xp(i,i,l);else for(;r!==null;){if(r.tag===3){xp(r,i,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Un===null||!Un.has(c))){i=ri(l,i),i=Uf(r,i,1),r=zn(r,i,1),i=dt(),r!==null&&(qi(r,1,i),wt(r,i));break}}r=r.return}}function My(i,r,l){var c=i.pingCache;c!==null&&c.delete(r),r=dt(),i.pingedLanes|=i.suspendedLanes&l,Xe===i&&(tt&l)===l&&(Ge===4||Ge===3&&(tt&130023424)===tt&&500>Be()-qu?gs(i,0):Ku|=l),wt(i,r)}function _p(i,r){r===0&&((i.mode&1)===0?r=1:(r=yo,yo<<=1,(yo&130023424)===0&&(yo=4194304)));var l=dt();i=mn(i,r),i!==null&&(qi(i,r,l),wt(i,l))}function Iy(i){var r=i.memoizedState,l=0;r!==null&&(l=r.retryLane),_p(i,l)}function $y(i,r){var l=0;switch(i.tag){case 13:var c=i.stateNode,f=i.memoizedState;f!==null&&(l=f.retryLane);break;case 19:c=i.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),_p(i,l)}var Sp;Sp=function(i,r,l){if(i!==null)if(i.memoizedProps!==r.pendingProps||mt.current)gt=!0;else{if((i.lanes&l)===0&&(r.flags&128)===0)return gt=!1,ky(i,r,l);gt=(i.flags&131072)!==0}else gt=!1,Oe&&(r.flags&1048576)!==0&&tf(r,Uo,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;ta(i,r),i=r.pendingProps;var f=Xs(r,rt.current);si(r,l),f=Su(null,r,c,i,f,l);var m=ku();return r.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,vt(c)?(m=!0,$o(r)):m=!1,r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,vu(r),f.updater=Zo,r.stateNode=f,f._reactInternals=r,Ru(r,c,i,l),r=Au(null,r,c,!0,m,l)):(r.tag=0,Oe&&m&&ou(r),ht(null,r,f,l),r=r.child),r;case 16:c=r.elementType;e:{switch(ta(i,r),i=r.pendingProps,f=c._init,c=f(c._payload),r.type=c,f=r.tag=Dy(c),i=Ft(c,i),f){case 0:r=Lu(null,r,c,i,l);break e;case 1:r=Jf(null,r,c,i,l);break e;case 11:r=Wf(null,r,c,i,l);break e;case 14:r=Kf(null,r,c,Ft(c.type,i),l);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:Ft(c,f),Lu(i,r,c,f,l);case 1:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:Ft(c,f),Jf(i,r,c,f,l);case 3:e:{if(Qf(r),i===null)throw Error(t(387));c=r.pendingProps,m=r.memoizedState,f=m.element,hf(i,r),qo(r,c,null,l);var b=r.memoizedState;if(c=b.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){f=ri(Error(t(423)),r),r=Xf(i,r,c,l,f);break e}else if(c!==f){f=ri(Error(t(424)),r),r=Xf(i,r,c,l,f);break e}else for(Et=Ln(r.stateNode.containerInfo.firstChild),kt=r,Oe=!0,Ut=null,l=uf(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ei(),c===f){r=gn(i,r,l);break e}ht(i,r,c,l)}r=r.child}return r;case 5:return pf(r),i===null&&uu(r),c=r.type,f=r.pendingProps,m=i!==null?i.memoizedProps:null,b=f.children,eu(c,f)?b=null:m!==null&&eu(c,m)&&(r.flags|=32),Gf(i,r),ht(i,r,b,l),r.child;case 6:return i===null&&uu(r),null;case 13:return Yf(i,r,l);case 4:return gu(r,r.stateNode.containerInfo),c=r.pendingProps,i===null?r.child=ti(r,null,c,l):ht(i,r,c,l),r.child;case 11:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:Ft(c,f),Wf(i,r,c,f,l);case 7:return ht(i,r,r.pendingProps,l),r.child;case 8:return ht(i,r,r.pendingProps.children,l),r.child;case 12:return ht(i,r,r.pendingProps.children,l),r.child;case 10:e:{if(c=r.type._context,f=r.pendingProps,m=r.memoizedProps,b=f.value,Ce(Vo,c._currentValue),c._currentValue=b,m!==null)if(Dt(m.value,b)){if(m.children===f.children&&!mt.current){r=gn(i,r,l);break e}}else for(m=r.child,m!==null&&(m.return=r);m!==null;){var E=m.dependencies;if(E!==null){b=m.child;for(var T=E.firstContext;T!==null;){if(T.context===c){if(m.tag===1){T=vn(-1,l&-l),T.tag=2;var M=m.updateQueue;if(M!==null){M=M.shared;var F=M.pending;F===null?T.next=T:(T.next=F.next,F.next=T),M.pending=T}}m.lanes|=l,T=m.alternate,T!==null&&(T.lanes|=l),pu(m.return,l,r),E.lanes|=l;break}T=T.next}}else if(m.tag===10)b=m.type===r.type?null:m.child;else if(m.tag===18){if(b=m.return,b===null)throw Error(t(341));b.lanes|=l,E=b.alternate,E!==null&&(E.lanes|=l),pu(b,l,r),b=m.sibling}else b=m.child;if(b!==null)b.return=m;else for(b=m;b!==null;){if(b===r){b=null;break}if(m=b.sibling,m!==null){m.return=b.return,b=m;break}b=b.return}m=b}ht(i,r,f.children,l),r=r.child}return r;case 9:return f=r.type,c=r.pendingProps.children,si(r,l),f=Ot(f),c=c(f),r.flags|=1,ht(i,r,c,l),r.child;case 14:return c=r.type,f=Ft(c,r.pendingProps),f=Ft(c.type,f),Kf(i,r,c,f,l);case 15:return qf(i,r,r.type,r.pendingProps,l);case 17:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:Ft(c,f),ta(i,r),r.tag=1,vt(c)?(i=!0,$o(r)):i=!1,si(r,l),$f(r,c,f),Ru(r,c,f,l),Au(null,r,c,!0,i,l);case 19:return ep(i,r,l);case 22:return Hf(i,r,l)}throw Error(t(156,r.tag))};function kp(i,r){return nd(i,r)}function zy(i,r,l,c){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(i,r,l,c){return new zy(i,r,l,c)}function ec(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Dy(i){if(typeof i=="function")return ec(i)?1:0;if(i!=null){if(i=i.$$typeof,i===xe)return 11;if(i===Fe)return 14}return 2}function Wn(i,r){var l=i.alternate;return l===null?(l=Mt(i.tag,r,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=r,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,r=i.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function da(i,r,l,c,f,m){var b=2;if(c=i,typeof i=="function")ec(i)&&(b=1);else if(typeof i=="string")b=5;else e:switch(i){case G:return ws(l.children,f,m,r);case Q:b=8,f|=8;break;case ie:return i=Mt(12,l,r,f|2),i.elementType=ie,i.lanes=m,i;case he:return i=Mt(13,l,r,f),i.elementType=he,i.lanes=m,i;case _e:return i=Mt(19,l,r,f),i.elementType=_e,i.lanes=m,i;case be:return fa(l,f,m,r);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case we:b=10;break e;case Le:b=9;break e;case xe:b=11;break e;case Fe:b=14;break e;case Ae:b=16,c=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return r=Mt(b,l,r,f),r.elementType=i,r.type=c,r.lanes=m,r}function ws(i,r,l,c){return i=Mt(7,i,c,r),i.lanes=l,i}function fa(i,r,l,c){return i=Mt(22,i,c,r),i.elementType=be,i.lanes=l,i.stateNode={isHidden:!1},i}function tc(i,r,l){return i=Mt(6,i,null,r),i.lanes=l,i}function nc(i,r,l){return r=Mt(4,i.children!==null?i.children:[],i.key,r),r.lanes=l,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}function Uy(i,r,l,c,f){this.tag=r,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nl(0),this.expirationTimes=Nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nl(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function sc(i,r,l,c,f,m,b,E,T){return i=new Uy(i,r,l,E,T),r===1?(r=1,m===!0&&(r|=8)):r=0,m=Mt(3,null,null,r),i.current=m,m.stateNode=i,m.memoizedState={element:c,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},vu(m),i}function Fy(i,r,l){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:c==null?null:""+c,children:i,containerInfo:r,implementation:l}}function Ep(i){if(!i)return Mn;i=i._reactInternals;e:{if(as(i)!==i||i.tag!==1)throw Error(t(170));var r=i;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(vt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(vt(l))return Yd(i,l,r)}return r}function Cp(i,r,l,c,f,m,b,E,T){return i=sc(l,c,!0,i,f,m,b,E,T),i.context=Ep(null),l=i.current,c=dt(),f=Bn(l),m=vn(c,f),m.callback=r??null,zn(l,m,f),i.current.lanes=f,qi(i,f,c),wt(i,c),i}function pa(i,r,l,c){var f=r.current,m=dt(),b=Bn(f);return l=Ep(l),r.context===null?r.context=l:r.pendingContext=l,r=vn(m,b),r.payload={element:i},c=c===void 0?null:c,c!==null&&(r.callback=c),i=zn(f,r,b),i!==null&&(Wt(i,f,b,m),Ko(i,f,b)),b}function ma(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Tp(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<r?l:r}}function ic(i,r){Tp(i,r),(i=i.alternate)&&Tp(i,r)}function By(){return null}var jp=typeof reportError=="function"?reportError:function(i){console.error(i)};function rc(i){this._internalRoot=i}va.prototype.render=rc.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(t(409));pa(i,r,null,null)},va.prototype.unmount=rc.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;vs(function(){pa(null,i,null,null)}),r[hn]=null}};function va(i){this._internalRoot=i}va.prototype.unstable_scheduleHydration=function(i){if(i){var r=cd();i={blockedOn:null,target:i,priority:r};for(var l=0;l<Rn.length&&r!==0&&r<Rn[l].priority;l++);Rn.splice(l,0,i),l===0&&fd(i)}};function oc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ga(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Np(){}function Vy(i,r,l,c,f){if(f){if(typeof c=="function"){var m=c;c=function(){var M=ma(b);m.call(M)}}var b=Cp(r,c,i,0,null,!1,!1,"",Np);return i._reactRootContainer=b,i[hn]=b.current,or(i.nodeType===8?i.parentNode:i),vs(),b}for(;f=i.lastChild;)i.removeChild(f);if(typeof c=="function"){var E=c;c=function(){var M=ma(T);E.call(M)}}var T=sc(i,0,!1,null,null,!1,!1,"",Np);return i._reactRootContainer=T,i[hn]=T.current,or(i.nodeType===8?i.parentNode:i),vs(function(){pa(r,T,l,c)}),T}function ya(i,r,l,c,f){var m=l._reactRootContainer;if(m){var b=m;if(typeof f=="function"){var E=f;f=function(){var T=ma(b);E.call(T)}}pa(r,b,i,f)}else b=Vy(l,r,i,f,c);return ma(b)}ld=function(i){switch(i.tag){case 3:var r=i.stateNode;if(r.current.memoizedState.isDehydrated){var l=Ki(r.pendingLanes);l!==0&&(Rl(r,l|1),wt(r,Be()),(me&6)===0&&(li=Be()+500,In()))}break;case 13:vs(function(){var c=mn(i,1);if(c!==null){var f=dt();Wt(c,i,1,f)}}),ic(i,1)}},Pl=function(i){if(i.tag===13){var r=mn(i,134217728);if(r!==null){var l=dt();Wt(r,i,134217728,l)}ic(i,134217728)}},ud=function(i){if(i.tag===13){var r=Bn(i),l=mn(i,r);if(l!==null){var c=dt();Wt(l,i,r,c)}ic(i,r)}},cd=function(){return ke},hd=function(i,r){var l=ke;try{return ke=i,r()}finally{ke=l}},Sl=function(i,r,l){switch(r){case"input":if(ml(i,l),r=l.name,l.type==="radio"&&r!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==i&&c.form===i.form){var f=Mo(c);if(!f)throw Error(t(90));Mh(c),ml(c,f)}}}break;case"textarea":Uh(i,l);break;case"select":r=l.value,r!=null&&Ds(i,!!l.multiple,r,!1)}},Jh=Xu,Qh=vs;var Wy={usingClientEntryPoint:!1,Events:[ur,Js,Mo,Hh,Gh,Xu]},Sr={findFiberByHostInstance:ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ky={bundleType:Sr.bundleType,version:Sr.version,rendererPackageName:Sr.rendererPackageName,rendererConfig:Sr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=ed(i),i===null?null:i.stateNode},findFiberByHostInstance:Sr.findFiberByHostInstance||By,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wa.isDisabled&&wa.supportsFiber)try{vo=wa.inject(Ky),en=wa}catch{}}return bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wy,bt.createPortal=function(i,r){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oc(r))throw Error(t(200));return Fy(i,r,null,l)},bt.createRoot=function(i,r){if(!oc(i))throw Error(t(299));var l=!1,c="",f=jp;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),r=sc(i,1,!1,null,null,l,!1,c,f),i[hn]=r.current,or(i.nodeType===8?i.parentNode:i),new rc(r)},bt.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=ed(r),i=i===null?null:i.stateNode,i},bt.flushSync=function(i){return vs(i)},bt.hydrate=function(i,r,l){if(!ga(r))throw Error(t(200));return ya(null,i,r,!0,l)},bt.hydrateRoot=function(i,r,l){if(!oc(i))throw Error(t(405));var c=l!=null&&l.hydratedSources||null,f=!1,m="",b=jp;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),r=Cp(r,null,i,1,l??null,f,!1,m,b),i[hn]=r.current,or(i),c)for(i=0;i<c.length;i++)l=c[i],f=l._getVersion,f=f(l._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[l,f]:r.mutableSourceEagerHydrationData.push(l,f);return new va(r)},bt.render=function(i,r,l){if(!ga(r))throw Error(t(200));return ya(null,i,r,!1,l)},bt.unmountComponentAtNode=function(i){if(!ga(i))throw Error(t(40));return i._reactRootContainer?(vs(function(){ya(null,null,i,!1,function(){i._reactRootContainer=null,i[hn]=null})}),!0):!1},bt.unstable_batchedUpdates=Xu,bt.unstable_renderSubtreeIntoContainer=function(i,r,l,c){if(!ga(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return ya(i,r,l,!1,c)},bt.version="18.3.1-next-f1338f8080-20240426",bt}var zp;function $v(){if(zp)return cc.exports;zp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cc.exports=tw(),cc.exports}var Dp;function nw(){if(Dp)return xa;Dp=1;var n=$v();return xa.createRoot=n.createRoot,xa.hydrateRoot=n.hydrateRoot,xa}var sw=nw();$v();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zr(){return zr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},zr.apply(this,arguments)}var ns;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ns||(ns={}));const Up="popstate";function iw(n){n===void 0&&(n={});function e(s,o){let{pathname:a,search:u,hash:h}=s.location;return Fc("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:Ka(o)}return ow(e,t,null,n)}function $e(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function vh(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rw(){return Math.random().toString(36).substr(2,8)}function Fp(n,e){return{usr:n.state,key:n.key,idx:e}}function Fc(n,e,t,s){return t===void 0&&(t=null),zr({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ii(e):e,{state:t,key:e&&e.key||s||rw()})}function Ka(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Ii(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function ow(n,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:a=!1}=s,u=o.history,h=ns.Pop,d=null,p=v();p==null&&(p=0,u.replaceState(zr({},u.state,{idx:p}),""));function v(){return(u.state||{idx:null}).idx}function g(){h=ns.Pop;let k=v(),C=k==null?null:k-p;p=k,d&&d({action:h,location:x.location,delta:C})}function w(k,C){h=ns.Push;let R=Fc(x.location,k,C);p=v()+1;let P=Fp(R,p),j=x.createHref(R);try{u.pushState(P,"",j)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;o.location.assign(j)}a&&d&&d({action:h,location:x.location,delta:1})}function _(k,C){h=ns.Replace;let R=Fc(x.location,k,C);p=v();let P=Fp(R,p),j=x.createHref(R);u.replaceState(P,"",j),a&&d&&d({action:h,location:x.location,delta:0})}function S(k){let C=o.location.origin!=="null"?o.location.origin:o.location.href,R=typeof k=="string"?k:Ka(k);return R=R.replace(/ $/,"%20"),$e(C,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,C)}let x={get action(){return h},get location(){return n(o,u)},listen(k){if(d)throw new Error("A history only accepts one active listener");return o.addEventListener(Up,g),d=k,()=>{o.removeEventListener(Up,g),d=null}},createHref(k){return e(o,k)},createURL:S,encodeLocation(k){let C=S(k);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:w,replace:_,go(k){return u.go(k)}};return x}var Bp;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Bp||(Bp={}));function aw(n,e,t){return t===void 0&&(t="/"),lw(n,e,t)}function lw(n,e,t,s){let o=typeof e=="string"?Ii(e):e,a=Li(o.pathname||"/",t);if(a==null)return null;let u=zv(n);uw(u);let h=null;for(let d=0;h==null&&d<u.length;++d){let p=bw(a);h=yw(u[d],p)}return h}function zv(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(a,u,h)=>{let d={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};d.relativePath.startsWith("/")&&($e(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let p=ss([s,d.relativePath]),v=t.concat(d);a.children&&a.children.length>0&&($e(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),zv(a.children,e,v,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:vw(p,a.index),routesMeta:v})};return n.forEach((a,u)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))o(a,u);else for(let d of Dv(a.path))o(a,u,d)}),e}function Dv(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return o?[a,""]:[a];let u=Dv(s.join("/")),h=[];return h.push(...u.map(d=>d===""?a:[a,d].join("/"))),o&&h.push(...u),h.map(d=>n.startsWith("/")&&d===""?"/":d)}function uw(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:gw(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const cw=/^:[\w-]+$/,hw=3,dw=2,fw=1,pw=10,mw=-2,Vp=n=>n==="*";function vw(n,e){let t=n.split("/"),s=t.length;return t.some(Vp)&&(s+=mw),e&&(s+=dw),t.filter(o=>!Vp(o)).reduce((o,a)=>o+(cw.test(a)?hw:a===""?fw:pw),s)}function gw(n,e){return n.length===e.length&&n.slice(0,-1).every((s,o)=>s===e[o])?n[n.length-1]-e[e.length-1]:0}function yw(n,e,t){let{routesMeta:s}=n,o={},a="/",u=[];for(let h=0;h<s.length;++h){let d=s[h],p=h===s.length-1,v=a==="/"?e:e.slice(a.length)||"/",g=Bc({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},v),w=d.route;if(!g)return null;Object.assign(o,g.params),u.push({params:o,pathname:ss([a,g.pathname]),pathnameBase:Ew(ss([a,g.pathnameBase])),route:w}),g.pathnameBase!=="/"&&(a=ss([a,g.pathnameBase]))}return u}function Bc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=ww(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:s.reduce((p,v,g)=>{let{paramName:w,isOptional:_}=v;if(w==="*"){let x=h[g]||"";u=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const S=h[g];return _&&!S?p[w]=void 0:p[w]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:u,pattern:n}}function ww(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),vh(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,d)=>(s.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function bw(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vh(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Li(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}const xw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_w=n=>xw.test(n);function Sw(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof n=="string"?Ii(n):n,a;if(t)if(_w(t))a=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),vh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+t))}t.startsWith("/")?a=Wp(t.substring(1),"/"):a=Wp(t,e)}else a=e;return{pathname:a,search:Cw(s),hash:Tw(o)}}function Wp(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function fc(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kw(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function gh(n,e){let t=kw(n);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function yh(n,e,t,s){s===void 0&&(s=!1);let o;typeof n=="string"?o=Ii(n):(o=zr({},n),$e(!o.pathname||!o.pathname.includes("?"),fc("?","pathname","search",o)),$e(!o.pathname||!o.pathname.includes("#"),fc("#","pathname","hash",o)),$e(!o.search||!o.search.includes("#"),fc("#","search","hash",o)));let a=n===""||o.pathname==="",u=a?"/":o.pathname,h;if(u==null)h=t;else{let g=e.length-1;if(!s&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),g-=1;o.pathname=w.join("/")}h=g>=0?e[g]:"/"}let d=Sw(o,h),p=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||v)&&(d.pathname+="/"),d}const ss=n=>n.join("/").replace(/\/\/+/g,"/"),Ew=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Cw=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Tw=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function jw(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Uv=["post","put","patch","delete"];new Set(Uv);const Nw=["get",...Uv];new Set(Nw);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dr(){return Dr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Dr.apply(this,arguments)}const Za=z.createContext(null),Fv=z.createContext(null),En=z.createContext(null),el=z.createContext(null),rs=z.createContext({outlet:null,matches:[],isDataRoute:!1}),Bv=z.createContext(null);function Rw(n,e){let{relative:t}=e===void 0?{}:e;$i()||$e(!1);let{basename:s,navigator:o}=z.useContext(En),{hash:a,pathname:u,search:h}=tl(n,{relative:t}),d=u;return s!=="/"&&(d=u==="/"?s:ss([s,u])),o.createHref({pathname:d,search:h,hash:a})}function $i(){return z.useContext(el)!=null}function os(){return $i()||$e(!1),z.useContext(el).location}function Vv(n){z.useContext(En).static||z.useLayoutEffect(n)}function so(){let{isDataRoute:n}=z.useContext(rs);return n?Vw():Pw()}function Pw(){$i()||$e(!1);let n=z.useContext(Za),{basename:e,future:t,navigator:s}=z.useContext(En),{matches:o}=z.useContext(rs),{pathname:a}=os(),u=JSON.stringify(gh(o,t.v7_relativeSplatPath)),h=z.useRef(!1);return Vv(()=>{h.current=!0}),z.useCallback(function(p,v){if(v===void 0&&(v={}),!h.current)return;if(typeof p=="number"){s.go(p);return}let g=yh(p,JSON.parse(u),a,v.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ss([e,g.pathname])),(v.replace?s.replace:s.push)(g,v.state,v)},[e,s,u,a,n])}function tl(n,e){let{relative:t}=e===void 0?{}:e,{future:s}=z.useContext(En),{matches:o}=z.useContext(rs),{pathname:a}=os(),u=JSON.stringify(gh(o,s.v7_relativeSplatPath));return z.useMemo(()=>yh(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function Ow(n,e){return Lw(n,e)}function Lw(n,e,t,s){$i()||$e(!1);let{navigator:o}=z.useContext(En),{matches:a}=z.useContext(rs),u=a[a.length-1],h=u?u.params:{};u&&u.pathname;let d=u?u.pathnameBase:"/";u&&u.route;let p=os(),v;if(e){var g;let k=typeof e=="string"?Ii(e):e;d==="/"||(g=k.pathname)!=null&&g.startsWith(d)||$e(!1),v=k}else v=p;let w=v.pathname||"/",_=w;if(d!=="/"){let k=d.replace(/^\//,"").split("/");_="/"+w.replace(/^\//,"").split("/").slice(k.length).join("/")}let S=aw(n,{pathname:_}),x=zw(S&&S.map(k=>Object.assign({},k,{params:Object.assign({},h,k.params),pathname:ss([d,o.encodeLocation?o.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?d:ss([d,o.encodeLocation?o.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,t,s);return e&&x?z.createElement(el.Provider,{value:{location:Dr({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:ns.Pop}},x):x}function Aw(){let n=Bw(),e=jw(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:o},t):null,null)}const Mw=z.createElement(Aw,null);class Iw extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?z.createElement(rs.Provider,{value:this.props.routeContext},z.createElement(Bv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $w(n){let{routeContext:e,match:t,children:s}=n,o=z.useContext(Za);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),z.createElement(rs.Provider,{value:e},s)}function zw(n,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,h=(o=t)==null?void 0:o.errors;if(h!=null){let v=u.findIndex(g=>g.route.id&&(h==null?void 0:h[g.route.id])!==void 0);v>=0||$e(!1),u=u.slice(0,Math.min(u.length,v+1))}let d=!1,p=-1;if(t&&s&&s.v7_partialHydration)for(let v=0;v<u.length;v++){let g=u[v];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(p=v),g.route.id){let{loaderData:w,errors:_}=t,S=g.route.loader&&w[g.route.id]===void 0&&(!_||_[g.route.id]===void 0);if(g.route.lazy||S){d=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((v,g,w)=>{let _,S=!1,x=null,k=null;t&&(_=h&&g.route.id?h[g.route.id]:void 0,x=g.route.errorElement||Mw,d&&(p<0&&w===0?(Ww("route-fallback"),S=!0,k=null):p===w&&(S=!0,k=g.route.hydrateFallbackElement||null)));let C=e.concat(u.slice(0,w+1)),R=()=>{let P;return _?P=x:S?P=k:g.route.Component?P=z.createElement(g.route.Component,null):g.route.element?P=g.route.element:P=v,z.createElement($w,{match:g,routeContext:{outlet:v,matches:C,isDataRoute:t!=null},children:P})};return t&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?z.createElement(Iw,{location:t.location,revalidation:t.revalidation,component:x,error:_,children:R(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):R()},null)}var Wv=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(Wv||{}),Kv=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Kv||{});function Dw(n){let e=z.useContext(Za);return e||$e(!1),e}function Uw(n){let e=z.useContext(Fv);return e||$e(!1),e}function Fw(n){let e=z.useContext(rs);return e||$e(!1),e}function qv(n){let e=Fw(),t=e.matches[e.matches.length-1];return t.route.id||$e(!1),t.route.id}function Bw(){var n;let e=z.useContext(Bv),t=Uw(),s=qv();return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function Vw(){let{router:n}=Dw(Wv.UseNavigateStable),e=qv(Kv.UseNavigateStable),t=z.useRef(!1);return Vv(()=>{t.current=!0}),z.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,Dr({fromRouteId:e},a)))},[n,e])}const Kp={};function Ww(n,e,t){Kp[n]||(Kp[n]=!0)}function Kw(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Hv(n){let{to:e,replace:t,state:s,relative:o}=n;$i()||$e(!1);let{future:a,static:u}=z.useContext(En),{matches:h}=z.useContext(rs),{pathname:d}=os(),p=so(),v=yh(e,gh(h,a.v7_relativeSplatPath),d,o==="path"),g=JSON.stringify(v);return z.useEffect(()=>p(JSON.parse(g),{replace:t,state:s,relative:o}),[p,g,o,t,s]),null}function wn(n){$e(!1)}function qw(n){let{basename:e="/",children:t=null,location:s,navigationType:o=ns.Pop,navigator:a,static:u=!1,future:h}=n;$i()&&$e(!1);let d=e.replace(/^\/*/,"/"),p=z.useMemo(()=>({basename:d,navigator:a,static:u,future:Dr({v7_relativeSplatPath:!1},h)}),[d,h,a,u]);typeof s=="string"&&(s=Ii(s));let{pathname:v="/",search:g="",hash:w="",state:_=null,key:S="default"}=s,x=z.useMemo(()=>{let k=Li(v,d);return k==null?null:{location:{pathname:k,search:g,hash:w,state:_,key:S},navigationType:o}},[d,v,g,w,_,S,o]);return x==null?null:z.createElement(En.Provider,{value:p},z.createElement(el.Provider,{children:t,value:x}))}function Hw(n){let{children:e,location:t}=n;return Ow(Vc(e),t)}new Promise(()=>{});function Vc(n,e){e===void 0&&(e=[]);let t=[];return z.Children.forEach(n,(s,o)=>{if(!z.isValidElement(s))return;let a=[...e,o];if(s.type===z.Fragment){t.push.apply(t,Vc(s.props.children,a));return}s.type!==wn&&$e(!1),!s.props.index||!s.props.children||$e(!1);let u={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=Vc(s.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qa(){return qa=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},qa.apply(this,arguments)}function Gv(n,e){if(n==null)return{};var t={},s=Object.keys(n),o,a;for(a=0;a<s.length;a++)o=s[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function Gw(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Jw(n,e){return n.button===0&&(!e||e==="_self")&&!Gw(n)}const Qw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Xw=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Yw="6";try{window.__reactRouterVersion=Yw}catch{}const Zw=z.createContext({isTransitioning:!1}),eb="startTransition",qp=Yy[eb];function tb(n){let{basename:e,children:t,future:s,window:o}=n,a=z.useRef();a.current==null&&(a.current=iw({window:o,v5Compat:!0}));let u=a.current,[h,d]=z.useState({action:u.action,location:u.location}),{v7_startTransition:p}=s||{},v=z.useCallback(g=>{p&&qp?qp(()=>d(g)):d(g)},[d,p]);return z.useLayoutEffect(()=>u.listen(v),[u,v]),z.useEffect(()=>Kw(s),[s]),z.createElement(qw,{basename:e,children:t,location:h.location,navigationType:h.action,navigator:u,future:s})}const nb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jt=z.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:a,replace:u,state:h,target:d,to:p,preventScrollReset:v,viewTransition:g}=e,w=Gv(e,Qw),{basename:_}=z.useContext(En),S,x=!1;if(typeof p=="string"&&sb.test(p)&&(S=p,nb))try{let P=new URL(window.location.href),j=p.startsWith("//")?new URL(P.protocol+p):new URL(p),U=Li(j.pathname,_);j.origin===P.origin&&U!=null?p=U+j.search+j.hash:x=!0}catch{}let k=Rw(p,{relative:o}),C=rb(p,{replace:u,state:h,target:d,preventScrollReset:v,relative:o,viewTransition:g});function R(P){s&&s(P),P.defaultPrevented||C(P)}return z.createElement("a",qa({},w,{href:S||k,onClick:x||a?s:R,ref:t,target:d}))}),Hp=z.forwardRef(function(e,t){let{"aria-current":s="page",caseSensitive:o=!1,className:a="",end:u=!1,style:h,to:d,viewTransition:p,children:v}=e,g=Gv(e,Xw),w=tl(d,{relative:g.relative}),_=os(),S=z.useContext(Fv),{navigator:x,basename:k}=z.useContext(En),C=S!=null&&ob(w)&&p===!0,R=x.encodeLocation?x.encodeLocation(w).pathname:w.pathname,P=_.pathname,j=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;o||(P=P.toLowerCase(),j=j?j.toLowerCase():null,R=R.toLowerCase()),j&&k&&(j=Li(j,k)||j);const U=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let B=P===R||!u&&P.startsWith(R)&&P.charAt(U)==="/",G=j!=null&&(j===R||!u&&j.startsWith(R)&&j.charAt(R.length)==="/"),Q={isActive:B,isPending:G,isTransitioning:C},ie=B?s:void 0,we;typeof a=="function"?we=a(Q):we=[a,B?"active":null,G?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let Le=typeof h=="function"?h(Q):h;return z.createElement(jt,qa({},g,{"aria-current":ie,className:we,ref:t,style:Le,to:d,viewTransition:p}),typeof v=="function"?v(Q):v)});var Wc;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Wc||(Wc={}));var Gp;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Gp||(Gp={}));function ib(n){let e=z.useContext(Za);return e||$e(!1),e}function rb(n,e){let{target:t,replace:s,state:o,preventScrollReset:a,relative:u,viewTransition:h}=e===void 0?{}:e,d=so(),p=os(),v=tl(n,{relative:u});return z.useCallback(g=>{if(Jw(g,t)){g.preventDefault();let w=s!==void 0?s:Ka(p)===Ka(v);d(n,{replace:w,state:o,preventScrollReset:a,relative:u,viewTransition:h})}},[p,d,v,s,o,t,n,a,u,h])}function ob(n,e){e===void 0&&(e={});let t=z.useContext(Zw);t==null&&$e(!1);let{basename:s}=ib(Wc.useViewTransitionState),o=tl(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Li(t.currentLocation.pathname,s)||t.currentLocation.pathname,u=Li(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Bc(o.pathname,u)!=null||Bc(o.pathname,a)!=null}var nl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ab={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},Qn,ph,jv,lb=(jv=class{constructor(){pe(this,Qn,ab);pe(this,ph,!1)}setTimeoutProvider(n){ce(this,Qn,n)}setTimeout(n,e){return $(this,Qn).setTimeout(n,e)}clearTimeout(n){$(this,Qn).clearTimeout(n)}setInterval(n,e){return $(this,Qn).setInterval(n,e)}clearInterval(n){$(this,Qn).clearInterval(n)}},Qn=new WeakMap,ph=new WeakMap,jv),Kc=new lb;function ub(n){setTimeout(n,0)}var sl=typeof window>"u"||"Deno"in globalThis;function qt(){}function cb(n,e){return typeof n=="function"?n(e):n}function hb(n){return typeof n=="number"&&n>=0&&n!==1/0}function db(n,e){return Math.max(n+(e||0)-Date.now(),0)}function qc(n,e){return typeof n=="function"?n(e):n}function fb(n,e){return typeof n=="function"?n(e):n}function Jp(n,e){const{type:t="all",exact:s,fetchStatus:o,predicate:a,queryKey:u,stale:h}=n;if(u){if(s){if(e.queryHash!==wh(u,e.options))return!1}else if(!Fr(e.queryKey,u))return!1}if(t!=="all"){const d=e.isActive();if(t==="active"&&!d||t==="inactive"&&d)return!1}return!(typeof h=="boolean"&&e.isStale()!==h||o&&o!==e.state.fetchStatus||a&&!a(e))}function Qp(n,e){const{exact:t,status:s,predicate:o,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(Ur(e.options.mutationKey)!==Ur(a))return!1}else if(!Fr(e.options.mutationKey,a))return!1}return!(s&&e.state.status!==s||o&&!o(e))}function wh(n,e){return((e==null?void 0:e.queryKeyHashFn)||Ur)(n)}function Ur(n){return JSON.stringify(n,(e,t)=>Hc(t)?Object.keys(t).sort().reduce((s,o)=>(s[o]=t[o],s),{}):t)}function Fr(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Fr(n[t],e[t])):!1}var pb=Object.prototype.hasOwnProperty;function Jv(n,e,t=0){if(n===e)return n;if(t>500)return e;const s=Xp(n)&&Xp(e);if(!s&&!(Hc(n)&&Hc(e)))return e;const a=(s?n:Object.keys(n)).length,u=s?e:Object.keys(e),h=u.length,d=s?new Array(h):{};let p=0;for(let v=0;v<h;v++){const g=s?v:u[v],w=n[g],_=e[g];if(w===_){d[g]=w,(s?v<a:pb.call(n,g))&&p++;continue}if(w===null||_===null||typeof w!="object"||typeof _!="object"){d[g]=_;continue}const S=Jv(w,_,t+1);d[g]=S,S===w&&p++}return a===h&&p===a?n:d}function Xp(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Hc(n){if(!Yp(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Yp(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function Yp(n){return Object.prototype.toString.call(n)==="[object Object]"}function mb(n){return new Promise(e=>{Kc.setTimeout(e,n)})}function vb(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?Jv(n,e):e}function gb(n,e,t=0){const s=[...n,e];return t&&s.length>t?s.slice(1):s}function yb(n,e,t=0){const s=[e,...n];return t&&s.length>t?s.slice(0,-1):s}var bh=Symbol();function Qv(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===bh?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function wb(n,e,t){let s=!1,o;return Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(o??(o=e()),s||(s=!0,o.aborted?t():o.addEventListener("abort",t,{once:!0})),o)}),n}var Ts,Xn,Ei,Nv,bb=(Nv=class extends nl{constructor(){super();pe(this,Ts);pe(this,Xn);pe(this,Ei);ce(this,Ei,e=>{if(!sl&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){$(this,Xn)||this.setEventListener($(this,Ei))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,Xn))==null||e.call(this),ce(this,Xn,void 0))}setEventListener(e){var t;ce(this,Ei,e),(t=$(this,Xn))==null||t.call(this),ce(this,Xn,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){$(this,Ts)!==e&&(ce(this,Ts,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof $(this,Ts)=="boolean"?$(this,Ts):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ts=new WeakMap,Xn=new WeakMap,Ei=new WeakMap,Nv),Xv=new bb;function xb(){let n,e;const t=new Promise((o,a)=>{n=o,e=a});t.status="pending",t.catch(()=>{});function s(o){Object.assign(t,o),delete t.resolve,delete t.reject}return t.resolve=o=>{s({status:"fulfilled",value:o}),n(o)},t.reject=o=>{s({status:"rejected",reason:o}),e(o)},t}var _b=ub;function Sb(){let n=[],e=0,t=h=>{h()},s=h=>{h()},o=_b;const a=h=>{e?n.push(h):o(()=>{t(h)})},u=()=>{const h=n;n=[],h.length&&o(()=>{s(()=>{h.forEach(d=>{t(d)})})})};return{batch:h=>{let d;e++;try{d=h()}finally{e--,e||u()}return d},batchCalls:h=>(...d)=>{a(()=>{h(...d)})},schedule:a,setNotifyFunction:h=>{t=h},setBatchNotifyFunction:h=>{s=h},setScheduler:h=>{o=h}}}var ft=Sb(),Ci,Yn,Ti,Rv,kb=(Rv=class extends nl{constructor(){super();pe(this,Ci,!0);pe(this,Yn);pe(this,Ti);ce(this,Ti,e=>{if(!sl&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){$(this,Yn)||this.setEventListener($(this,Ti))}onUnsubscribe(){var e;this.hasListeners()||((e=$(this,Yn))==null||e.call(this),ce(this,Yn,void 0))}setEventListener(e){var t;ce(this,Ti,e),(t=$(this,Yn))==null||t.call(this),ce(this,Yn,e(this.setOnline.bind(this)))}setOnline(e){$(this,Ci)!==e&&(ce(this,Ci,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return $(this,Ci)}},Ci=new WeakMap,Yn=new WeakMap,Ti=new WeakMap,Rv),Ha=new kb;function Eb(n){return Math.min(1e3*2**n,3e4)}function Yv(n){return(n??"online")==="online"?Ha.isOnline():!0}var Gc=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Zv(n){let e=!1,t=0,s;const o=xb(),a=()=>o.status!=="pending",u=x=>{var k;if(!a()){const C=new Gc(x);w(C),(k=n.onCancel)==null||k.call(n,C)}},h=()=>{e=!0},d=()=>{e=!1},p=()=>Xv.isFocused()&&(n.networkMode==="always"||Ha.isOnline())&&n.canRun(),v=()=>Yv(n.networkMode)&&n.canRun(),g=x=>{a()||(s==null||s(),o.resolve(x))},w=x=>{a()||(s==null||s(),o.reject(x))},_=()=>new Promise(x=>{var k;s=C=>{(a()||p())&&x(C)},(k=n.onPause)==null||k.call(n)}).then(()=>{var x;s=void 0,a()||(x=n.onContinue)==null||x.call(n)}),S=()=>{if(a())return;let x;const k=t===0?n.initialPromise:void 0;try{x=k??n.fn()}catch(C){x=Promise.reject(C)}Promise.resolve(x).then(g).catch(C=>{var B;if(a())return;const R=n.retry??(sl?0:3),P=n.retryDelay??Eb,j=typeof P=="function"?P(t,C):P,U=R===!0||typeof R=="number"&&t<R||typeof R=="function"&&R(t,C);if(e||!U){w(C);return}t++,(B=n.onFail)==null||B.call(n,t,C),mb(j).then(()=>p()?void 0:_()).then(()=>{e?w(C):S()})})};return{promise:o,status:()=>o.status,cancel:u,continue:()=>(s==null||s(),o),cancelRetry:h,continueRetry:d,canStart:v,start:()=>(v()?S():_().then(S),o)}}var js,Pv,eg=(Pv=class{constructor(){pe(this,js)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),hb(this.gcTime)&&ce(this,js,Kc.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(sl?1/0:300*1e3))}clearGcTimeout(){$(this,js)&&(Kc.clearTimeout($(this,js)),ce(this,js,void 0))}},js=new WeakMap,Pv),Ns,ji,$t,Rs,Ze,eo,Ps,Jt,bn,Ov,Cb=(Ov=class extends eg{constructor(e){super();pe(this,Jt);pe(this,Ns);pe(this,ji);pe(this,$t);pe(this,Rs);pe(this,Ze);pe(this,eo);pe(this,Ps);ce(this,Ps,!1),ce(this,eo,e.defaultOptions),this.setOptions(e.options),this.observers=[],ce(this,Rs,e.client),ce(this,$t,$(this,Rs).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ce(this,Ns,em(this.options)),this.state=e.state??$(this,Ns),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=$(this,Ze))==null?void 0:e.promise}setOptions(e){if(this.options={...$(this,eo),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=em(this.options);t.data!==void 0&&(this.setState(Zp(t.data,t.dataUpdatedAt)),ce(this,Ns,t))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,$t).remove(this)}setData(e,t){const s=vb(this.state.data,e,this.options);return ut(this,Jt,bn).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){ut(this,Jt,bn).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,o;const t=(s=$(this,Ze))==null?void 0:s.promise;return(o=$(this,Ze))==null||o.cancel(e),t?t.then(qt).catch(qt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,Ns))}isActive(){return this.observers.some(e=>fb(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===bh||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>qc(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!db(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=$(this,Ze))==null||t.continue()}onOnline(){var t;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=$(this,Ze))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),$(this,$t).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||($(this,Ze)&&($(this,Ps)?$(this,Ze).cancel({revert:!0}):$(this,Ze).cancelRetry()),this.scheduleGc()),$(this,$t).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ut(this,Jt,bn).call(this,{type:"invalidate"})}async fetch(e,t){var d,p,v,g,w,_,S,x,k,C,R,P;if(this.state.fetchStatus!=="idle"&&((d=$(this,Ze))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if($(this,Ze))return $(this,Ze).continueRetry(),$(this,Ze).promise}if(e&&this.setOptions(e),!this.options.queryFn){const j=this.observers.find(U=>U.options.queryFn);j&&this.setOptions(j.options)}const s=new AbortController,o=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(ce(this,Ps,!0),s.signal)})},a=()=>{const j=Qv(this.options,t),B=(()=>{const G={client:$(this,Rs),queryKey:this.queryKey,meta:this.meta};return o(G),G})();return ce(this,Ps,!1),this.options.persister?this.options.persister(j,B,this):j(B)},h=(()=>{const j={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:$(this,Rs),state:this.state,fetchFn:a};return o(j),j})();(p=this.options.behavior)==null||p.onFetch(h,this),ce(this,ji,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((v=h.fetchOptions)==null?void 0:v.meta))&&ut(this,Jt,bn).call(this,{type:"fetch",meta:(g=h.fetchOptions)==null?void 0:g.meta}),ce(this,Ze,Zv({initialPromise:t==null?void 0:t.initialPromise,fn:h.fetchFn,onCancel:j=>{j instanceof Gc&&j.revert&&this.setState({...$(this,ji),fetchStatus:"idle"}),s.abort()},onFail:(j,U)=>{ut(this,Jt,bn).call(this,{type:"failed",failureCount:j,error:U})},onPause:()=>{ut(this,Jt,bn).call(this,{type:"pause"})},onContinue:()=>{ut(this,Jt,bn).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0}));try{const j=await $(this,Ze).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(_=(w=$(this,$t).config).onSuccess)==null||_.call(w,j,this),(x=(S=$(this,$t).config).onSettled)==null||x.call(S,j,this.state.error,this),j}catch(j){if(j instanceof Gc){if(j.silent)return $(this,Ze).promise;if(j.revert){if(this.state.data===void 0)throw j;return this.state.data}}throw ut(this,Jt,bn).call(this,{type:"error",error:j}),(C=(k=$(this,$t).config).onError)==null||C.call(k,j,this),(P=(R=$(this,$t).config).onSettled)==null||P.call(R,this.state.data,j,this),j}finally{this.scheduleGc()}}},Ns=new WeakMap,ji=new WeakMap,$t=new WeakMap,Rs=new WeakMap,Ze=new WeakMap,eo=new WeakMap,Ps=new WeakMap,Jt=new WeakSet,bn=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Tb(s.data,this.options),fetchMeta:e.meta??null};case"success":const o={...s,...Zp(e.data,e.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ce(this,ji,e.manual?o:void 0),o;case"error":const a=e.error;return{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),ft.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),$(this,$t).notify({query:this,type:"updated",action:e})})},Ov);function Tb(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Yv(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Zp(n,e){return{data:n,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function em(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,s=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}function tm(n){return{onFetch:(e,t)=>{var v,g,w,_,S;const s=e.options,o=(w=(g=(v=e.fetchOptions)==null?void 0:v.meta)==null?void 0:g.fetchMore)==null?void 0:w.direction,a=((_=e.state.data)==null?void 0:_.pages)||[],u=((S=e.state.data)==null?void 0:S.pageParams)||[];let h={pages:[],pageParams:[]},d=0;const p=async()=>{let x=!1;const k=P=>{wb(P,()=>e.signal,()=>x=!0)},C=Qv(e.options,e.fetchOptions),R=async(P,j,U)=>{if(x)return Promise.reject();if(j==null&&P.pages.length)return Promise.resolve(P);const G=(()=>{const Le={client:e.client,queryKey:e.queryKey,pageParam:j,direction:U?"backward":"forward",meta:e.options.meta};return k(Le),Le})(),Q=await C(G),{maxPages:ie}=e.options,we=U?yb:gb;return{pages:we(P.pages,Q,ie),pageParams:we(P.pageParams,j,ie)}};if(o&&a.length){const P=o==="backward",j=P?jb:nm,U={pages:a,pageParams:u},B=j(s,U);h=await R(U,B,P)}else{const P=n??a.length;do{const j=d===0?u[0]??s.initialPageParam:nm(s,h);if(d>0&&j==null)break;h=await R(h,j),d++}while(d<P)}return h};e.options.persister?e.fetchFn=()=>{var x,k;return(k=(x=e.options).persister)==null?void 0:k.call(x,p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=p}}}function nm(n,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?n.getNextPageParam(e[s],e,t[s],t):void 0}function jb(n,{pages:e,pageParams:t}){var s;return e.length>0?(s=n.getPreviousPageParam)==null?void 0:s.call(n,e[0],e,t[0],t):void 0}var to,an,ct,Os,ln,Hn,Lv,Nb=(Lv=class extends eg{constructor(e){super();pe(this,ln);pe(this,to);pe(this,an);pe(this,ct);pe(this,Os);ce(this,to,e.client),this.mutationId=e.mutationId,ce(this,ct,e.mutationCache),ce(this,an,[]),this.state=e.state||Rb(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){$(this,an).includes(e)||($(this,an).push(e),this.clearGcTimeout(),$(this,ct).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ce(this,an,$(this,an).filter(t=>t!==e)),this.scheduleGc(),$(this,ct).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){$(this,an).length||(this.state.status==="pending"?this.scheduleGc():$(this,ct).remove(this))}continue(){var e;return((e=$(this,Os))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var u,h,d,p,v,g,w,_,S,x,k,C,R,P,j,U,B,G;const t=()=>{ut(this,ln,Hn).call(this,{type:"continue"})},s={client:$(this,to),meta:this.options.meta,mutationKey:this.options.mutationKey};ce(this,Os,Zv({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(Q,ie)=>{ut(this,ln,Hn).call(this,{type:"failed",failureCount:Q,error:ie})},onPause:()=>{ut(this,ln,Hn).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,ct).canRun(this)}));const o=this.state.status==="pending",a=!$(this,Os).canStart();try{if(o)t();else{ut(this,ln,Hn).call(this,{type:"pending",variables:e,isPaused:a}),$(this,ct).config.onMutate&&await $(this,ct).config.onMutate(e,this,s);const ie=await((h=(u=this.options).onMutate)==null?void 0:h.call(u,e,s));ie!==this.state.context&&ut(this,ln,Hn).call(this,{type:"pending",context:ie,variables:e,isPaused:a})}const Q=await $(this,Os).start();return await((p=(d=$(this,ct).config).onSuccess)==null?void 0:p.call(d,Q,e,this.state.context,this,s)),await((g=(v=this.options).onSuccess)==null?void 0:g.call(v,Q,e,this.state.context,s)),await((_=(w=$(this,ct).config).onSettled)==null?void 0:_.call(w,Q,null,this.state.variables,this.state.context,this,s)),await((x=(S=this.options).onSettled)==null?void 0:x.call(S,Q,null,e,this.state.context,s)),ut(this,ln,Hn).call(this,{type:"success",data:Q}),Q}catch(Q){try{await((C=(k=$(this,ct).config).onError)==null?void 0:C.call(k,Q,e,this.state.context,this,s))}catch(ie){Promise.reject(ie)}try{await((P=(R=this.options).onError)==null?void 0:P.call(R,Q,e,this.state.context,s))}catch(ie){Promise.reject(ie)}try{await((U=(j=$(this,ct).config).onSettled)==null?void 0:U.call(j,void 0,Q,this.state.variables,this.state.context,this,s))}catch(ie){Promise.reject(ie)}try{await((G=(B=this.options).onSettled)==null?void 0:G.call(B,void 0,Q,e,this.state.context,s))}catch(ie){Promise.reject(ie)}throw ut(this,ln,Hn).call(this,{type:"error",error:Q}),Q}finally{$(this,ct).runNext(this)}}},to=new WeakMap,an=new WeakMap,ct=new WeakMap,Os=new WeakMap,ln=new WeakSet,Hn=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),ft.batch(()=>{$(this,an).forEach(s=>{s.onMutationUpdate(e)}),$(this,ct).notify({mutation:this,type:"updated",action:e})})},Lv);function Rb(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _n,Qt,no,Av,Pb=(Av=class extends nl{constructor(e={}){super();pe(this,_n);pe(this,Qt);pe(this,no);this.config=e,ce(this,_n,new Set),ce(this,Qt,new Map),ce(this,no,0)}build(e,t,s){const o=new Nb({client:e,mutationCache:this,mutationId:++ba(this,no)._,options:e.defaultMutationOptions(t),state:s});return this.add(o),o}add(e){$(this,_n).add(e);const t=_a(e);if(typeof t=="string"){const s=$(this,Qt).get(t);s?s.push(e):$(this,Qt).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if($(this,_n).delete(e)){const t=_a(e);if(typeof t=="string"){const s=$(this,Qt).get(t);if(s)if(s.length>1){const o=s.indexOf(e);o!==-1&&s.splice(o,1)}else s[0]===e&&$(this,Qt).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=_a(e);if(typeof t=="string"){const s=$(this,Qt).get(t),o=s==null?void 0:s.find(a=>a.state.status==="pending");return!o||o===e}else return!0}runNext(e){var s;const t=_a(e);if(typeof t=="string"){const o=(s=$(this,Qt).get(t))==null?void 0:s.find(a=>a!==e&&a.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ft.batch(()=>{$(this,_n).forEach(e=>{this.notify({type:"removed",mutation:e})}),$(this,_n).clear(),$(this,Qt).clear()})}getAll(){return Array.from($(this,_n))}find(e){const t={exact:!0,...e};return this.getAll().find(s=>Qp(t,s))}findAll(e={}){return this.getAll().filter(t=>Qp(e,t))}notify(e){ft.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ft.batch(()=>Promise.all(e.map(t=>t.continue().catch(qt))))}},_n=new WeakMap,Qt=new WeakMap,no=new WeakMap,Av);function _a(n){var e;return(e=n.options.scope)==null?void 0:e.id}var un,Mv,Ob=(Mv=class extends nl{constructor(e={}){super();pe(this,un);this.config=e,ce(this,un,new Map)}build(e,t,s){const o=t.queryKey,a=t.queryHash??wh(o,t);let u=this.get(a);return u||(u=new Cb({client:e,queryKey:o,queryHash:a,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(o)}),this.add(u)),u}add(e){$(this,un).has(e.queryHash)||($(this,un).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=$(this,un).get(e.queryHash);t&&(e.destroy(),t===e&&$(this,un).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ft.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return $(this,un).get(e)}getAll(){return[...$(this,un).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>Jp(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>Jp(e,s)):t}notify(e){ft.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ft.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ft.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},un=new WeakMap,Mv),De,Zn,es,Ni,Ri,ts,Pi,Oi,Iv,Lb=(Iv=class{constructor(n={}){pe(this,De);pe(this,Zn);pe(this,es);pe(this,Ni);pe(this,Ri);pe(this,ts);pe(this,Pi);pe(this,Oi);ce(this,De,n.queryCache||new Ob),ce(this,Zn,n.mutationCache||new Pb),ce(this,es,n.defaultOptions||{}),ce(this,Ni,new Map),ce(this,Ri,new Map),ce(this,ts,0)}mount(){ba(this,ts)._++,$(this,ts)===1&&(ce(this,Pi,Xv.subscribe(async n=>{n&&(await this.resumePausedMutations(),$(this,De).onFocus())})),ce(this,Oi,Ha.subscribe(async n=>{n&&(await this.resumePausedMutations(),$(this,De).onOnline())})))}unmount(){var n,e;ba(this,ts)._--,$(this,ts)===0&&((n=$(this,Pi))==null||n.call(this),ce(this,Pi,void 0),(e=$(this,Oi))==null||e.call(this),ce(this,Oi,void 0))}isFetching(n){return $(this,De).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return $(this,Zn).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=$(this,De).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=$(this,De).build(this,e),s=t.state.data;return s===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(qc(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(n){return $(this,De).findAll(n).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(n,e,t){const s=this.defaultQueryOptions({queryKey:n}),o=$(this,De).get(s.queryHash),a=o==null?void 0:o.state.data,u=cb(e,a);if(u!==void 0)return $(this,De).build(this,s).setData(u,{...t,manual:!0})}setQueriesData(n,e,t){return ft.batch(()=>$(this,De).findAll(n).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=$(this,De).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=$(this,De);ft.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=$(this,De);return ft.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},s=ft.batch(()=>$(this,De).findAll(n).map(o=>o.cancel(t)));return Promise.all(s).then(qt).catch(qt)}invalidateQueries(n,e={}){return ft.batch(()=>($(this,De).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},s=ft.batch(()=>$(this,De).findAll(n).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let a=o.fetch(void 0,t);return t.throwOnError||(a=a.catch(qt)),o.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(qt)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=$(this,De).build(this,e);return t.isStaleByTime(qc(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(qt).catch(qt)}fetchInfiniteQuery(n){return n.behavior=tm(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(qt).catch(qt)}ensureInfiniteQueryData(n){return n.behavior=tm(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Ha.isOnline()?$(this,Zn).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,De)}getMutationCache(){return $(this,Zn)}getDefaultOptions(){return $(this,es)}setDefaultOptions(n){ce(this,es,n)}setQueryDefaults(n,e){$(this,Ni).set(Ur(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...$(this,Ni).values()],t={};return e.forEach(s=>{Fr(n,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(n,e){$(this,Ri).set(Ur(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...$(this,Ri).values()],t={};return e.forEach(s=>{Fr(n,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...$(this,es).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=wh(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===bh&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...$(this,es).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){$(this,De).clear(),$(this,Zn).clear()}},De=new WeakMap,Zn=new WeakMap,es=new WeakMap,Ni=new WeakMap,Ri=new WeakMap,ts=new WeakMap,Pi=new WeakMap,Oi=new WeakMap,Iv),Ab=z.createContext(void 0),Mb=({client:n,children:e})=>(z.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),y.jsx(Ab.Provider,{value:n,children:e}));function il(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function Ib(n,e,t,s){function o(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function h(v){try{p(s.next(v))}catch(g){u(g)}}function d(v){try{p(s.throw(v))}catch(g){u(g)}}function p(v){v.done?a(v.value):o(v.value).then(h,d)}p((s=s.apply(n,e||[])).next())})}const $b=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class xh extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class zb extends xh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class sm extends xh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class im extends xh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Jc;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Jc||(Jc={}));class Db{constructor(e,{headers:t={},customFetch:s,region:o=Jc.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=$b(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Ib(this,arguments,void 0,function*(t,s={}){var o;let a,u;try{const{headers:h,method:d,body:p,signal:v,timeout:g}=s;let w={},{region:_}=s;_||(_=this.region);const S=new URL(`${this.url}/${t}`);_&&_!=="any"&&(w["x-region"]=_,S.searchParams.set("forceFunctionRegion",_));let x;p&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",x=p):typeof p=="string"?(w["Content-Type"]="text/plain",x=p):typeof FormData<"u"&&p instanceof FormData?x=p:(w["Content-Type"]="application/json",x=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?x=JSON.stringify(p):x=p;let k=v;g&&(u=new AbortController,a=setTimeout(()=>u.abort(),g),v?(k=u.signal,v.addEventListener("abort",()=>u.abort())):k=u.signal);const C=yield this.fetch(S.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),h),body:x,signal:k}).catch(U=>{throw new zb(U)}),R=C.headers.get("x-relay-error");if(R&&R==="true")throw new sm(C);if(!C.ok)throw new im(C);let P=((o=C.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),j;return P==="application/json"?j=yield C.json():P==="application/octet-stream"||P==="application/pdf"?j=yield C.blob():P==="text/event-stream"?j=C:P==="multipart/form-data"?j=yield C.formData():j=yield C.text(),{data:j,error:null,response:C}}catch(h){return{data:null,error:h,response:h instanceof im||h instanceof sm?h.context:void 0}}finally{a&&clearTimeout(a)}})}}var Ub=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},Fb=class{constructor(n){var e,t,s;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(e=n.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=n.signal,this.isMaybeSingle=(t=n.isMaybeSingle)!==null&&t!==void 0?t:!1,this.urlLengthLimit=(s=n.urlLengthLimit)!==null&&s!==void 0?s:8e3,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=new Headers(this.headers),this.headers.set(n,e),this}then(n,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let o=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let u=null,h=null,d=null,p=a.status,v=a.statusText;if(a.ok){var g,w;if(t.method!=="HEAD"){var _;const C=await a.text();C===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((_=t.headers.get("Accept"))===null||_===void 0)&&_.includes("application/vnd.pgrst.plan+text"))?h=C:h=JSON.parse(C))}const x=(g=t.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),k=(w=a.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");x&&k&&k.length>1&&(d=parseInt(k[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,d=null,p=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{var S;const x=await a.text();try{u=JSON.parse(x),Array.isArray(u)&&a.status===404&&(h=[],u=null,p=200,v="OK")}catch{a.status===404&&x===""?(p=204,v="No Content"):u={message:x}}if(u&&t.isMaybeSingle&&(!(u==null||(S=u.details)===null||S===void 0)&&S.includes("0 rows"))&&(u=null,p=200,v="OK"),u&&t.shouldThrowOnError)throw new Ub(u)}return{error:u,data:h,count:d,status:p,statusText:v}});return this.shouldThrowOnError||(o=o.catch(a=>{var u;let h="",d="",p="";const v=a==null?void 0:a.cause;if(v){var g,w,_,S;const C=(g=v==null?void 0:v.message)!==null&&g!==void 0?g:"",R=(w=v==null?void 0:v.code)!==null&&w!==void 0?w:"";h=`${(_=a==null?void 0:a.name)!==null&&_!==void 0?_:"FetchError"}: ${a==null?void 0:a.message}`,h+=`

Caused by: ${(S=v==null?void 0:v.name)!==null&&S!==void 0?S:"Error"}: ${C}`,R&&(h+=` (${R})`),v!=null&&v.stack&&(h+=`
${v.stack}`)}else{var x;h=(x=a==null?void 0:a.stack)!==null&&x!==void 0?x:""}const k=this.url.toString().length;return(a==null?void 0:a.name)==="AbortError"||(a==null?void 0:a.code)==="ABORT_ERR"?(p="",d="Request was aborted (timeout or manual cancellation)",k>this.urlLengthLimit&&(d+=`. Note: Your request URL is ${k} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((v==null?void 0:v.name)==="HeadersOverflowError"||(v==null?void 0:v.code)==="UND_ERR_HEADERS_OVERFLOW")&&(p="",d="HTTP headers exceeded server limits (typically 16KB)",k>this.urlLengthLimit&&(d+=`. Your request URL is ${k} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(u=a==null?void 0:a.name)!==null&&u!==void 0?u:"FetchError"}: ${a==null?void 0:a.message}`,details:h,hint:d,code:p},data:null,count:null,status:0,statusText:""}})),o.then(n,e)}returns(){return this}overrideTypes(){return this}},Bb=class extends Fb{select(n){let e=!1;const t=(n??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:e=!0,nullsFirst:t,foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.order`:"order",u=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${u?`${u},`:""}${n}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:e,referencedTable:t=e}={}){const s=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(s,`${n}`),this}range(n,e,{foreignTable:t,referencedTable:s=t}={}){const o=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${n}`),this.url.searchParams.set(a,`${e-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:e=!1,settings:t=!1,buffers:s=!1,wal:o=!1,format:a="text"}={}){var u;const h=[n?"analyze":null,e?"verbose":null,t?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${d}"; options=${h};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const rm=new RegExp("[,()]");var gi=class extends Bb{eq(n,e){return this.url.searchParams.append(n,`eq.${e}`),this}neq(n,e){return this.url.searchParams.append(n,`neq.${e}`),this}gt(n,e){return this.url.searchParams.append(n,`gt.${e}`),this}gte(n,e){return this.url.searchParams.append(n,`gte.${e}`),this}lt(n,e){return this.url.searchParams.append(n,`lt.${e}`),this}lte(n,e){return this.url.searchParams.append(n,`lte.${e}`),this}like(n,e){return this.url.searchParams.append(n,`like.${e}`),this}likeAllOf(n,e){return this.url.searchParams.append(n,`like(all).{${e.join(",")}}`),this}likeAnyOf(n,e){return this.url.searchParams.append(n,`like(any).{${e.join(",")}}`),this}ilike(n,e){return this.url.searchParams.append(n,`ilike.${e}`),this}ilikeAllOf(n,e){return this.url.searchParams.append(n,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(n,e){return this.url.searchParams.append(n,`ilike(any).{${e.join(",")}}`),this}regexMatch(n,e){return this.url.searchParams.append(n,`match.${e}`),this}regexIMatch(n,e){return this.url.searchParams.append(n,`imatch.${e}`),this}is(n,e){return this.url.searchParams.append(n,`is.${e}`),this}isDistinct(n,e){return this.url.searchParams.append(n,`isdistinct.${e}`),this}in(n,e){const t=Array.from(new Set(e)).map(s=>typeof s=="string"&&rm.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(n,`in.(${t})`),this}notIn(n,e){const t=Array.from(new Set(e)).map(s=>typeof s=="string"&&rm.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(n,`not.in.(${t})`),this}contains(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cs.{${e.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(e)}`),this}containedBy(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cd.{${e.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(e)}`),this}rangeGt(n,e){return this.url.searchParams.append(n,`sr.${e}`),this}rangeGte(n,e){return this.url.searchParams.append(n,`nxl.${e}`),this}rangeLt(n,e){return this.url.searchParams.append(n,`sl.${e}`),this}rangeLte(n,e){return this.url.searchParams.append(n,`nxr.${e}`),this}rangeAdjacent(n,e){return this.url.searchParams.append(n,`adj.${e}`),this}overlaps(n,e){return typeof e=="string"?this.url.searchParams.append(n,`ov.${e}`):this.url.searchParams.append(n,`ov.{${e.join(",")}}`),this}textSearch(n,e,{config:t,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const a=t===void 0?"":`(${t})`;return this.url.searchParams.append(n,`${o}fts${a}.${e}`),this}match(n){return Object.entries(n).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(n,e,t){return this.url.searchParams.append(n,`not.${e}.${t}`),this}or(n,{foreignTable:e,referencedTable:t=e}={}){const s=t?`${t}.or`:"or";return this.url.searchParams.append(s,`(${n})`),this}filter(n,e,t){return this.url.searchParams.append(n,`${e}.${t}`),this}},Vb=class{constructor(n,{headers:e={},schema:t,fetch:s,urlLengthLimit:o=8e3}){this.url=n,this.headers=new Headers(e),this.schema=t,this.fetch=s,this.urlLengthLimit=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,e){const{head:t=!1,count:s}=e??{},o=t?"HEAD":"GET";let a=!1;const u=(n??"*").split("").map(p=>/\s/.test(p)&&!a?"":(p==='"'&&(a=!a),p)).join(""),{url:h,headers:d}=this.cloneRequestState();return h.searchParams.set("select",u),s&&d.append("Prefer",`count=${s}`),new gi({method:o,url:h,headers:d,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(n,{count:e,defaultToNull:t=!0}={}){var s;const o="POST",{url:a,headers:u}=this.cloneRequestState();if(e&&u.append("Prefer",`count=${e}`),t||u.append("Prefer","missing=default"),Array.isArray(n)){const h=n.reduce((d,p)=>d.concat(Object.keys(p)),[]);if(h.length>0){const d=[...new Set(h)].map(p=>`"${p}"`);a.searchParams.set("columns",d.join(","))}}return new gi({method:o,url:a,headers:u,schema:this.schema,body:n,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(n,{onConflict:e,ignoreDuplicates:t=!1,count:s,defaultToNull:o=!0}={}){var a;const u="POST",{url:h,headers:d}=this.cloneRequestState();if(d.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&h.searchParams.set("on_conflict",e),s&&d.append("Prefer",`count=${s}`),o||d.append("Prefer","missing=default"),Array.isArray(n)){const p=n.reduce((v,g)=>v.concat(Object.keys(g)),[]);if(p.length>0){const v=[...new Set(p)].map(g=>`"${g}"`);h.searchParams.set("columns",v.join(","))}}return new gi({method:u,url:h,headers:d,schema:this.schema,body:n,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}update(n,{count:e}={}){var t;const s="PATCH",{url:o,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new gi({method:s,url:o,headers:a,schema:this.schema,body:n,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:n}={}){var e;const t="DELETE",{url:s,headers:o}=this.cloneRequestState();return n&&o.append("Prefer",`count=${n}`),new gi({method:t,url:s,headers:o,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function Br(n){"@babel/helpers - typeof";return Br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Br(n)}function Wb(n,e){if(Br(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e);if(Br(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Kb(n){var e=Wb(n,"string");return Br(e)=="symbol"?e:e+""}function qb(n,e,t){return(e=Kb(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function om(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,s)}return t}function Sa(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?om(Object(t),!0).forEach(function(s){qb(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):om(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}var Hb=class tg{constructor(e,{headers:t={},schema:s,fetch:o,timeout:a,urlLengthLimit:u=8e3}={}){this.url=e,this.headers=new Headers(t),this.schemaName=s,this.urlLengthLimit=u;const h=o??globalThis.fetch;a!==void 0&&a>0?this.fetch=(d,p)=>{const v=new AbortController,g=setTimeout(()=>v.abort(),a),w=p==null?void 0:p.signal;if(w){if(w.aborted)return clearTimeout(g),h(d,p);const _=()=>{clearTimeout(g),v.abort()};return w.addEventListener("abort",_,{once:!0}),h(d,Sa(Sa({},p),{},{signal:v.signal})).finally(()=>{clearTimeout(g),w.removeEventListener("abort",_)})}return h(d,Sa(Sa({},p),{},{signal:v.signal})).finally(()=>clearTimeout(g))}:this.fetch=h}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Vb(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new tg(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,t={},{head:s=!1,get:o=!1,count:a}={}){var u;let h;const d=new URL(`${this.url}/rpc/${e}`);let p;const v=_=>_!==null&&typeof _=="object"&&(!Array.isArray(_)||_.some(v)),g=s&&Object.values(t).some(v);g?(h="POST",p=t):s||o?(h=s?"HEAD":"GET",Object.entries(t).filter(([_,S])=>S!==void 0).map(([_,S])=>[_,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([_,S])=>{d.searchParams.append(_,S)})):(h="POST",p=t);const w=new Headers(this.headers);return g?w.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&w.set("Prefer",`count=${a}`),new gi({method:h,url:d,headers:w,schema:this.schemaName,body:p,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch,urlLengthLimit:this.urlLengthLimit})}};class Gb{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const s=t.versions;if(s&&s.node){const o=s.node,a=parseInt(o.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Jb="2.97.0",Qb=`realtime-js/${Jb}`,Xb="1.0.0",ng="2.0.0",am=ng,Qc=1e4,Yb=1e3,Zb=100;var Gn;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Gn||(Gn={}));var Je;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Je||(Je={}));var Xt;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Xt||(Xt={}));var Xc;(function(n){n.websocket="websocket"})(Xc||(Xc={}));var ks;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(ks||(ks={}));class ex{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,s;const o=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var t,s;const o=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,t,s){var o,a;const u=e.topic,h=(o=e.ref)!==null&&o!==void 0?o:"",d=(a=e.join_ref)!==null&&a!==void 0?a:"",p=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},g=Object.keys(v).length===0?"":JSON.stringify(v);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`metadata length ${g.length} exceeds maximum of 255`);const w=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+h.length+u.length+p.length+g.length,_=new ArrayBuffer(this.HEADER_LENGTH+w);let S=new DataView(_),x=0;S.setUint8(x++,this.KINDS.userBroadcastPush),S.setUint8(x++,d.length),S.setUint8(x++,h.length),S.setUint8(x++,u.length),S.setUint8(x++,p.length),S.setUint8(x++,g.length),S.setUint8(x++,t),Array.from(d,C=>S.setUint8(x++,C.charCodeAt(0))),Array.from(h,C=>S.setUint8(x++,C.charCodeAt(0))),Array.from(u,C=>S.setUint8(x++,C.charCodeAt(0))),Array.from(p,C=>S.setUint8(x++,C.charCodeAt(0))),Array.from(g,C=>S.setUint8(x++,C.charCodeAt(0)));var k=new Uint8Array(_.byteLength+s.byteLength);return k.set(new Uint8Array(_),0),k.set(new Uint8Array(s),_.byteLength),k.buffer}decode(e,t){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return t(s)}if(typeof e=="string"){const s=JSON.parse(e),[o,a,u,h,d]=s;return t({join_ref:o,ref:a,topic:u,event:h,payload:d})}return t({})}_binaryDecode(e){const t=new DataView(e),s=t.getUint8(0),o=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,o)}}_decodeUserBroadcast(e,t,s){const o=t.getUint8(1),a=t.getUint8(2),u=t.getUint8(3),h=t.getUint8(4);let d=this.HEADER_LENGTH+4;const p=s.decode(e.slice(d,d+o));d=d+o;const v=s.decode(e.slice(d,d+a));d=d+a;const g=s.decode(e.slice(d,d+u));d=d+u;const w=e.slice(d,e.byteLength),_=h===this.JSON_ENCODING?JSON.parse(s.decode(w)):w,S={type:this.BROADCAST_EVENT,event:v,payload:_};return u>0&&(S.meta=JSON.parse(g)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>t.includes(s)))}}class sg{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Te;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Te||(Te={}));const lm=(n,e,t={})=>{var s;const o=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((a,u)=>(a[u]=tx(u,n,e,o),a),{}):{}},tx=(n,e,t,s)=>{const o=e.find(h=>h.name===n),a=o==null?void 0:o.type,u=t[n];return a&&!s.includes(a)?ig(a,u):Yc(u)},ig=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return rx(e,t)}switch(n){case Te.bool:return nx(e);case Te.float4:case Te.float8:case Te.int2:case Te.int4:case Te.int8:case Te.numeric:case Te.oid:return sx(e);case Te.json:case Te.jsonb:return ix(e);case Te.timestamp:return ox(e);case Te.abstime:case Te.date:case Te.daterange:case Te.int4range:case Te.int8range:case Te.money:case Te.reltime:case Te.text:case Te.time:case Te.timestamptz:case Te.timetz:case Te.tsrange:case Te.tstzrange:return Yc(e);default:return Yc(e)}},Yc=n=>n,nx=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},sx=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},ix=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},rx=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let a;const u=n.slice(1,t);try{a=JSON.parse("["+u+"]")}catch{a=u?u.split(","):[]}return a.map(h=>ig(e,h))}return n},ox=n=>typeof n=="string"?n.replace(" ","T"):n,rg=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class pc{constructor(e,t,s={},o=Qc){this.channel=e,this.event=t,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var um;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(um||(um={}));class Or{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:a,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Or.syncState(this.state,o,a,u),this.pendingDiffs.forEach(d=>{this.state=Or.syncDiff(this.state,d,a,u)}),this.pendingDiffs=[],h()}),this.channel._on(s.diff,{},o=>{const{onJoin:a,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Or.syncDiff(this.state,o,a,u),h())}),this.onJoin((o,a,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:u})}),this.onLeave((o,a,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,o){const a=this.cloneDeep(e),u=this.transformState(t),h={},d={};return this.map(a,(p,v)=>{u[p]||(d[p]=v)}),this.map(u,(p,v)=>{const g=a[p];if(g){const w=v.map(k=>k.presence_ref),_=g.map(k=>k.presence_ref),S=v.filter(k=>_.indexOf(k.presence_ref)<0),x=g.filter(k=>w.indexOf(k.presence_ref)<0);S.length>0&&(h[p]=S),x.length>0&&(d[p]=x)}else h[p]=v}),this.syncDiff(a,{joins:h,leaves:d},s,o)}static syncDiff(e,t,s,o){const{joins:a,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(a,(h,d)=>{var p;const v=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(d),v.length>0){const g=e[h].map(_=>_.presence_ref),w=v.filter(_=>g.indexOf(_.presence_ref)<0);e[h].unshift(...w)}s(h,v,d)}),this.map(u,(h,d)=>{let p=e[h];if(!p)return;const v=d.map(g=>g.presence_ref);p=p.filter(g=>v.indexOf(g.presence_ref)<0),e[h]=p,o(h,p,d),p.length===0&&delete e[h]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const o=e[s];return"metas"in o?t[s]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[s]=o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cm;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(cm||(cm={}));var Lr;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Lr||(Lr={}));var xn;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(xn||(xn={}));class bi{constructor(e,t={config:{}},s){var o,a;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Je.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new pc(this,Xt.join,this.params,this.timeout),this.rejoinTimer=new sg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Je.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Je.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xt.reply,{},(u,h)=>{this._trigger(this._replyEventName(h),u)}),this.presence=new Or(this),this.broadcastEndpointURL=rg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Je.closed){const{config:{broadcast:u,presence:h,private:d}}=this.params,p=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(_=>_.filter))!==null&&o!==void 0?o:[],v=!!this.bindings[Lr.PRESENCE]&&this.bindings[Lr.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,g={},w={broadcast:u,presence:Object.assign(Object.assign({},h),{enabled:v}),postgres_changes:p,private:d};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(_=>e==null?void 0:e(xn.CHANNEL_ERROR,_)),this._onClose(()=>e==null?void 0:e(xn.CLOSED)),this.updateJoinPayload(Object.assign({config:w},g)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:_})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),_===void 0){e==null||e(xn.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,k=(S=x==null?void 0:x.length)!==null&&S!==void 0?S:0,C=[];for(let R=0;R<k;R++){const P=x[R],{filter:{event:j,schema:U,table:B,filter:G}}=P,Q=_&&_[R];if(Q&&Q.event===j&&bi.isFilterValueEqual(Q.schema,U)&&bi.isFilterValueEqual(Q.table,B)&&bi.isFilterValueEqual(Q.filter,G))C.push(Object.assign(Object.assign({},P),{id:Q.id}));else{this.unsubscribe(),this.state=Je.errored,e==null||e(xn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(xn.SUBSCRIBED);return}}).receive("error",_=>{this.state=Je.errored,e==null||e(xn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(xn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Je.joined&&e===Lr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,s)}async httpSend(e,t,s={}){var o;if(t==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(h.status===202)return{success:!0};let d=h.statusText;try{const p=await h.json();d=p.error||p.message||d}catch{}return Promise.reject(new Error(d))}async send(e,t={}){var s,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:u}=e,h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var u,h,d;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),p.receive("ok",()=>a("ok")),p.receive("error",()=>a("error")),p.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Je.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new pc(this,Xt.leave,{},e),s.receive("ok",()=>{t(),o("ok")}).receive("timeout",()=>{t(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Je.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const o=new AbortController,a=setTimeout(()=>o.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(a),u}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new pc(this,e,t,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Zb){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var o,a;const u=e.toLocaleLowerCase(),{close:h,error:d,leave:p,join:v}=Xt;if(s&&[h,d,p,v].indexOf(u)>=0&&s!==this._joinRef())return;let w=this._onMessage(u,t,s);if(t&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(_=>{var S,x,k;return((S=_.filter)===null||S===void 0?void 0:S.event)==="*"||((k=(x=_.filter)===null||x===void 0?void 0:x.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===u}).map(_=>_.callback(w,s)):(a=this.bindings[u])===null||a===void 0||a.filter(_=>{var S,x,k,C,R,P;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in _){const j=_.id,U=(S=_.filter)===null||S===void 0?void 0:S.event;return j&&((x=t.ids)===null||x===void 0?void 0:x.includes(j))&&(U==="*"||(U==null?void 0:U.toLocaleLowerCase())===((k=t.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const j=(R=(C=_==null?void 0:_.filter)===null||C===void 0?void 0:C.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return j==="*"||j===((P=t==null?void 0:t.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===u}).map(_=>{if(typeof w=="object"&&"ids"in w){const S=w.data,{schema:x,table:k,commit_timestamp:C,type:R,errors:P}=S;w=Object.assign(Object.assign({},{schema:x,table:k,commit_timestamp:C,eventType:R,new:{},old:{},errors:P}),this._getPayloadRecords(S))}_.callback(w,s)})}_isClosed(){return this.state===Je.closed}_isJoined(){return this.state===Je.joined}_isJoining(){return this.state===Je.joining}_isLeaving(){return this.state===Je.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const o=e.toLocaleLowerCase(),a={type:o,filter:t,callback:s};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&bi.isEqual(o.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Xt.close,{},e)}_onError(e){this._on(Xt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Je.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=lm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=lm(e.columns,e.old_record)),t}}const mc=()=>{},ka={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ax=[1e3,2e3,5e3,1e4],lx=1e4,ux=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class cx{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Qc,this.transport=null,this.heartbeatIntervalMs=ka.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=mc,this.ref=0,this.reconnectTimer=null,this.vsn=am,this.logger=mc,this.conn=null,this.sendBuffer=[],this.serializer=new ex,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...a)=>o(...a):(...a)=>fetch(...a),!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Xc.websocket}`,this.httpEndpoint=rg(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gb.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Gn.connecting:return ks.Connecting;case Gn.open:return ks.Open;case Gn.closing:return ks.Closing;default:return ks.Closed}}isConnected(){return this.connectionState()===ks.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,o=this.getChannels().find(a=>a.topic===s);if(o)return o;{const a=new bi(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:s,payload:o,ref:a}=e,u=()=>{this.encode(e,h=>{var d;(d=this.conn)===null||d===void 0||d.send(h)})};this.log("push",`${t} ${s} (${a})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Yb,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},ka.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",p)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:o,payload:a,ref:u}=t,h=u?`(${u})`:"",d=a.status||"";this.log("receive",`${d} ${s} ${o} ${h}`.trim(),a),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(o,a,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Gn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Gn.open||this.conn.readyState===Gn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(t){this.log("error","error in heartbeat callback",t)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Xt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return`${e}${s}${o}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([ux],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,s=!1;if(e)t=e,s=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),t=this.accessTokenValue}else t=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(o=>{const a={access_token:t,version:Qb};t&&o.updateJoinPayload(a),o.joinedOnce&&o._isJoined()&&o._push(Xt.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new sg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ka.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,o,a,u,h,d,p,v,g,w,_;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Qc,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:ka.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(h=e==null?void 0:e.heartbeatCallback)!==null&&h!==void 0?h:mc,this.vsn=(d=e==null?void 0:e.vsn)!==null&&d!==void 0?d:am,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(S=>ax[S-1]||lx),this.vsn){case Xb:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((S,x)=>x(JSON.stringify(S))),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:((S,x)=>x(JSON.parse(S)));break;case ng:this.encode=(w=e==null?void 0:e.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Vr=class extends Error{constructor(n,e){var t;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function hx(n,e,t){const s=new URL(e,n);if(t)for(const[o,a]of Object.entries(t))a!==void 0&&s.searchParams.set(o,a);return s.toString()}async function dx(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function fx(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:s,query:o,body:a,headers:u}){const h=hx(n.baseUrl,s,o),d=await dx(n.auth),p=await e(h,{method:t,headers:{...a?{"Content-Type":"application/json"}:{},...d,...u},body:a?JSON.stringify(a):void 0}),v=await p.text(),g=(p.headers.get("content-type")||"").includes("application/json"),w=g&&v?JSON.parse(v):v;if(!p.ok){const _=g?w:void 0,S=_==null?void 0:_.error;throw new Vr((S==null?void 0:S.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:S==null?void 0:S.type,icebergCode:S==null?void 0:S.code,details:_})}return{status:p.status,headers:p.headers,data:w}}}}function Ea(n){return n.join("")}var px=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:Ea(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ea(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ea(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ea(n.namespace)}`}),!0}catch(e){if(e instanceof Vr&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof Vr&&t.status===409)return;throw t}}};function ci(n){return n.join("")}var mx=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ci(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ci(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ci(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ci(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ci(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ci(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof Vr&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof Vr&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},vx=class{constructor(n){var s;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=fx({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(s=n.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new px(this.client,e),this.tableOps=new mx(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}},rl=class extends Error{constructor(n,e="storage",t,s){super(n),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=t,this.statusCode=s}};function ol(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Ca=class extends rl{constructor(n,e,t,s="storage"){super(n,s,e,t),this.name=s==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},og=class extends rl{constructor(n,e,t="storage"){super(n,t),this.name=t==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const gx=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),yx=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Zc=n=>{if(Array.isArray(n))return n.map(t=>Zc(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const o=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[o]=Zc(s)}),e},wx=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function Wr(n){"@babel/helpers - typeof";return Wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wr(n)}function bx(n,e){if(Wr(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e);if(Wr(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function xx(n){var e=bx(n,"string");return Wr(e)=="symbol"?e:e+""}function _x(n,e,t){return(e=xx(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,s)}return t}function ae(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hm(Object(t),!0).forEach(function(s){_x(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):hm(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}const dm=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},Sx=async(n,e,t,s)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const o=n,a=o.status||500;if(typeof o.json=="function")o.json().then(u=>{const h=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||a+"";e(new Ca(dm(u),a,h,s))}).catch(()=>{if(s==="vectors"){const u=a+"";e(new Ca(o.statusText||`HTTP ${a} error`,a,u,s))}else{const u=a+"";e(new Ca(o.statusText||`HTTP ${a} error`,a,u,s))}});else{const u=a+"";e(new Ca(o.statusText||`HTTP ${a} error`,a,u,s))}}else e(new og(dm(n),n,s))},kx=(n,e,t,s)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||n==="HEAD"||!s?ae(ae({},o),t):(yx(s)?(o.headers=ae({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(s)):o.body=s,e!=null&&e.duplex&&(o.duplex=e.duplex),ae(ae({},o),t))};async function Er(n,e,t,s,o,a,u){return new Promise((h,d)=>{n(t,kx(e,s,o,a)).then(p=>{if(!p.ok)throw p;if(s!=null&&s.noResolveJson)return p;if(u==="vectors"){const v=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!v||!v.includes("application/json"))return{}}return p.json()}).then(p=>h(p)).catch(p=>Sx(p,d,s,u))})}function ag(n="storage"){return{get:async(e,t,s,o)=>Er(e,"GET",t,s,o,void 0,n),post:async(e,t,s,o,a)=>Er(e,"POST",t,o,a,s,n),put:async(e,t,s,o,a)=>Er(e,"PUT",t,o,a,s,n),head:async(e,t,s,o)=>Er(e,"HEAD",t,ae(ae({},s),{},{noResolveJson:!0}),o,void 0,n),remove:async(e,t,s,o,a)=>Er(e,"DELETE",t,o,a,s,n)}}const Ex=ag("storage"),{get:Kr,post:Ht,put:eh,head:Cx,remove:_h}=Ex,Nt=ag("vectors");var zi=class{constructor(n,e={},t,s="storage"){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.fetch=gx(t),this.namespace=s}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=ae(ae({},this.headers),{},{[n]:e}),this}async handleOperation(n){var e=this;try{return{data:await n(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ol(t))return{data:null,error:t};throw t}}},Tx=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(ol(e))return{data:null,error:e};throw e}}};let lg;lg=Symbol.toStringTag;var jx=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[lg]="BlobDownloadBuilder",this.promise=null}asStream(){return new Tx(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(ol(e))return{data:null,error:e};throw e}}};const Nx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Rx=class extends zi{constructor(n,e={},t,s){super(n,e,s,"storage"),this.bucketId=t}async uploadOrUpdate(n,e,t,s){var o=this;return o.handleOperation(async()=>{let a;const u=ae(ae({},fm),s);let h=ae(ae({},o.headers),n==="POST"&&{"x-upsert":String(u.upsert)});const d=u.metadata;typeof Blob<"u"&&t instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),d&&a.append("metadata",o.encodeMetadata(d)),a.append("",t)):typeof FormData<"u"&&t instanceof FormData?(a=t,a.has("cacheControl")||a.append("cacheControl",u.cacheControl),d&&!a.has("metadata")&&a.append("metadata",o.encodeMetadata(d))):(a=t,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,d&&(h["x-metadata"]=o.toBase64(o.encodeMetadata(d))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!u.duplex&&(u.duplex="half")),s!=null&&s.headers&&(h=ae(ae({},h),s.headers));const p=o._removeEmptyFolders(e),v=o._getFinalPath(p),g=await(n=="PUT"?eh:Ht)(o.fetch,`${o.url}/object/${v}`,a,ae({headers:h},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{path:p,id:g.Id,fullPath:g.Key}})}async upload(n,e,t){return this.uploadOrUpdate("POST",n,e,t)}async uploadToSignedUrl(n,e,t,s){var o=this;const a=o._removeEmptyFolders(n),u=o._getFinalPath(a),h=new URL(o.url+`/object/upload/sign/${u}`);return h.searchParams.set("token",e),o.handleOperation(async()=>{let d;const p=ae({upsert:fm.upsert},s),v=ae(ae({},o.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&t instanceof Blob?(d=new FormData,d.append("cacheControl",p.cacheControl),d.append("",t)):typeof FormData<"u"&&t instanceof FormData?(d=t,d.append("cacheControl",p.cacheControl)):(d=t,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType),{path:a,fullPath:(await eh(o.fetch,h.toString(),d,{headers:v})).Key}})}async createSignedUploadUrl(n,e){var t=this;return t.handleOperation(async()=>{let s=t._getFinalPath(n);const o=ae({},t.headers);e!=null&&e.upsert&&(o["x-upsert"]="true");const a=await Ht(t.fetch,`${t.url}/object/upload/sign/${s}`,{},{headers:o}),u=new URL(t.url+a.url),h=u.searchParams.get("token");if(!h)throw new rl("No token returned by API");return{signedUrl:u.toString(),path:n,token:h}})}async update(n,e,t){return this.uploadOrUpdate("PUT",n,e,t)}async move(n,e,t){var s=this;return s.handleOperation(async()=>await Ht(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:s.headers}))}async copy(n,e,t){var s=this;return s.handleOperation(async()=>({path:(await Ht(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:s.headers})).Key}))}async createSignedUrl(n,e,t){var s=this;return s.handleOperation(async()=>{let o=s._getFinalPath(n),a=await Ht(s.fetch,`${s.url}/object/sign/${o}`,ae({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:s.headers});const u=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{signedUrl:encodeURI(`${s.url}${a.signedURL}${u}`)}})}async createSignedUrls(n,e,t){var s=this;return s.handleOperation(async()=>{const o=await Ht(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:n},{headers:s.headers}),a=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return o.map(u=>ae(ae({},u),{},{signedUrl:u.signedURL?encodeURI(`${s.url}${u.signedURL}${a}`):null}))})}download(n,e,t){const s=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),a=o?`?${o}`:"",u=this._getFinalPath(n),h=()=>Kr(this.fetch,`${this.url}/${s}/${u}${a}`,{headers:this.headers,noResolveJson:!0},t);return new jx(h,this.shouldThrowOnError)}async info(n){var e=this;const t=e._getFinalPath(n);return e.handleOperation(async()=>Zc(await Kr(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})))}async exists(n){var e=this;const t=e._getFinalPath(n);try{return await Cx(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(ol(s)&&s instanceof og){const o=s.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:s}}throw s}}getPublicUrl(n,e){const t=this._getFinalPath(n),s=[],o=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&s.push(o);const a=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});u!==""&&s.push(u);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${t}${h}`)}}}async remove(n){var e=this;return e.handleOperation(async()=>await _h(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:n},{headers:e.headers}))}async list(n,e,t){var s=this;return s.handleOperation(async()=>{const o=ae(ae(ae({},Nx),e),{},{prefix:n||""});return await Ht(s.fetch,`${s.url}/object/list/${s.bucketId}`,o,{headers:s.headers},t)})}async listV2(n,e){var t=this;return t.handleOperation(async()=>{const s=ae({},n);return await Ht(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,s,{headers:t.headers},e)})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}};const Px="2.97.0",io={"X-Client-Info":`storage-js/${Px}`};var Ox=class extends zi{constructor(n,e={},t,s){const o=new URL(n);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."));const a=o.href.replace(/\/$/,""),u=ae(ae({},io),e);super(a,u,t,"storage")}async listBuckets(n){var e=this;return e.handleOperation(async()=>{const t=e.listBucketOptionsToQueryString(n);return await Kr(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers})})}async getBucket(n){var e=this;return e.handleOperation(async()=>await Kr(e.fetch,`${e.url}/bucket/${n}`,{headers:e.headers}))}async createBucket(n,e={public:!1}){var t=this;return t.handleOperation(async()=>await Ht(t.fetch,`${t.url}/bucket`,{id:n,name:n,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async updateBucket(n,e){var t=this;return t.handleOperation(async()=>await eh(t.fetch,`${t.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async emptyBucket(n){var e=this;return e.handleOperation(async()=>await Ht(e.fetch,`${e.url}/bucket/${n}/empty`,{},{headers:e.headers}))}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await _h(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(n){const e={};return n&&("limit"in n&&(e.limit=String(n.limit)),"offset"in n&&(e.offset=String(n.offset)),n.search&&(e.search=n.search),n.sortColumn&&(e.sortColumn=n.sortColumn),n.sortOrder&&(e.sortOrder=n.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Lx=class extends zi{constructor(n,e={},t){const s=n.replace(/\/$/,""),o=ae(ae({},io),e);super(s,o,t,"storage")}async createBucket(n){var e=this;return e.handleOperation(async()=>await Ht(e.fetch,`${e.url}/bucket`,{name:n},{headers:e.headers}))}async listBuckets(n){var e=this;return e.handleOperation(async()=>{const t=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&t.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&t.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&t.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&t.set("sortOrder",n.sortOrder),n!=null&&n.search&&t.set("search",n.search);const s=t.toString(),o=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return await Kr(e.fetch,o,{headers:e.headers})})}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await _h(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}))}from(n){var e=this;if(!wx(n))throw new rl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new vx({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(t,{get(o,a){const u=o[a];return typeof u!="function"?u:async(...h)=>{try{return{data:await u.apply(o,h),error:null}}catch(d){if(s)throw d;return{data:null,error:d}}}}})}},Ax=class extends zi{constructor(n,e={},t){const s=n.replace(/\/$/,""),o=ae(ae({},io),{},{"Content-Type":"application/json"},e);super(s,o,t,"vectors")}async createIndex(n){var e=this;return e.handleOperation(async()=>await Nt.post(e.fetch,`${e.url}/CreateIndex`,n,{headers:e.headers})||{})}async getIndex(n,e){var t=this;return t.handleOperation(async()=>await Nt.post(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers}))}async listIndexes(n){var e=this;return e.handleOperation(async()=>await Nt.post(e.fetch,`${e.url}/ListIndexes`,n,{headers:e.headers}))}async deleteIndex(n,e){var t=this;return t.handleOperation(async()=>await Nt.post(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers})||{})}},Mx=class extends zi{constructor(n,e={},t){const s=n.replace(/\/$/,""),o=ae(ae({},io),{},{"Content-Type":"application/json"},e);super(s,o,t,"vectors")}async putVectors(n){var e=this;if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Nt.post(e.fetch,`${e.url}/PutVectors`,n,{headers:e.headers})||{})}async getVectors(n){var e=this;return e.handleOperation(async()=>await Nt.post(e.fetch,`${e.url}/GetVectors`,n,{headers:e.headers}))}async listVectors(n){var e=this;if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return e.handleOperation(async()=>await Nt.post(e.fetch,`${e.url}/ListVectors`,n,{headers:e.headers}))}async queryVectors(n){var e=this;return e.handleOperation(async()=>await Nt.post(e.fetch,`${e.url}/QueryVectors`,n,{headers:e.headers}))}async deleteVectors(n){var e=this;if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Nt.post(e.fetch,`${e.url}/DeleteVectors`,n,{headers:e.headers})||{})}},Ix=class extends zi{constructor(n,e={},t){const s=n.replace(/\/$/,""),o=ae(ae({},io),{},{"Content-Type":"application/json"},e);super(s,o,t,"vectors")}async createBucket(n){var e=this;return e.handleOperation(async()=>await Nt.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{})}async getBucket(n){var e=this;return e.handleOperation(async()=>await Nt.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:n},{headers:e.headers}))}async listBuckets(n={}){var e=this;return e.handleOperation(async()=>await Nt.post(e.fetch,`${e.url}/ListVectorBuckets`,n,{headers:e.headers}))}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await Nt.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{})}},$x=class extends Ix{constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new zx(this.url,this.headers,n,this.fetch)}async createBucket(n){var e=()=>super.createBucket,t=this;return e().call(t,n)}async getBucket(n){var e=()=>super.getBucket,t=this;return e().call(t,n)}async listBuckets(n={}){var e=()=>super.listBuckets,t=this;return e().call(t,n)}async deleteBucket(n){var e=()=>super.deleteBucket,t=this;return e().call(t,n)}},zx=class extends Ax{constructor(n,e,t,s){super(n,e,s),this.vectorBucketName=t}async createIndex(n){var e=()=>super.createIndex,t=this;return e().call(t,ae(ae({},n),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(n={}){var e=()=>super.listIndexes,t=this;return e().call(t,ae(ae({},n),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(n){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,n)}async deleteIndex(n){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,n)}index(n){return new Dx(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},Dx=class extends Mx{constructor(n,e,t,s,o){super(n,e,o),this.vectorBucketName=t,this.indexName=s}async putVectors(n){var e=()=>super.putVectors,t=this;return e().call(t,ae(ae({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(n){var e=()=>super.getVectors,t=this;return e().call(t,ae(ae({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(n={}){var e=()=>super.listVectors,t=this;return e().call(t,ae(ae({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(n){var e=()=>super.queryVectors,t=this;return e().call(t,ae(ae({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(n){var e=()=>super.deleteVectors,t=this;return e().call(t,ae(ae({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},Ux=class extends Ox{constructor(n,e={},t,s){super(n,e,t,s)}from(n){return new Rx(this.url,this.headers,n,this.fetch)}get vectors(){return new $x(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Lx(this.url+"/iceberg",this.headers,this.fetch)}};const ug="2.97.0",yi=30*1e3,th=3,vc=th*yi,Fx="http://localhost:9999",Bx="supabase.auth.token",Vx={"X-Client-Info":`gotrue-js/${ug}`},nh="X-Supabase-Api-Version",cg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Wx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Kx=600*1e3;class qr extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function te(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class qx extends qr{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function Hx(n){return te(n)&&n.name==="AuthApiError"}class Es extends qr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Cn extends qr{constructor(e,t,s,o){super(e,s,o),this.name=t,this.status=s}}class Tt extends Cn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function gc(n){return te(n)&&n.name==="AuthSessionMissingError"}class hi extends Cn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ta extends Cn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ja extends Cn{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Gx(n){return te(n)&&n.name==="AuthImplicitGrantRedirectError"}class pm extends Cn{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Jx extends Cn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class sh extends Cn{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function yc(n){return te(n)&&n.name==="AuthRetryableFetchError"}class mm extends Cn{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class ih extends Cn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ga="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),vm=` 	
\r=`.split(""),Qx=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<vm.length;e+=1)n[vm[e].charCodeAt(0)]=-2;for(let e=0;e<Ga.length;e+=1)n[Ga[e].charCodeAt(0)]=e;return n})();function gm(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Ga[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Ga[s]),e.queuedBits-=6}}function hg(n,e,t){const s=Qx[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function ym(n){const e=[],t=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=u=>{Zx(u,s,t)};for(let u=0;u<n.length;u+=1)hg(n.charCodeAt(u),o,a);return e.join("")}function Xx(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Yx(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|o)+65536,t+=1}Xx(s,e)}}function Zx(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if((n>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Si(n){const e=[],t={queue:0,queuedBits:0},s=o=>{e.push(o)};for(let o=0;o<n.length;o+=1)hg(n.charCodeAt(o),t,s);return new Uint8Array(e)}function e_(n){const e=[];return Yx(n,t=>e.push(t)),new Uint8Array(e)}function Cs(n){const e=[],t={queue:0,queuedBits:0},s=o=>{e.push(o)};return n.forEach(o=>gm(o,t,s)),gm(null,t,s),e.join("")}function t_(n){return Math.round(Date.now()/1e3)+n}function n_(){return Symbol("auth-callback")}const st=()=>typeof window<"u"&&typeof document<"u",bs={tested:!1,writable:!1},dg=()=>{if(!st())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bs.tested)return bs.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),bs.tested=!0,bs.writable=!0}catch{bs.tested=!0,bs.writable=!1}return bs.writable};function s_(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((o,a)=>{e[a]=o})}catch{}return t.searchParams.forEach((s,o)=>{e[o]=s}),e}const fg=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),i_=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",wi=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},xs=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},nt=async(n,e)=>{await n.removeItem(e)};class al{constructor(){this.promise=new al.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}al.promiseConstructor=Promise;function Na(n){const e=n.split(".");if(e.length!==3)throw new ih("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Wx.test(e[s]))throw new ih("JWT not in base64url format");return{header:JSON.parse(ym(e[0])),payload:JSON.parse(ym(e[1])),signature:Si(e[2]),raw:{header:e[0],payload:e[1]}}}async function r_(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function o_(n,e){return new Promise((s,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const u=await n(a);if(!e(a,null,u)){s(u);return}}catch(u){if(!e(a,u)){o(u);return}}})()})}function a_(n){return("0"+n.toString(16)).substr(-2)}function l_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let o="";for(let a=0;a<56;a++)o+=t.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(e),Array.from(e,a_).join("")}async function u_(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(s);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function c_(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await u_(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function di(n,e,t=!1){const s=l_();let o=s;t&&(o+="/PASSWORD_RECOVERY"),await wi(n,`${e}-code-verifier`,o);const a=await c_(s);return[a,s===a?"plain":"s256"]}const h_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function d_(n){const e=n.headers.get(nh);if(!e||!e.match(h_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function f_(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function p_(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const m_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function fi(n){if(!m_.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function wc(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function v_(n,e){return new Proxy(n,{get:(t,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,s,o)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,s,o)}})}function wm(n){return JSON.parse(JSON.stringify(n))}const Ss=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),g_=[502,503,504];async function bm(n){var e;if(!i_(n))throw new sh(Ss(n),0);if(g_.includes(n.status))throw new sh(Ss(n),n.status);let t;try{t=await n.json()}catch(a){throw new Es(Ss(a),a)}let s;const o=d_(n);if(o&&o.getTime()>=cg["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new mm(Ss(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Tt}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,u)=>a&&typeof u=="string",!0))throw new mm(Ss(t),n.status,t.weak_password.reasons);throw new qx(Ss(t),n.status||500,s)}const y_=(n,e,t,s)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),t))};async function le(n,e,t,s){var o;const a=Object.assign({},s==null?void 0:s.headers);a[nh]||(a[nh]=cg["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const u=(o=s==null?void 0:s.query)!==null&&o!==void 0?o:{};s!=null&&s.redirectTo&&(u.redirect_to=s.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",d=await w_(n,e,t+h,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(d):{data:Object.assign({},d),error:null}}async function w_(n,e,t,s,o,a){const u=y_(e,s,o,a);let h;try{h=await n(t,Object.assign({},u))}catch(d){throw console.error(d),new sh(Ss(d),0)}if(h.ok||await bm(h),s!=null&&s.noResolveJson)return h;try{return await h.json()}catch(d){await bm(d)}}function Kt(n){var e;let t=null;__(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=t_(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function xm(n){const e=Kt(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Jn(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function b_(n){return{data:n,error:null}}function x_(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:o,verification_type:a}=n,u=il(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:t,hashed_token:s,redirect_to:o,verification_type:a},d=Object.assign({},u);return{data:{properties:h,user:d},error:null}}function _m(n){return n}function __(n){return n.access_token&&n.refresh_token&&n.expires_in}const bc=["global","local","others"];class S_{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=fg(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=bc[0]){if(bc.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bc.join(", ")}`);try{return await le(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(te(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await le(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Jn})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=il(e,["options"]),o=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(o.new_email=s==null?void 0:s.newEmail,delete o.newEmail),await le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:x_,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(te(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await le(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Jn})}catch(t){if(te(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,o,a,u,h,d;try{const p={nextPage:null,lastPage:0,total:0},v=await le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(a=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:_m});if(v.error)throw v.error;const g=await v.json(),w=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,_=(d=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&d!==void 0?d:[];return _.length>0&&(_.forEach(S=>{const x=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(S.split(";")[1].split("=")[1]);p[`${k}Page`]=x}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},g),p),error:null}}catch(p){if(te(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){fi(e);try{return await le(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Jn})}catch(t){if(te(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){fi(e);try{return await le(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Jn})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){fi(e);try{return await le(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Jn})}catch(s){if(te(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){fi(e.userId);try{const{data:t,error:s}=await le(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:t,error:s}}catch(t){if(te(t))return{data:null,error:t};throw t}}async _deleteFactor(e){fi(e.userId),fi(e.id);try{return{data:await le(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(te(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,o,a,u,h,d;try{const p={nextPage:null,lastPage:0,total:0},v=await le(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(a=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:_m});if(v.error)throw v.error;const g=await v.json(),w=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,_=(d=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&d!==void 0?d:[];return _.length>0&&(_.forEach(S=>{const x=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(S.split(";")[1].split("=")[1]);p[`${k}Page`]=x}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},g),p),error:null}}catch(p){if(te(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(te(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await le(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(te(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await le(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(te(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await le(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(te(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(te(t))return{data:null,error:t};throw t}}}function Sm(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const pi={debug:!!(globalThis&&dg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class km extends pg{}async function k_(n,e,t){pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;e>0&&setTimeout(()=>{s.abort(),pi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve();try{return await globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return await t()}finally{pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}}else{if(e===0)throw pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new km(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(pi.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}catch(o){throw(o==null?void 0:o.name)==="AbortError"?new km(`Acquiring an exclusive Navigator LockManager lock "${n}" timed out waiting ${e}ms`):o}}function E_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function mg(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function C_(n){return parseInt(n,16)}function T_(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function j_(n){var e;const{chainId:t,domain:s,expirationTime:o,issuedAt:a=new Date,nonce:u,notBefore:h,requestId:d,resources:p,scheme:v,uri:g,version:w}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const _=mg(n.address),S=v?`${v}://${s}`:s,x=n.statement?`${n.statement}
`:"",k=`${S} wants you to sign in with your Ethereum account:
${_}

${x}`;let C=`URI: ${g}
Version: ${w}
Chain ID: ${t}${u?`
Nonce: ${u}`:""}
Issued At: ${a.toISOString()}`;if(o&&(C+=`
Expiration Time: ${o.toISOString()}`),h&&(C+=`
Not Before: ${h.toISOString()}`),d&&(C+=`
Request ID: ${d}`),p){let R=`
Resources:`;for(const P of p){if(!P||typeof P!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${P}`);R+=`
- ${P}`}C+=R}return`${k}
${C}`}class qe extends Error{constructor({message:e,code:t,cause:s,name:o}){var a;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(a=o??(s instanceof Error?s.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=t}}class Ja extends qe{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function N_({error:n,options:e}){var t,s,o;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new qe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=a.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new qe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new qe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((o=a.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new qe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new qe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new qe({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return a.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new qe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new qe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const u=window.location.hostname;if(vg(u)){if(a.rp.id!==u)return new qe({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new qe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new qe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new qe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new qe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function R_({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new qe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new qe({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const s=window.location.hostname;if(vg(s)){if(t.rpId!==s)return new qe({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new qe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new qe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new qe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class P_{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const O_=new P_;function L_(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:s}=n,o=il(n,["challenge","user","excludeCredentials"]),a=Si(e).buffer,u=Object.assign(Object.assign({},t),{id:Si(t.id).buffer}),h=Object.assign(Object.assign({},o),{challenge:a,user:u});if(s&&s.length>0){h.excludeCredentials=new Array(s.length);for(let d=0;d<s.length;d++){const p=s[d];h.excludeCredentials[d]=Object.assign(Object.assign({},p),{id:Si(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return h}function A_(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,s=il(n,["challenge","allowCredentials"]),o=Si(e).buffer,a=Object.assign(Object.assign({},s),{challenge:o});if(t&&t.length>0){a.allowCredentials=new Array(t.length);for(let u=0;u<t.length;u++){const h=t[u];a.allowCredentials[u]=Object.assign(Object.assign({},h),{id:Si(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return a}function M_(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Cs(new Uint8Array(n.response.attestationObject)),clientDataJSON:Cs(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function I_(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,s=n.getClientExtensionResults(),o=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Cs(new Uint8Array(o.authenticatorData)),clientDataJSON:Cs(new Uint8Array(o.clientDataJSON)),signature:Cs(new Uint8Array(o.signature)),userHandle:o.userHandle?Cs(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function vg(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Em(){var n,e;return!!(st()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function $_(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ja("Browser returned unexpected credential type",e)}:{data:null,error:new Ja("Empty credential response",e)}}catch(e){return{data:null,error:N_({error:e,options:n})}}}async function z_(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ja("Browser returned unexpected credential type",e)}:{data:null,error:new Ja("Empty credential response",e)}}catch(e){return{data:null,error:R_({error:e,options:n})}}}const D_={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},U_={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Qa(...n){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),t=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of n)if(o)for(const a in o){const u=o[a];if(u!==void 0)if(Array.isArray(u))s[a]=u;else if(t(u))s[a]=u;else if(e(u)){const h=s[a];e(h)?s[a]=Qa(h,u):s[a]=Qa(u)}else s[a]=u}return s}function F_(n,e){return Qa(D_,n,e||{})}function B_(n,e){return Qa(U_,n,e||{})}class V_{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:o},a){var u;try{const{data:h,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!h)return{data:null,error:d};const p=o??O_.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:v}=h.webauthn.credential_options.publicKey;if(!v.name){const g=s;if(g)v.name=`${v.id}:${g}`;else{const _=(await this.client.getUser()).data.user,S=((u=_==null?void 0:_.user_metadata)===null||u===void 0?void 0:u.name)||(_==null?void 0:_.email)||(_==null?void 0:_.id)||"User";v.name=`${v.id}:${S}`}}v.displayName||(v.displayName=v.name)}switch(h.webauthn.type){case"create":{const v=F_(h.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:g,error:w}=await $_({publicKey:v,signal:p});return g?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:g}},error:null}:{data:null,error:w}}case"request":{const v=B_(h.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:g,error:w}=await z_(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:v,signal:p}));return g?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:g}},error:null}:{data:null,error:w}}}}catch(h){return te(h)?{data:null,error:h}:{data:null,error:new Es("Unexpected error in challenge",h)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},a){if(!t)return{data:null,error:new qr("rpId is required for WebAuthn authentication")};try{if(!Em())return{data:null,error:new Es("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:o},{request:a});if(!u)return{data:null,error:h};const{webauthn:d}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:d.type,rpId:t,rpOrigins:s,credential_response:d.credential_response}})}catch(u){return te(u)?{data:null,error:u}:{data:null,error:new Es("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},a){if(!t)return{data:null,error:new qr("rpId is required for WebAuthn registration")};try{if(!Em())return{data:null,error:new Es("Browser does not support WebAuthn",null)};const{data:u,error:h}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(v=>{var g;return(g=v.data)===null||g===void 0?void 0:g.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:h};const{data:d,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:o},{create:a});return d?this._verify({factorId:u.id,challengeId:d.challengeId,webauthn:{rpId:t,rpOrigins:s,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:p}}catch(u){return te(u)?{data:null,error:u}:{data:null,error:new Es("Unexpected error in register",u)}}}}E_();const W_={url:Fx,storageKey:Bx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Vx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function Cm(n,e,t){return await t()}const mi={};class Hr{get jwks(){var e,t;return(t=(e=mi[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){mi[this.storageKey]=Object.assign(Object.assign({},mi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=mi[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){mi[this.storageKey]=Object.assign(Object.assign({},mi[this.storageKey]),{cachedAt:e})}constructor(e){var t,s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},W_),e);if(this.storageKey=a.storageKey,this.instanceID=(t=Hr.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Hr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&st()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new S_({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=fg(a.fetch),this.lock=a.lock||Cm,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&st()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=k_:this.lock=Cm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new V_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:dg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Sm(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Sm(this.memoryStorage)),st()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u);try{await this._notifyAllSubscribers(u.data.event,u.data.session,!1)}catch(h){this._debug("#broadcastChannel","error",h)}})}a.skipAutoInitialize||this.initialize().catch(u=>{this._debug("#initialize()","error",u)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ug}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},s="none";if(st()&&(t=s_(window.location.href),this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce")),st()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:a}=await this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Gx(a)){const d=(e=a.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:u,redirectType:h}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return te(t)?this._returnResult({error:t}):this._returnResult({error:new Es("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,o;try{const a=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:Kt}),{data:u,error:h}=a;if(h||!u)return this._returnResult({data:{user:null,session:null},error:h});const d=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:p,session:d},error:null})}catch(a){if(te(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var t,s,o;try{let a;if("email"in e){const{email:v,password:g,options:w}=e;let _=null,S=null;this.flowType==="pkce"&&([_,S]=await di(this.storage,this.storageKey)),a=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:v,password:g,data:(t=w==null?void 0:w.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:_,code_challenge_method:S},xform:Kt})}else if("phone"in e){const{phone:v,password:g,options:w}=e;a=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:g,data:(s=w==null?void 0:w.data)!==null&&s!==void 0?s:{},channel:(o=w==null?void 0:w.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:Kt})}else throw new Ta("You must provide either an email or phone number and a password");const{data:u,error:h}=a;if(h||!u)return await nt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const d=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:p,session:d},error:null})}catch(a){if(await nt(this.storage,`${this.storageKey}-code-verifier`),te(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:u,options:h}=e;t=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:xm})}else if("phone"in e){const{phone:a,password:u,options:h}=e;t=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:xm})}else throw new Ta("You must provide either an email or phone number and a password");const{data:s,error:o}=t;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){const a=new hi;return this._returnResult({data:{user:null,session:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(t){if(te(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,s,o,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,o,a,u,h,d,p,v,g,w;let _,S;if("message"in e)_=e.message,S=e.signature;else{const{chain:x,wallet:k,statement:C,options:R}=e;let P;if(st())if(typeof k=="object")P=k;else{const ie=window;if("ethereum"in ie&&typeof ie.ethereum=="object"&&"request"in ie.ethereum&&typeof ie.ethereum.request=="function")P=ie.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=k}const j=new URL((t=R==null?void 0:R.url)!==null&&t!==void 0?t:window.location.href),U=await P.request({method:"eth_requestAccounts"}).then(ie=>ie).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const B=mg(U[0]);let G=(s=R==null?void 0:R.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!G){const ie=await P.request({method:"eth_chainId"});G=C_(ie)}const Q={domain:j.host,address:B,statement:C,uri:j.href,version:"1",chainId:G,nonce:(o=R==null?void 0:R.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(a=R==null?void 0:R.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(h=R==null?void 0:R.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(d=R==null?void 0:R.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(p=R==null?void 0:R.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=R==null?void 0:R.signInWithEthereum)===null||v===void 0?void 0:v.resources};_=j_(Q),S=await P.request({method:"personal_sign",params:[T_(_),B]})}try{const{data:x,error:k}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:S},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Kt});if(k)throw k;if(!x||!x.session||!x.user){const C=new hi;return this._returnResult({data:{user:null,session:null},error:C})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:k})}catch(x){if(te(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var t,s,o,a,u,h,d,p,v,g,w,_;let S,x;if("message"in e)S=e.message,x=e.signature;else{const{chain:k,wallet:C,statement:R,options:P}=e;let j;if(st())if(typeof C=="object")j=C;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))j=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(P!=null&&P.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=C}const U=new URL((t=P==null?void 0:P.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in j&&j.signIn){const B=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P==null?void 0:P.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),R?{statement:R}:null));let G;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")G=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)G=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in G&&"signature"in G&&(typeof G.signedMessage=="string"||G.signedMessage instanceof Uint8Array)&&G.signature instanceof Uint8Array)S=typeof G.signedMessage=="string"?G.signedMessage:new TextDecoder().decode(G.signedMessage),x=G.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${U.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(o=(s=P==null?void 0:P.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=P==null?void 0:P.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((u=P==null?void 0:P.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((h=P==null?void 0:P.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((d=P==null?void 0:P.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((p=P==null?void 0:P.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((g=(v=P==null?void 0:P.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||g===void 0)&&g.length?["Resources",...P.signInWithSolana.resources.map(G=>`- ${G}`)]:[]].join(`
`);const B=await j.signMessage(new TextEncoder().encode(S),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=B}}try{const{data:k,error:C}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Cs(x)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Kt});if(C)throw C;if(!k||!k.session||!k.user){const R=new hi;return this._returnResult({data:{user:null,session:null},error:R})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:C})}catch(k){if(te(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(e){const t=await xs(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(t??"").split("/");try{if(!s&&this.flowType==="pkce")throw new Jx;const{data:a,error:u}=await le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Kt});if(await nt(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!a||!a.session||!a.user){const h=new hi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:u})}catch(a){if(await nt(this.storage,`${this.storageKey}-code-verifier`),te(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:t,provider:s,token:o,access_token:a,nonce:u}=e,h=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:a,nonce:u,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Kt}),{data:d,error:p}=h;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!d||!d.session||!d.user){const v=new hi;return this._returnResult({data:{user:null,session:null},error:v})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:p})}catch(t){if(te(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,s,o,a,u;try{if("email"in e){const{email:h,options:d}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await di(this.storage,this.storageKey));const{error:g}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},create_user:(s=d==null?void 0:d.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in e){const{phone:h,options:d}=e,{data:p,error:v}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(o=d==null?void 0:d.data)!==null&&o!==void 0?o:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(u=d==null?void 0:d.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v})}throw new Ta("You must provide either an email or phone number.")}catch(h){if(await nt(this.storage,`${this.storageKey}-code-verifier`),te(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var t,s;try{let o,a;"options"in e&&(o=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:h}=await le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:Kt});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const d=u.session,p=u.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:p,session:d},error:null})}catch(o){if(te(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var t,s,o,a,u;try{let h=null,d=null;this.flowType==="pkce"&&([h,d]=await di(this.storage,this.storageKey));const p=await le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:d}),headers:this.headers,xform:b_});return!((a=p.data)===null||a===void 0)&&a.url&&st()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(h){if(await nt(this.storage,`${this.storageKey}-code-verifier`),te(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Tt;const{error:o}=await le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(te(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:o,options:a}=e,{error:u}=await le(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:s,type:o,options:a}=e,{data:u,error:h}=await le(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new Ta("You must provide either an email or phone number and a type")}catch(t){if(te(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await xs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<vc:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await xs(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=wc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=v_(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Jn}):await this._useSession(async t=>{var s,o,a;const{data:u,error:h}=t;if(h)throw h;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Tt}:await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:Jn})})}catch(t){if(te(t))return gc(t)&&(await this._removeSession(),await nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:o,error:a}=s;if(a)throw a;if(!o.session)throw new Tt;const u=o.session;let h=null,d=null;this.flowType==="pkce"&&e.email!=null&&([h,d]=await di(this.storage,this.storageKey));const{data:p,error:v}=await le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:d}),jwt:u.access_token,xform:Jn});if(v)throw v;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(s){if(await nt(this.storage,`${this.storageKey}-code-verifier`),te(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Tt;const t=Date.now()/1e3;let s=t,o=!0,a=null;const{payload:u}=Na(e.access_token);if(u.exp&&(s=u.exp,o=s<=t),o){const{data:h,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!h)return{data:{user:null,session:null},error:null};a=h}else{const{data:h,error:d}=await this._getUser(e.access_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});a={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(t){if(te(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:u,error:h}=t;if(h)throw h;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Tt;const{data:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(te(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!st())throw new ja("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ja(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new pm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ja("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new pm("No code detected.");const{data:R,error:P}=await this._exchangeCodeForSession(e.code);if(P)throw P;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:a,refresh_token:u,expires_in:h,expires_at:d,token_type:p}=e;if(!a||!h||!u||!p)throw new ja("No session defined in URL");const v=Math.round(Date.now()/1e3),g=parseInt(h);let w=v+g;d&&(w=parseInt(d));const _=w-v;_*1e3<=yi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${g}s`);const S=w-g;v-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,w,v):v-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,w,v);const{data:x,error:k}=await this._getUser(a);if(k)throw k;const C={provider_token:s,provider_refresh_token:o,access_token:a,expires_in:g,expires_at:w,refresh_token:u,token_type:p,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(s){if(te(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await xs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:o,error:a}=t;if(a&&!gc(a))return this._returnResult({error:a});const u=(s=o.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(Hx(h)&&(h.status===404||h.status===401||h.status===403)||gc(h)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=n_(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,o;try{const{data:{session:a},error:u}=t;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await di(this.storage,this.storageKey,!0));try{return await le(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(await nt(this.storage,`${this.storageKey}-code-verifier`),te(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(te(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:o}=await this._useSession(async a=>{var u,h,d,p,v;const{data:g,error:w}=a;if(w)throw w;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await le(this.fetch,"GET",_,{headers:this.headers,jwt:(v=(p=g.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(o)throw o;return st()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(te(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:o,data:{session:a}}=t;if(o)throw o;const{options:u,provider:h,token:d,access_token:p,nonce:v}=e,g=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=a==null?void 0:a.access_token)!==null&&s!==void 0?s:void 0,body:{provider:h,id_token:d,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Kt}),{data:w,error:_}=g;return _?this._returnResult({data:{user:null,session:null},error:_}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new hi}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:_}))}catch(o){if(await nt(this.storage,`${this.storageKey}-code-verifier`),te(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,o;const{data:a,error:u}=t;if(u)throw u;return await le(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(t){if(te(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await o_(async o=>(o>0&&await r_(200*Math.pow(2,o-1)),this._debug(t,"refreshing attempt",o),await le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Kt})),(o,a)=>{const u=200*Math.pow(2,o);return a&&yc(a)&&Date.now()+u-s<yi})}catch(s){if(this._debug(t,"error",s),te(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),st()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await xs(this.storage,this.storageKey);if(o&&this.userStorage){let u=await xs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await wi(this.userStorage,this.storageKey+"-user",u)),o.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:wc()}else if(o&&!o.user&&!o.user){const u=await xs(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(o.user=u.user,await nt(this.storage,this.storageKey+"-user"),await wi(this.storage,this.storageKey,o)):o.user=wc()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const a=((t=o.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<vc;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${vc}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),yc(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(o.access_token);!h&&(u!=null&&u.user)?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Tt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new al;const{data:a,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!a.session)throw new Tt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const h={data:a.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(a){if(this._debug(o,"error",a),te(a)){const u={data:null,error:a};return yc(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t,s=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,t)}catch(d){a.push(d)}});if(await Promise.all(u),a.length>0){for(let h=0;h<a.length;h+=1)console.error(a[h]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await nt(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await wi(this.userStorage,this.storageKey+"-user",{user:t.user});const o=Object.assign({},t);delete o.user;const a=wm(o);await wi(this.storage,this.storageKey,a)}else{const o=wm(t);await wi(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await nt(this.storage,this.storageKey),await nt(this.storage,this.storageKey+"-code-verifier"),await nt(this.storage,this.storageKey+"-user"),this.userStorage&&await nt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&st()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),yi);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-e)/yi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${yi}ms, refresh threshold is ${th} ticks`),o<=th&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof pg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!st()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const o=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,u]=await di(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(h.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);o.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:o,error:a}=t;return a?this._returnResult({data:null,error:a}):await le(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(te(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,o;const{data:a,error:u}=t;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:p}=await le(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&d.type==="totp"&&(!((o=d==null?void 0:d.totp)===null||o===void 0)&&o.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(t){if(te(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var s;const{data:o,error:a}=t;if(a)return this._returnResult({data:null,error:a});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?M_(e.webauthn.credential_response):I_(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:d}=await le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:d}))})}catch(t){if(te(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var s;const{data:o,error:a}=t;if(a)return this._returnResult({data:null,error:a});const u=await le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:h}=u;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:L_(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:A_(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(te(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])o.all.push(a),a.status==="verified"&&o[a.factor_type].push(a);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(e){var t,s,o,a;if(e)try{const{payload:_}=Na(e);let S=null;_.aal&&(S=_.aal);let x=S;const{data:{user:k},error:C}=await this.getUser(e);if(C)return this._returnResult({data:null,error:C});((s=(t=k==null?void 0:k.factors)===null||t===void 0?void 0:t.filter(j=>j.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(x="aal2");const P=_.amr||[];return{data:{currentLevel:S,nextLevel:x,currentAuthenticationMethods:P},error:null}}catch(_){if(te(_))return this._returnResult({data:null,error:_});throw _}const{data:{session:u},error:h}=await this.getSession();if(h)return this._returnResult({data:null,error:h});if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Na(u.access_token);let p=null;d.aal&&(p=d.aal);let v=p;((a=(o=u.user.factors)===null||o===void 0?void 0:o.filter(_=>_.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(v="aal2");const w=d.amr||[];return{data:{currentLevel:p,nextLevel:v,currentAuthenticationMethods:w},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:s},error:o}=t;return o?this._returnResult({data:null,error:o}):s?await le(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Tt})})}catch(t){if(te(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:o},error:a}=s;if(a)return this._returnResult({data:null,error:a});if(!o)return this._returnResult({data:null,error:new Tt});const u=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&st()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(s){if(te(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:o},error:a}=s;if(a)return this._returnResult({data:null,error:a});if(!o)return this._returnResult({data:null,error:new Tt});const u=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return u.data&&u.data.redirect_url&&st()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(s){if(te(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;return s?this._returnResult({data:null,error:s}):t?await le(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Tt})})}catch(e){if(te(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:s},error:o}=t;return o?this._returnResult({data:null,error:o}):s?(await le(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Tt})})}catch(t){if(te(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(h=>h.kid===e);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(h=>h.kid===e),s&&this.jwks_cached_at+Kx>o)return s;const{data:a,error:u}=await le(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,s=a.keys.find(h=>h.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:_,error:S}=await this.getSession();if(S||!_.session)return this._returnResult({data:null,error:S});s=_.session.access_token}const{header:o,payload:a,signature:u,raw:{header:h,payload:d}}=Na(s);t!=null&&t.allowExpired||f_(a.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!p){const{error:_}=await this.getUser(s);if(_)throw _;return{data:{claims:a,header:o,signature:u},error:null}}const v=p_(o.alg),g=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,g,u,e_(`${h}.${d}`)))throw new ih("Invalid JWT signature");return{data:{claims:a,header:o,signature:u},error:null}}catch(s){if(te(s))return this._returnResult({data:null,error:s});throw s}}}Hr.nextInstanceID={};const K_=Hr,q_="2.97.0";let Pr="";typeof Deno<"u"?Pr="deno":typeof document<"u"?Pr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Pr="react-native":Pr="node";const H_={"X-Client-Info":`supabase-js-${Pr}/${q_}`},G_={headers:H_},J_={schema:"public"},Q_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},X_={};function Gr(n){"@babel/helpers - typeof";return Gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gr(n)}function Y_(n,e){if(Gr(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e);if(Gr(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Z_(n){var e=Y_(n,"string");return Gr(e)=="symbol"?e:e+""}function eS(n,e,t){return(e=Z_(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Tm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,s)}return t}function Ue(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Tm(Object(t),!0).forEach(function(s){eS(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Tm(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}const tS=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),nS=()=>Headers,sS=(n,e,t)=>{const s=tS(t),o=nS();return async(a,u)=>{var h;const d=(h=await e())!==null&&h!==void 0?h:n;let p=new o(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${d}`),s(a,Ue(Ue({},u),{},{headers:p}))}};function iS(n){return n.endsWith("/")?n:n+"/"}function rS(n,e){var t,s;const{db:o,auth:a,realtime:u,global:h}=n,{db:d,auth:p,realtime:v,global:g}=e,w={db:Ue(Ue({},d),o),auth:Ue(Ue({},p),a),realtime:Ue(Ue({},v),u),storage:{},global:Ue(Ue(Ue({},g),h),{},{headers:Ue(Ue({},(t=g==null?void 0:g.headers)!==null&&t!==void 0?t:{}),(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return n.accessToken?w.accessToken=n.accessToken:delete w.accessToken,w}function oS(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(iS(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var aS=class extends K_{constructor(n){super(n)}},lS=class{constructor(n,e,t){var s,o;this.supabaseUrl=n,this.supabaseKey=e;const a=oS(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const u=`sb-${a.hostname.split(".")[0]}-auth-token`,h={db:J_,realtime:X_,auth:Ue(Ue({},Q_),{},{storageKey:u}),global:G_},d=rS(t??{},h);if(this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=d.global.headers)!==null&&o!==void 0?o:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(v,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=d.auth)!==null&&p!==void 0?p:{},this.headers,d.global.fetch)}this.fetch=sS(e,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Ue({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new Hb(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch,timeout:d.db.timeout,urlLengthLimit:d.db.urlLengthLimit}),this.storage=new Ux(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Db(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,t)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,e,t;if(n.accessToken)return await n.accessToken();const{data:s}=await n.auth.getSession();return(e=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:s,userStorage:o,storageKey:a,flowType:u,lock:h,debug:d,throwOnError:p},v,g){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new aS({url:this.authUrl.href,headers:Ue(Ue({},w),v),storageKey:a,autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:s,userStorage:o,flowType:u,lock:h,debug:d,throwOnError:p,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new cx(this.realtimeUrl.href,Ue(Ue({},n),{},{params:Ue(Ue({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,e)=>{this._handleTokenChanged(n,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(n,e,t){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const uS=(n,e,t)=>new lS(n,e,t);function cS(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const e=n.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}cS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const hS="https://xlojzhtfhmxlfknmcsib.supabase.co",dS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhsb2p6aHRmaG14bGZrbm1jc2liIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIwNzA3NjYsImV4cCI6MjA4NzY0Njc2Nn0.P4CrHLyTGHZf5d3ZBnNF-emsR7TK28g6TcJXyowsIug",Gt=uS(hS,dS,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),jm=n=>{let e;const t=new Set,s=(p,v)=>{const g=typeof p=="function"?p(e):p;if(!Object.is(g,e)){const w=e;e=v??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(_=>_(e,w))}},o=()=>e,h={setState:s,getState:o,getInitialState:()=>d,subscribe:p=>(t.add(p),()=>t.delete(p))},d=e=n(s,o,h);return h},fS=(n=>n?jm(n):jm),pS=n=>n;function mS(n,e=pS){const t=Rr.useSyncExternalStore(n.subscribe,Rr.useCallback(()=>e(n.getState()),[n,e]),Rr.useCallback(()=>e(n.getInitialState()),[n,e]));return Rr.useDebugValue(t),t}const Nm=n=>{const e=fS(n),t=s=>mS(e,s);return Object.assign(t,e),t},gg=(n=>n?Nm(n):Nm),ro=gg(n=>({user:null,session:null,subscription:null,loading:!0,setUser:e=>n({user:e}),setSession:e=>n({session:e}),setSubscription:e=>n({subscription:e}),setLoading:e=>n({loading:e}),reset:()=>n({user:null,session:null,subscription:null,loading:!1})}));function oo(){const{user:n,session:e,subscription:t,loading:s,setUser:o,setSession:a,setSubscription:u,setLoading:h,reset:d}=ro();z.useEffect(()=>{Gt.auth.getSession().then(({data:{session:x}})=>{a(x),o((x==null?void 0:x.user)??null),x!=null&&x.user?p(x.user.id):h(!1)});const{data:{subscription:S}}=Gt.auth.onAuthStateChange(async(x,k)=>{a(k),o((k==null?void 0:k.user)??null),k!=null&&k.user?await p(k.user.id):(u(null),h(!1))});return()=>{S.unsubscribe()}},[]);async function p(S){try{const{data:x}=await Gt.from("subscriptions").select("*").eq("user_id",S).single();if(x)u(x);else{const k=new Date;k.setDate(k.getDate()+14);const{data:C}=await Gt.from("subscriptions").insert({user_id:S,tier:"trial",status:"trialing",current_period_end:k.toISOString(),stripe_customer_id:null,stripe_subscription_id:null}).select().single();C&&u(C)}}catch(x){console.error("Failed to load subscription:",x);const k=new Date;k.setDate(k.getDate()+14),u({tier:"trial",status:"trialing",current_period_end:k.toISOString(),stripe_customer_id:null,stripe_subscription_id:null})}finally{h(!1)}}async function v(S,x){const{data:k,error:C}=await Gt.auth.signInWithPassword({email:S,password:x});if(C)throw C;return k}async function g(S,x){const{data:k,error:C}=await Gt.auth.signUp({email:S,password:x});if(C)throw C;return k}async function w(){const{error:S}=await Gt.auth.signOut();if(S)throw S;d()}async function _(S){const{error:x}=await Gt.auth.resetPasswordForEmail(S,{redirectTo:`${window.location.origin}/reset-password`});if(x)throw x}return{user:n,session:e,subscription:t,loading:s,login:v,signup:g,logout:w,resetPassword:_,isAuthenticated:!!n}}var yg="https://js.stripe.com/v3",vS=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var gS=function(){for(var e=document.querySelectorAll('script[src^="'.concat(yg,'"]')),t=0;t<e.length;t++){var s=e[t];if(vS.test(s.src))return s}return null},Rm=function(e){var t="",s=document.createElement("script");s.src="".concat(yg).concat(t);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(s),s},yS=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"4.6.0",startTime:t})},Cr=null,Ra=null,Pa=null,wS=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},bS=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},xS=function(e){return Cr!==null?Cr:(Cr=new Promise(function(t,s){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var o=gS();if(!(o&&e)){if(!o)o=Rm(e);else if(o&&Pa!==null&&Ra!==null){var a;o.removeEventListener("load",Pa),o.removeEventListener("error",Ra),(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=Rm(e)}}Pa=bS(t,s),Ra=wS(s),o.addEventListener("load",Pa),o.addEventListener("error",Ra)}catch(u){s(u);return}}),Cr.catch(function(t){return Cr=null,Promise.reject(t)}))},_S=function(e,t,s){if(e===null)return null;var o=e.apply(void 0,t);return yS(o,s),o},Tr,wg=!1,bg=function(){return Tr||(Tr=xS(null).catch(function(e){return Tr=null,Promise.reject(e)}),Tr)};Promise.resolve().then(function(){return bg()}).catch(function(n){wg||console.warn(n)});var SS=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];wg=!0;var o=Date.now();return bg().then(function(a){return _S(a,t,o)})};const kS="pk_live_51OKdcxCiyUV0aZA3F92AhVuRVEyHoQdgKdH4A7vFVnRyvkp283Dq3DG8EyTA8b4shwZBRUKS2jJTygo2axhbO5Bu005ZrWMKnx";SS(kS);const xg=[{id:"starter",name:"Starter",monthlyPrice:9,annualPrice:79,annualMonthly:6.58,description:"Perfect for hobby traders",features:["3 pairs max","10-signal scoring system","Live charts","Basic trade journal (50 entries)","All asset types (crypto, stocks, forex)"],limitations:["No AI chart analysis","No real-time alerts","No CSV export"],color:"border-[#607d9b]",popular:!1},{id:"pro",name:"Pro",monthlyPrice:29,annualPrice:239,annualMonthly:19.92,description:"For serious retail traders",features:["Unlimited pairs","10-signal scoring system","Real-time live charts","Unlimited trade journal","25 AI chart analyses/month","CSV export","Email alerts","All asset types"],limitations:[],color:"border-[#4fc3f7]",popular:!0},{id:"elite",name:"Elite",monthlyPrice:59,annualPrice:489,annualMonthly:40.75,description:"Power users & small funds",features:["Everything in Pro","Unlimited AI analyses","Webhook alerts","API access","Priority support","Advanced AI insights","Custom pair groups","Portfolio tracking"],limitations:[],color:"border-[#ff9800]",popular:!1}],ES={trial:{maxPairs:1/0,maxJournalEntries:1/0,aiAnalyses:25,webhooks:!0,api:!0},starter:{maxPairs:3,maxJournalEntries:50,aiAnalyses:0,webhooks:!1,api:!1},pro:{maxPairs:1/0,maxJournalEntries:1/0,aiAnalyses:25,webhooks:!1,api:!1},elite:{maxPairs:1/0,maxJournalEntries:1/0,aiAnalyses:1/0,webhooks:!0,api:!0}},Pm={trial:3,starter:1,pro:2,elite:3};function zs(){const{subscription:n}=ro(),e=(n==null?void 0:n.tier)??"starter",t=(n==null?void 0:n.status)==="active"||(n==null?void 0:n.status)==="trialing",s=n?new Date(n.current_period_end)<new Date:!0,o=t&&!s?e:"starter",a=ES[o];function u(S){return a.maxPairs===1/0||S<=a.maxPairs}function h(S){return a.maxPairs===1/0||S<a.maxPairs}function d(S){return a.maxJournalEntries===1/0||S<a.maxJournalEntries}function p(){return a.aiAnalyses>0}function v(){return a.webhooks}function g(){return a.api}function w(S){return Pm[o]>=Pm[S]}function _(){if(!n)return 0;const S=new Date(n.current_period_end),x=new Date,k=S.getTime()-x.getTime();return Math.max(0,Math.floor(k/(1e3*60*60*24)))}return{tier:o,subscription:n,isActive:t,isExpired:s,limits:a,canUsePairs:u,canAddPair:h,canUseJournal:d,canUseAI:p,canUseWebhooks:v,canUseAPI:g,hasMinTier:w,getDaysRemaining:_,isStarter:o==="starter",isPro:o==="pro"||o==="elite"||o==="trial",isElite:o==="elite"||o==="trial",isTrial:e==="trial"&&t}}const CS=[{to:"/dashboard",icon:"",label:"Scanner"},{to:"/journal",icon:"",label:"Journal"},{to:"/settings",icon:"",label:"Settings"}];function Oa({children:n}){var g,w;const{user:e,logout:t}=oo(),{tier:s,isTrial:o,getDaysRemaining:a}=zs(),u=so(),[h,d]=z.useState(!1);async function p(){await t(),u("/login")}const v={trial:"text-[#4fc3f7] bg-[#0d2035] border-[#1e3050]",starter:"text-[#607d9b] bg-[#0b1220] border-[#1e3050]",pro:"text-[#4fc3f7] bg-[#0d2035] border-[#1565c0]",elite:"text-[#ff9800] bg-[#1a0e00] border-[#ff6d00]"};return y.jsxs("div",{className:"flex min-h-screen",style:{background:"var(--bg-primary)"},children:[y.jsxs("aside",{className:`fixed inset-y-0 left-0 z-40 w-60 flex flex-col border-r border-[#1e3050] transition-transform duration-300 lg:translate-x-0 ${h?"translate-x-0":"-translate-x-full"}`,style:{background:"var(--bg-secondary)"},children:[y.jsx("div",{className:"p-4 border-b border-[#1e3050]",children:y.jsxs(jt,{to:"/dashboard",className:"flex items-center gap-2 no-underline",children:[y.jsx("span",{className:"text-2xl",children:""}),y.jsx("span",{className:"font-bold text-[#e0e6f0] text-lg",style:{fontFamily:"Space Grotesk"},children:"Cedars Wave"})]})}),y.jsxs("div",{className:"p-3 border-b border-[#1e3050]",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx("div",{className:"w-7 h-7 rounded-full bg-[#1565c0] flex items-center justify-center text-white text-xs font-bold",children:((w=(g=e==null?void 0:e.email)==null?void 0:g[0])==null?void 0:w.toUpperCase())??"U"}),y.jsx("div",{className:"flex-1 min-w-0",children:y.jsx("p",{className:"text-[#e0e6f0] text-xs font-medium truncate",children:e==null?void 0:e.email})})]}),y.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold border ${v[s]}`,children:[s==="trial"?" Trial":s==="starter"?" Starter":s==="pro"?" Pro":" Elite",o&&y.jsxs("span",{className:"opacity-70",children:[" ",a(),"d left"]})]})]}),y.jsxs("nav",{className:"flex-1 p-2",children:[CS.map(_=>y.jsxs(Hp,{to:_.to,onClick:()=>d(!1),className:({isActive:S})=>`flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium mb-1 transition-colors no-underline ${S?"bg-[#1565c0] text-white":"text-[#607d9b] hover:bg-[#1a2d45] hover:text-[#e0e6f0]"}`,children:[y.jsx("span",{children:_.icon}),y.jsx("span",{children:_.label})]},_.to)),y.jsx("div",{className:"border-t border-[#1e3050] mt-2 pt-2",children:y.jsxs(Hp,{to:"/pricing",onClick:()=>d(!1),className:({isActive:_})=>`flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium mb-1 transition-colors no-underline ${_?"bg-[#1565c0] text-white":"text-[#607d9b] hover:bg-[#1a2d45] hover:text-[#e0e6f0]"}`,children:[y.jsx("span",{children:""}),y.jsx("span",{children:"Pricing"})]})})]}),y.jsxs("div",{className:"p-3 border-t border-[#1e3050]",children:[y.jsxs("button",{onClick:p,className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-[#607d9b] hover:bg-[#1a2d45] hover:text-[#e0e6f0] transition-colors",children:[y.jsx("span",{children:""}),y.jsx("span",{children:"Sign out"})]}),y.jsx("p",{className:"text-[#37474f] text-xs text-center mt-2",children:"Made with Claude Opus 4.6 "})]})]}),h&&y.jsx("div",{className:"fixed inset-0 z-30 bg-black/50 lg:hidden",onClick:()=>d(!1)}),y.jsxs("div",{className:"flex-1 flex flex-col lg:ml-60",children:[y.jsxs("header",{className:"lg:hidden sticky top-0 z-20 flex items-center justify-between px-4 py-3 border-b border-[#1e3050]",style:{background:"var(--bg-secondary)"},children:[y.jsx("button",{onClick:()=>d(!0),className:"text-[#607d9b] hover:text-[#e0e6f0] text-xl",children:""}),y.jsx("span",{className:"text-[#4fc3f7] font-bold",style:{fontFamily:"Space Grotesk"},children:" Cedars Wave"}),y.jsx("div",{className:"w-6"})]}),y.jsx("main",{className:"flex-1",children:n})]})]})}function La({children:n}){const{user:e,loading:t}=ro(),s=os();return t?y.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"var(--bg-primary)"},children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"text-4xl mb-4",children:""}),y.jsx("div",{className:"spinner",style:{width:24,height:24}}),y.jsx("p",{className:"text-[#607d9b] mt-3 text-sm",children:"Loading Cedars Wave..."})]})}):e?y.jsx(y.Fragment,{children:n}):y.jsx(Hv,{to:"/login",state:{from:s},replace:!0})}const TS=[{icon:"",title:"10-Signal Scoring",desc:"Every asset scored across EMA Stack, RSI Zone, Volume Surge, MACD, Bollinger Bands, ATR, VWAP, and more. No guesswork."},{icon:"",title:"Real-Time Data",desc:"Binance Futures for crypto, Yahoo Finance for stocks & forex. Scans update automatically every 60 seconds."},{icon:"",title:"Grade-Based Signals",desc:" STRONG (8-10)   VALID (6-7)   WEAK (4-5)   SKIP (<4). Know exactly what to trade."},{icon:"",title:"Trade Journal",desc:"Log entries with automatic P&L calculation, score at entry, win rate tracking, and CSV export."},{icon:"",title:"Multi-Asset",desc:"Scan crypto (Binance Futures), stocks, and forex pairs all in one dashboard. Add any custom pair instantly."},{icon:"",title:"Live Charts",desc:"Candlestick charts with EMA overlays, Bollinger Bands, VWAP, and RSI sub-chart  all auto-rendered."}],jS=[{feature:"10-Signal Wave Scoring",cedars:!0,snaptrader:!1,tradingview:!1},{feature:"Auto Grade (STRONG/VALID/WEAK)",cedars:!0,snaptrader:!1,tradingview:!1},{feature:"Crypto Futures (Binance)",cedars:!0,snaptrader:!0,tradingview:!0},{feature:"Stocks & Forex Scanning",cedars:!0,snaptrader:"",tradingview:!0},{feature:"Trade Journal built-in",cedars:!0,snaptrader:!1,tradingview:!1},{feature:"EMA + BB + VWAP charts",cedars:!0,snaptrader:"",tradingview:!0},{feature:"Free 14-day trial",cedars:!0,snaptrader:"",tradingview:!1},{feature:"Starting price",cedars:"9/mo",snaptrader:"~$29/mo",tradingview:"$12.95/mo"},{feature:"Unlimited pairs (Pro)",cedars:"29/mo",snaptrader:"Limited",tradingview:"$24.95/mo"},{feature:"Custom wave formula",cedars:!0,snaptrader:!1,tradingview:!1}],NS=[{q:"Is there really no credit card required for the trial?",a:"Correct. Sign up with just your email and you get 14 days of full Pro access. No card needed."},{q:"Which crypto exchanges are supported?",a:"Cedars Wave uses Binance Futures API for crypto pairs (USDT-margined). Any pair available on Binance Futures works."},{q:"Can I scan stocks and forex too?",a:"Yes. Enter any Yahoo Finance symbol (e.g. AAPL, TSLA for stocks, or EURUSD for forex) and the scanner fetches data automatically."},{q:"How is this different from TradingView alerts?",a:"TradingView shows raw charts. Cedars Wave automatically scores each asset across 10 signals and tells you STRONG / VALID / WEAK  so you spend 10 seconds per asset instead of 5 minutes."},{q:"Can I cancel anytime?",a:"Yes. Cancel from your settings page with one click. No fees, no gotchas. We also offer a 30-day money-back guarantee."},{q:"What is the 10-signal scoring system?",a:"EMA Stack (9>21>50), RSI Zone (50-80), RSI Rising, Volume Surge (>1.3x), 1H Trend, MACD Positive, BB Position, ATR R:R, Price vs VWAP, and Consecutive Green Candles. Each signal = 1 point. 8+ = STRONG setup."}];function RS(){const[n,e]=z.useState(!1),[t,s]=z.useState(null);return y.jsxs("div",{style:{background:"var(--bg-primary)"},className:"min-h-screen",children:[y.jsxs("nav",{className:"sticky top-0 z-50 flex items-center justify-between px-6 py-3 border-b border-[#1e3050]",style:{background:"rgba(10,14,26,0.9)",backdropFilter:"blur(12px)"},children:[y.jsxs(jt,{to:"/",className:"flex items-center gap-2 no-underline",children:[y.jsx("span",{className:"text-2xl",children:""}),y.jsx("span",{className:"font-bold text-[#e0e6f0] text-lg",style:{fontFamily:"Space Grotesk"},children:"Cedars Wave"})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("a",{href:"#pricing",className:"text-[#607d9b] hover:text-[#e0e6f0] text-sm transition-colors",children:"Pricing"}),y.jsx(jt,{to:"/login",className:"text-[#607d9b] hover:text-[#e0e6f0] text-sm transition-colors no-underline",children:"Sign In"}),y.jsx(jt,{to:"/signup",className:"btn-primary text-sm py-1.5 px-4 no-underline",children:"Start Free Trial"})]})]}),y.jsxs("section",{className:"relative min-h-screen flex flex-col items-center justify-center text-center px-6 py-24 overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[...Array(20)].map((o,a)=>y.jsx("div",{className:"absolute rounded-full opacity-5",style:{width:Math.random()*400+100,height:Math.random()*400+100,background:a%2===0?"#4fc3f7":"#1565c0",left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,transform:"translate(-50%, -50%)",animation:`float ${3+Math.random()*4}s ease-in-out ${Math.random()*2}s infinite`}},a))}),y.jsxs("div",{className:"relative z-10 max-w-4xl",children:[y.jsx("div",{className:"inline-flex items-center gap-2 bg-[#0d2035] border border-[#1e3050] text-[#4fc3f7] text-xs px-4 py-1.5 rounded-full mb-6",children:" 14-day free trial  No credit card required"}),y.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight",style:{fontFamily:"Space Grotesk"},children:[y.jsx("span",{className:"text-[#e0e6f0]",children:"Scan Any Market."}),y.jsx("br",{}),y.jsx("span",{className:"gradient-text",children:"Score Every Setup."})]}),y.jsxs("p",{className:"text-[#607d9b] text-xl md:text-2xl mb-8 max-w-2xl mx-auto leading-relaxed",children:["Cedars Wave scores every crypto, stock, and forex pair across"," ",y.jsx("span",{className:"text-[#e0e6f0]",children:"10 proven signals"})," and tells you exactly what to trade. No noise. Just grades."]}),y.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-12",children:[y.jsx(jt,{to:"/signup",className:"btn-primary text-base py-3 px-8 no-underline",style:{fontSize:16},children:" Start Free Trial"}),y.jsx(jt,{to:"/login",className:"btn-ghost text-base py-3 px-8 no-underline",style:{fontSize:16},children:"Sign In "})]}),y.jsx("div",{className:"flex flex-wrap justify-center gap-3 text-sm",children:[{cls:"grade-fire",label:" STRONG",score:"8-10/10"},{cls:"grade-valid",label:" VALID",score:"6-7/10"},{cls:"grade-weak",label:" WEAK",score:"4-5/10"},{cls:"grade-skip",label:" SKIP",score:"<4/10"}].map(o=>y.jsxs("div",{className:`${o.cls} px-4 py-2 rounded-full font-bold text-sm`,children:[o.label," ",y.jsx("span",{className:"opacity-60 font-normal text-xs ml-1",children:o.score})]},o.label))})]})]}),y.jsx("section",{className:"py-20 px-6",style:{background:"var(--bg-secondary)"},children:y.jsxs("div",{className:"max-w-5xl mx-auto",children:[y.jsxs("div",{className:"text-center mb-12",children:[y.jsx("h2",{className:"text-3xl font-bold text-[#e0e6f0] mb-3",style:{fontFamily:"Space Grotesk"},children:"The 10-Signal Scoring System"}),y.jsx("p",{className:"text-[#607d9b] text-lg",children:"Every asset scored automatically in seconds"})]}),y.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[{n:1,label:"EMA Stack",sub:"9 > 21 > 50"},{n:2,label:"RSI Zone",sub:"5080 range"},{n:3,label:"RSI Rising",sub:"Momentum up"},{n:4,label:"Volume Surge",sub:">1.3 average"},{n:5,label:"1H Trend",sub:"EMA9 > EMA21"},{n:6,label:"MACD+",sub:"Positive cross"},{n:7,label:"BB Position",sub:"Near lower band"},{n:8,label:"ATR R:R",sub:"Quality stop"},{n:9,label:"Price vs VWAP",sub:"Above VWAP"},{n:10,label:"Green Candles",sub:"3+ consecutive"}].map(o=>y.jsxs("div",{className:"card p-3 text-center",children:[y.jsx("div",{className:"text-[#4fc3f7] font-bold text-2xl mb-1",style:{fontFamily:"Space Grotesk"},children:o.n}),y.jsx("div",{className:"text-[#e0e6f0] text-xs font-semibold mb-0.5",children:o.label}),y.jsx("div",{className:"text-[#546e7a] text-[10px]",children:o.sub})]},o.n))})]})}),y.jsx("section",{className:"py-20 px-6",id:"features",children:y.jsxs("div",{className:"max-w-5xl mx-auto",children:[y.jsxs("div",{className:"text-center mb-12",children:[y.jsx("h2",{className:"text-3xl font-bold text-[#e0e6f0] mb-3",style:{fontFamily:"Space Grotesk"},children:"Everything You Need"}),y.jsx("p",{className:"text-[#607d9b] text-lg",children:"Built by traders, for traders"})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:TS.map(o=>y.jsxs("div",{className:"card p-5 hover:border-[#4fc3f7] transition-colors",children:[y.jsx("div",{className:"text-3xl mb-3",children:o.icon}),y.jsx("h3",{className:"text-[#e0e6f0] font-semibold mb-2",style:{fontFamily:"Space Grotesk"},children:o.title}),y.jsx("p",{className:"text-[#607d9b] text-sm leading-relaxed",children:o.desc})]},o.title))})]})}),y.jsx("section",{className:"py-20 px-6",style:{background:"var(--bg-secondary)"},children:y.jsxs("div",{className:"max-w-4xl mx-auto",children:[y.jsxs("div",{className:"text-center mb-12",children:[y.jsx("h2",{className:"text-3xl font-bold text-[#e0e6f0] mb-3",style:{fontFamily:"Space Grotesk"},children:"Why Cedars Wave?"}),y.jsx("p",{className:"text-[#607d9b] text-lg",children:"How we compare to the alternatives"})]}),y.jsx("div",{className:"overflow-x-auto rounded-xl border border-[#1e3050]",children:y.jsxs("table",{className:"w-full border-collapse text-sm",children:[y.jsx("thead",{children:y.jsxs("tr",{style:{background:"var(--bg-tertiary)"},children:[y.jsx("th",{className:"px-4 py-3 text-left text-[#607d9b] font-semibold",children:"Feature"}),y.jsx("th",{className:"px-4 py-3 text-center text-[#4fc3f7] font-bold",children:" Cedars Wave"}),y.jsx("th",{className:"px-4 py-3 text-center text-[#607d9b] font-semibold",children:"SnapTrader AI"}),y.jsx("th",{className:"px-4 py-3 text-center text-[#607d9b] font-semibold",children:"TradingView"})]})}),y.jsx("tbody",{children:jS.map((o,a)=>y.jsxs("tr",{className:"border-t border-[#1a2d45] hover:bg-[#0b1220] transition-colors",children:[y.jsx("td",{className:"px-4 py-3 text-[#e0e6f0]",children:o.feature}),["cedars","snaptrader","tradingview"].map(u=>y.jsx("td",{className:"px-4 py-3 text-center",children:o[u]===!0?y.jsx("span",{className:"text-[#69f0ae]",children:""}):o[u]===!1?y.jsx("span",{className:"text-[#546e7a]",children:""}):y.jsx("span",{className:u==="cedars"?"text-[#4fc3f7] font-semibold":"text-[#607d9b]",children:String(o[u])})},u))]},o.feature))})]})})]})}),y.jsx("section",{className:"py-20 px-6",id:"pricing",children:y.jsxs("div",{className:"max-w-5xl mx-auto",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("h2",{className:"text-3xl font-bold text-[#e0e6f0] mb-3",style:{fontFamily:"Space Grotesk"},children:"Simple Pricing"}),y.jsx("p",{className:"text-[#607d9b] text-lg",children:"Start free. Upgrade when you're ready."}),y.jsxs("div",{className:"flex items-center justify-center gap-3 mt-6",children:[y.jsx("span",{className:`text-sm ${n?"text-[#607d9b]":"text-[#e0e6f0]"}`,children:"Monthly"}),y.jsx("button",{onClick:()=>e(!n),className:`relative w-12 h-6 rounded-full transition-colors border-none cursor-pointer ${n?"bg-[#1565c0]":"bg-[#1e3050]"}`,children:y.jsx("span",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full transition-transform ${n?"translate-x-6":"translate-x-0.5"}`})}),y.jsxs("span",{className:`text-sm ${n?"text-[#e0e6f0]":"text-[#607d9b]"}`,children:["Annual ",y.jsx("span",{className:"text-[#69f0ae] font-semibold ml-1",children:"Save 33%"})]})]})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:xg.map(o=>y.jsxs("div",{className:`card p-6 flex flex-col relative transition-all ${o.popular?"border-[#4fc3f7] shadow-[0_0_30px_rgba(79,195,247,0.1)]":o.color}`,children:[o.popular&&y.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:y.jsx("span",{className:"bg-[#1565c0] text-white text-xs font-bold px-3 py-1 rounded-full",children:" Most Popular"})}),y.jsx("h3",{className:"text-lg font-bold text-[#e0e6f0] mb-1",style:{fontFamily:"Space Grotesk"},children:o.name}),y.jsx("p",{className:"text-[#607d9b] text-sm mb-4",children:o.description}),y.jsxs("div",{className:"mb-6",children:[y.jsxs("span",{className:"text-4xl font-bold text-[#e0e6f0]",style:{fontFamily:"Space Grotesk"},children:["",n?o.annualMonthly.toFixed(0):o.monthlyPrice]}),y.jsx("span",{className:"text-[#607d9b] text-sm",children:"/mo"}),n&&y.jsxs("p",{className:"text-[#546e7a] text-xs mt-1",children:["Billed ",o.annualPrice,"/year"]})]}),y.jsx("ul",{className:"flex-1 space-y-2 mb-6",children:o.features.map(a=>y.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[y.jsx("span",{className:"text-[#69f0ae] mt-0.5",children:""}),y.jsx("span",{className:"text-[#607d9b]",children:a})]},a))}),y.jsx(jt,{to:"/signup",className:`block text-center no-underline py-2.5 rounded-lg font-semibold text-sm transition-all ${o.popular?"bg-[#1565c0] hover:bg-[#1976d2] text-white":"border border-[#1e3050] text-[#e0e6f0] hover:bg-[#1a2d45]"}`,children:"Start Free Trial"})]},o.id))}),y.jsx("p",{className:"text-center text-[#546e7a] text-sm",children:"14-day free trial  No credit card required  Cancel anytime  30-day money-back guarantee"})]})}),y.jsx("section",{className:"py-20 px-6",style:{background:"var(--bg-secondary)"},id:"faq",children:y.jsxs("div",{className:"max-w-3xl mx-auto",children:[y.jsx("div",{className:"text-center mb-12",children:y.jsx("h2",{className:"text-3xl font-bold text-[#e0e6f0] mb-3",style:{fontFamily:"Space Grotesk"},children:"Frequently Asked Questions"})}),y.jsx("div",{className:"space-y-3",children:NS.map((o,a)=>y.jsxs("div",{className:"card overflow-hidden",children:[y.jsxs("button",{className:"w-full px-5 py-4 text-left flex items-center justify-between bg-transparent border-none cursor-pointer",onClick:()=>s(t===a?null:a),children:[y.jsx("span",{className:"text-[#e0e6f0] font-medium text-sm",children:o.q}),y.jsx("span",{className:"text-[#607d9b] text-lg flex-shrink-0 ml-3",children:t===a?"":"+"})]}),t===a&&y.jsx("div",{className:"px-5 pb-4 text-[#607d9b] text-sm leading-relaxed border-t border-[#1a2d45]",style:{paddingTop:12},children:o.a})]},a))})]})}),y.jsx("section",{className:"py-24 px-6 text-center",children:y.jsxs("div",{className:"max-w-2xl mx-auto",children:[y.jsx("div",{className:"text-5xl mb-4 float-anim inline-block",children:""}),y.jsx("h2",{className:"text-4xl font-bold text-[#e0e6f0] mb-4",style:{fontFamily:"Space Grotesk"},children:"Ready to scan smarter?"}),y.jsx("p",{className:"text-[#607d9b] text-lg mb-8",children:"Join traders using Cedars Wave to find setups in seconds, not hours."}),y.jsx(jt,{to:"/signup",className:"btn-primary text-base py-3 px-10 no-underline inline-block",children:" Start Your Free 14-Day Trial"}),y.jsx("p",{className:"text-[#546e7a] text-sm mt-4",children:"No credit card required"})]})}),y.jsxs("footer",{className:"border-t border-[#1e3050] px-6 py-8 text-center",style:{background:"var(--bg-secondary)"},children:[y.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[y.jsx("span",{className:"text-xl",children:""}),y.jsx("span",{className:"text-[#607d9b] font-medium",style:{fontFamily:"Space Grotesk"},children:"Cedars Wave"})]}),y.jsx("p",{className:"text-[#546e7a] text-xs mb-2",children:" 2026 A.K. Cedars CY LTD  Glyfadas 7a, Kamares, Larnaca 6040, Cyprus"}),y.jsx("p",{className:"text-[#37474f] text-xs",children:"Made with Claude Opus 4.6 "})]})]})}function PS(){var _,S;const{login:n}=oo(),e=so(),t=os(),[s,o]=z.useState(""),[a,u]=z.useState(""),[h,d]=z.useState(!1),[p,v]=z.useState(""),g=((S=(_=t.state)==null?void 0:_.from)==null?void 0:S.pathname)||"/dashboard";async function w(x){x.preventDefault(),v(""),d(!0);try{await n(s,a),e(g,{replace:!0})}catch(k){v(k.message||"Login failed")}finally{d(!1)}}return y.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"var(--bg-primary)"},children:y.jsxs("div",{className:"w-full max-w-sm",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("div",{className:"text-5xl mb-3 float-anim inline-block",children:""}),y.jsx("h1",{className:"text-2xl font-bold text-[#e0e6f0]",style:{fontFamily:"Space Grotesk"},children:"Cedars Wave"}),y.jsx("p",{className:"text-[#607d9b] text-sm mt-1",children:"Sign in to your account"})]}),y.jsxs("div",{className:"card p-6",children:[y.jsxs("form",{onSubmit:w,className:"flex flex-col gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-[#607d9b] text-xs mb-1.5",children:"Email"}),y.jsx("input",{type:"email",className:"input-base w-full",placeholder:"you@example.com",value:s,onChange:x=>o(x.target.value),required:!0,autoComplete:"email"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-[#607d9b] text-xs mb-1.5",children:"Password"}),y.jsx("input",{type:"password",className:"input-base w-full",placeholder:"",value:a,onChange:x=>u(x.target.value),required:!0,autoComplete:"current-password"})]}),p&&y.jsx("div",{className:"bg-[#3a0000] border border-[#c62828] text-[#ef9a9a] text-sm rounded-lg px-3 py-2",children:p}),y.jsx("button",{type:"submit",disabled:h,className:"btn-primary py-2.5 w-full disabled:opacity-50",children:h?"Signing in...":"Sign In"})]}),y.jsxs("div",{className:"text-center mt-4 text-sm text-[#607d9b]",children:["Don't have an account?"," ",y.jsx(jt,{to:"/signup",className:"text-[#4fc3f7] hover:underline",children:"Sign up free"})]})]}),y.jsx("div",{className:"text-center mt-4",children:y.jsx(jt,{to:"/",className:"text-[#546e7a] text-xs hover:text-[#607d9b]",children:" Back to home"})})]})})}function OS(){const{signup:n}=oo(),e=so(),[t,s]=z.useState(""),[o,a]=z.useState(""),[u,h]=z.useState(""),[d,p]=z.useState(!1),[v,g]=z.useState(""),[w,_]=z.useState(!1);async function S(x){if(x.preventDefault(),g(""),o!==u){g("Passwords do not match");return}if(o.length<8){g("Password must be at least 8 characters");return}p(!0);try{await n(t,o),_(!0),setTimeout(()=>e("/dashboard"),2e3)}catch(k){g(k.message||"Signup failed")}finally{p(!1)}}return w?y.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"var(--bg-primary)"},children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"text-5xl mb-4",children:""}),y.jsx("h2",{className:"text-2xl font-bold text-[#e0e6f0] mb-2",style:{fontFamily:"Space Grotesk"},children:"Welcome aboard!"}),y.jsx("p",{className:"text-[#607d9b]",children:"Your 14-day free trial has started. Redirecting to dashboard..."})]})}):y.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"var(--bg-primary)"},children:y.jsxs("div",{className:"w-full max-w-sm",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("div",{className:"text-5xl mb-3 float-anim inline-block",children:""}),y.jsx("h1",{className:"text-2xl font-bold text-[#e0e6f0]",style:{fontFamily:"Space Grotesk"},children:"Start Free Trial"}),y.jsx("p",{className:"text-[#607d9b] text-sm mt-1",children:"14 days  Full Pro access  No credit card"})]}),y.jsxs("div",{className:"card p-6",children:[y.jsxs("form",{onSubmit:S,className:"flex flex-col gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-[#607d9b] text-xs mb-1.5",children:"Email"}),y.jsx("input",{type:"email",className:"input-base w-full",placeholder:"you@example.com",value:t,onChange:x=>s(x.target.value),required:!0,autoComplete:"email"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-[#607d9b] text-xs mb-1.5",children:"Password"}),y.jsx("input",{type:"password",className:"input-base w-full",placeholder:"Min. 8 characters",value:o,onChange:x=>a(x.target.value),required:!0,autoComplete:"new-password"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-[#607d9b] text-xs mb-1.5",children:"Confirm Password"}),y.jsx("input",{type:"password",className:"input-base w-full",placeholder:"",value:u,onChange:x=>h(x.target.value),required:!0})]}),v&&y.jsx("div",{className:"bg-[#3a0000] border border-[#c62828] text-[#ef9a9a] text-sm rounded-lg px-3 py-2",children:v}),y.jsx("button",{type:"submit",disabled:d,className:"btn-primary py-2.5 w-full disabled:opacity-50",children:d?"Creating account...":" Start Free Trial"}),y.jsx("p",{className:"text-[#546e7a] text-xs text-center",children:"By signing up you agree to our Terms & Privacy Policy."})]}),y.jsxs("div",{className:"text-center mt-4 text-sm text-[#607d9b]",children:["Already have an account?"," ",y.jsx(jt,{to:"/login",className:"text-[#4fc3f7] hover:underline",children:"Sign in"})]})]}),y.jsx("div",{className:"text-center mt-4",children:y.jsx(jt,{to:"/",className:"text-[#546e7a] text-xs hover:text-[#607d9b]",children:" Back to home"})})]})})}function LS(n,e){let t;try{t=n()}catch{return}return{getItem:o=>{var a;const u=d=>d===null?null:JSON.parse(d,void 0),h=(a=t.getItem(o))!=null?a:null;return h instanceof Promise?h.then(u):u(h)},setItem:(o,a)=>t.setItem(o,JSON.stringify(a,void 0)),removeItem:o=>t.removeItem(o)}}const rh=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(s){return rh(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return rh(s)(t)}}}},AS=(n,e)=>(t,s,o)=>{let a={storage:LS(()=>window.localStorage),partialize:k=>k,version:0,merge:(k,C)=>({...C,...k}),...e},u=!1,h=0;const d=new Set,p=new Set;let v=a.storage;if(!v)return n((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),t(...k)},s,o);const g=()=>{const k=a.partialize({...s()});return v.setItem(a.name,{state:k,version:a.version})},w=o.setState;o.setState=(k,C)=>(w(k,C),g());const _=n((...k)=>(t(...k),g()),s,o);o.getInitialState=()=>_;let S;const x=()=>{var k,C;if(!v)return;const R=++h;u=!1,d.forEach(j=>{var U;return j((U=s())!=null?U:_)});const P=((C=a.onRehydrateStorage)==null?void 0:C.call(a,(k=s())!=null?k:_))||void 0;return rh(v.getItem.bind(v))(a.name).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==a.version){if(a.migrate){const U=a.migrate(j.state,j.version);return U instanceof Promise?U.then(B=>[!0,B]):[!0,U]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,j.state];return[!1,void 0]}).then(j=>{var U;if(R!==h)return;const[B,G]=j;if(S=a.merge(G,(U=s())!=null?U:_),t(S,!0),B)return g()}).then(()=>{R===h&&(P==null||P(S,void 0),S=s(),u=!0,p.forEach(j=>j(S)))}).catch(j=>{R===h&&(P==null||P(void 0,j))})};return o.persist={setOptions:k=>{a={...a,...k},k.storage&&(v=k.storage)},clearStorage:()=>{v==null||v.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>x(),hasHydrated:()=>u,onHydrate:k=>(d.add(k),()=>{d.delete(k)}),onFinishHydration:k=>(p.add(k),()=>{p.delete(k)})},a.skipHydration||x(),S||_},MS=AS,IS=["BTCUSDT","ETHUSDT","SOLUSDT","XRPUSDT","BNBUSDT","AVAXUSDT","LINKUSDT","DOGEUSDT","LTCUSDT","DOTUSDT"],_g=gg()(MS((n,e)=>({symbols:IS,results:[],favorites:new Set,scanning:!1,lastScanTime:null,settings:{interval:"15m",limit:60,minScore:4,refreshInterval:60},addSymbol:t=>{const{symbols:s}=e();s.includes(t)||n({symbols:[...s,t]})},removeSymbol:t=>{const{symbols:s,favorites:o}=e(),a=new Set(o);a.delete(t),n({symbols:s.filter(u=>u!==t),favorites:a})},setSymbols:t=>n({symbols:t}),setResults:t=>n({results:t}),toggleFavorite:t=>{const{favorites:s}=e(),o=new Set(s);o.has(t)?o.delete(t):o.add(t),n({favorites:o})},setScanning:t=>n({scanning:t}),setLastScanTime:t=>n({lastScanTime:t}),updateSettings:t=>n(s=>({settings:{...s.settings,...t}}))}),{name:"cedars-wave-scanner",partialize:n=>({symbols:n.symbols,favorites:Array.from(n.favorites),settings:n.settings}),onRehydrateStorage:()=>n=>{n&&Array.isArray(n.favorites)&&(n.favorites=new Set(n.favorites))}})),$S="https://fapi.binance.com",zS="https://query1.finance.yahoo.com/v8/finance/chart",DS="https://corsproxy.io/?";function US(n){const e=n.trim().toUpperCase();return/^.+(USDT|BUSD|BTCB|ETHB|BNB)$/.test(e)?"crypto":/^[A-Z]{6}(=X)?$/.test(e)?"forex":"stock"}function oh(n){const e=n.trim().toUpperCase(),t=US(e);return t==="forex"&&!e.endsWith("=X")?{sym:e+"=X",display:e,type:t}:{sym:e,display:e.replace("=X",""),type:t}}async function FS(n,e,t){const s=`${$S}/fapi/v1/klines?symbol=${n}&interval=${e}&limit=${t}`,o=await fetch(s);if(!o.ok)throw new Error(`Binance error: ${o.status}`);return o.json()}async function BS(n,e,t){var w,_,S,x,k;const a=`${DS}${encodeURIComponent(`${zS}/${n}?interval=${e==="5m"?"5m":e==="15m"?"15m":e==="1h"?"60m":"1d"}&range=${e==="4h"||e==="1d"?"60d":"5d"}&includePrePost=false`)}`,u=await fetch(a,{headers:{Accept:"application/json"}});if(!u.ok)throw new Error(`Yahoo error: ${u.status}`);const h=await u.json(),d=(_=(w=h==null?void 0:h.chart)==null?void 0:w.result)==null?void 0:_[0];if(!d)throw new Error("No Yahoo data");const p=d.timestamps||d.timestamp,v=(x=(S=d.indicators)==null?void 0:S.quote)==null?void 0:x[0];if(!v||!p)throw new Error("No quote data");const g=[];for(let C=0;C<p.length;C++)v.open[C]==null||v.close[C]==null||g.push([p[C]*1e3,String(v.open[C]),String(v.high[C]),String(v.low[C]),String(v.close[C]),String(((k=v.volume)==null?void 0:k[C])||0)]);return g.slice(-t)}async function VS(n,e,t,s){return e==="crypto"?FS(n,t,s):BS(n,t,s)}function jr(n,e){const t=2/(e+1);let s=n[0];for(let o=1;o<n.length;o++)s=n[o]*t+s*(1-t);return s}function xc(n,e){const t=2/(e+1),s=[];let o=n[0];s.push(o);for(let a=1;a<n.length;a++)o=n[a]*t+o*(1-t),s.push(o);return s}function ah(n,e=14){if(n.length<e+1)return 50;let t=0,s=0;for(let o=n.length-e;o<n.length;o++){const a=n[o]-n[o-1];a>0?t+=a:s+=Math.abs(a)}return s===0?100:parseFloat((100-100/(1+t/e/(s/e))).toFixed(1))}function WS(n,e=14){const t=[];for(let s=e;s<n.length;s++)t.push({idx:s,rsi:ah(n.slice(s-e,s+1),e)});return t}function Sg(n,e=20,t=2){const s=n.slice(-e),o=s.reduce((h,d)=>h+d,0)/s.length,a=s.reduce((h,d)=>h+Math.pow(d-o,2),0)/s.length,u=Math.sqrt(a);return{upper:o+t*u,middle:o,lower:o-t*u}}function KS(n,e=14){const t=[];for(let o=1;o<n.length;o++){const a=parseFloat(String(n[o][2])),u=parseFloat(String(n[o][3])),h=parseFloat(String(n[o-1][4]));t.push(Math.max(a-u,Math.abs(a-h),Math.abs(u-h)))}const s=t.slice(-e);return s.reduce((o,a)=>o+a,0)/s.length}function qS(n){let e=0,t=0;for(const s of n){const o=(parseFloat(String(s[2]))+parseFloat(String(s[3]))+parseFloat(String(s[4])))/3,a=parseFloat(String(s[5]));e+=o*a,t+=a}return t>0?e/t:0}function HS(n){let e=0;for(let t=n.length-1;t>=0&&parseFloat(String(n[t][4]))>parseFloat(String(n[t][1]));t--)e++;return e}function GS(n,e,t){const{display:s}=oh(n),o=t.map(H=>parseFloat(String(H[4]))),a=t.map(H=>parseFloat(String(H[5]))),u=o[o.length-1],h=jr(o.slice(-20),9),d=jr(o.slice(-30),21),p=jr(o.slice(-60),50),v=ah(o.slice(-16)),g=ah(o.slice(-17,-1)),w=v>g,_=a[a.length-1],S=a.slice(-11,-1).reduce((H,O)=>H+O,0)/10,x=S>0?(_/S).toFixed(2):"1.00",k=jr(o.slice(-30),12),C=jr(o.slice(-40),26),R=k-C,P=Sg(o,Math.min(20,o.length)),j=P.upper-P.lower,U=j>0?(u-P.lower)/j:.5,B=KS(t),G=(u-2*B).toFixed(4),Q=u>0?(B/u*100).toFixed(2):"0",ie=B>0?u*.03/(2*B):0,we=qS(t),Le=HS(t);let xe=0;const he=[];h>d&&d>p?(xe++,he.push({label:"EMA9>21>50",ok:!0})):he.push({label:"EMA Stack",ok:!1}),v>=50&&v<=80?(xe++,he.push({label:`RSI ${v} `,ok:!0})):v>80?he.push({label:`RSI ${v} `,ok:"warn"}):he.push({label:`RSI ${v}`,ok:!1}),w?(xe++,he.push({label:"RSI Rising",ok:!0})):he.push({label:"RSI Falling",ok:!1}),parseFloat(x)>=1.3?(xe++,he.push({label:`Vol ${x}`,ok:!0})):he.push({label:`Vol ${x}`,ok:!1}),h>d?(xe++,he.push({label:"Trend BULL",ok:!0})):he.push({label:"Trend BEAR",ok:!1}),R>0?(xe++,he.push({label:"MACD+",ok:!0})):he.push({label:"MACD",ok:!1}),U<.35?(xe++,he.push({label:`BB Lower (${(U*100).toFixed(0)}%)`,ok:!0})):U>.8?he.push({label:`BB Upper (${(U*100).toFixed(0)}%)`,ok:"warn"}):he.push({label:`BB Mid (${(U*100).toFixed(0)}%)`,ok:!1}),ie>=1?(xe++,he.push({label:"ATR RR 1:1",ok:!0})):he.push({label:"ATR RR <1:1",ok:!1}),we>0&&u>we?(xe++,he.push({label:"Above VWAP",ok:!0})):he.push({label:"Below VWAP",ok:!1}),Le>=3?(xe++,he.push({label:`${Le} Green Candles`,ok:!0})):he.push({label:Le===0?"No Green Run":`${Le} Green`,ok:!1});let _e,Fe;xe>=8?(_e=" STRONG",Fe="fire"):xe>=6?(_e=" VALID",Fe="valid"):xe>=4?(_e=" WEAK",Fe="weak"):(_e=" SKIP",Fe="skip");const Ae=(u*1.03).toFixed(4),be=(u*1.05).toFixed(4),q=h.toFixed(4),ne=d.toFixed(4);return{sym:n,display:s,type:e,score:xe,grade:_e,gradeClass:Fe,sigs:he,price:u,rsiNow:v,rsiPrev:g,rsiRising:w,e9:h,e21:d,e50:p,macd:R.toFixed(6),volRatio:x,entryLimit:q,tp3:Ae,tp5:be,stop:ne,atrStop:G,atrPct:Q,vwap:we.toFixed(4),greenCount:Le,bb:P,closes:o,vols:a,times:t.map(H=>H[0]),klines:t,scanTime:new Date().toLocaleTimeString()}}function kg(){const{symbols:n,results:e,scanning:t,lastScanTime:s,settings:o,addSymbol:a,removeSymbol:u,setResults:h,toggleFavorite:d,setScanning:p,setLastScanTime:v,updateSettings:g,favorites:w}=_g(),{canAddPair:_}=zs(),S=z.useRef(null),x=z.useCallback(async()=>{var U;if(t)return;(U=S.current)==null||U.abort(),S.current=new AbortController,p(!0);const j=[];for(const B of n)try{const{sym:G,type:Q}=oh(B),ie=await VS(G,Q,o.interval,o.limit);if(!ie||ie.length<30)continue;const we=GS(B,Q,ie);j.push(we)}catch(G){console.error(`Failed to scan ${B}:`,G)}j.sort((B,G)=>G.score-B.score),h(j),v(new Date().toLocaleTimeString()),p(!1)},[n,t,o]),k=z.useCallback(j=>{const{sym:U}=oh(j.trim().toUpperCase());if(n.includes(U))throw new Error(`${U} is already in the list`);if(!_(n.length))throw new Error("Upgrade to Pro to add more pairs");a(U)},[n,_,a]),C=z.useCallback(j=>{u(j)},[u]),R=e.filter(j=>j.score>=o.minScore),P={strong:e.filter(j=>j.score>=8).length,valid:e.filter(j=>j.score>=6&&j.score<8).length,weak:e.filter(j=>j.score>=4&&j.score<6).length,skip:e.filter(j=>j.score<4).length,total:e.length,best:e[0]??null};return{symbols:n,results:R,allResults:e,favorites:w,scanning:t,lastScanTime:s,settings:o,summary:P,runScan:x,addPair:k,removePair:C,toggleFavorite:d,updateSettings:g}}function Re(n){var e=n.width,t=n.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(t<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:t}}function Ls(n,e){return n.width===e.width&&n.height===e.height}var JS=(function(){function n(e){var t=this;this._resolutionListener=function(){return t._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return n.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(n.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),n.prototype.subscribe=function(e){var t=this,s={next:e};return this._observers.push(s),{unsubscribe:function(){t._observers=t._observers.filter(function(o){return o!==s})}}},n.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},n.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},n.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},n.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(t){return t.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},n})();function QS(n){return new JS(n)}var XS=(function(){function n(e,t,s){var o;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=Re({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=t??(function(a){return a}),this._allowResizeObserver=(o=s==null?void 0:s.allowResizeObserver)!==null&&o!==void 0?o:!0,this._chooseAndInitObserver()}return n.prototype.dispose=function(){var e,t;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(t=this._devicePixelRatioObservable)===null||t===void 0||t.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(n.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bitmapSize",{get:function(){return Re({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),n.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=Re(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},n.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(t){return t!==e})},Object.defineProperty(n.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),n.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(t){return t!==e})},n.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},n.prototype._resizeBitmap=function(e){var t=this.bitmapSize;Ls(t,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(t,e))},n.prototype._emitBitmapSizeChanged=function(e,t){var s=this;this._bitmapSizeChangedListeners.forEach(function(o){return o.call(s,e,t)})},n.prototype._suggestNewBitmapSize=function(e){var t=this._suggestedBitmapSize,s=Re(this._transformBitmapSize(e,this._canvasElementClientSize)),o=Ls(this.bitmapSize,s)?null:s;t===null&&o===null||t!==null&&o!==null&&Ls(t,o)||(this._suggestedBitmapSize=o,this._emitSuggestedBitmapSizeChanged(t,o))},n.prototype._emitSuggestedBitmapSizeChanged=function(e,t){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(o){return o.call(s,e,t)})},n.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}ZS().then(function(t){return t?e._initResizeObserver():e._initDevicePixelRatioObservable()})},n.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var t=Om(this._canvasElement);if(t===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=QS(t),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},n.prototype._invalidateBitmapSize=function(){var e,t;if(this._canvasElement!==null){var s=Om(this._canvasElement);if(s!==null){var o=(t=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&t!==void 0?t:s.devicePixelRatio,a=this._canvasElement.getClientRects(),u=a[0]!==void 0?e1(a[0],o):Re({width:this._canvasElementClientSize.width*o,height:this._canvasElementClientSize.height*o});this._suggestNewBitmapSize(u)}}},n.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(t){var s=t.find(function(u){return u.target===e._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var o=s.devicePixelContentBoxSize[0],a=Re({width:o.inlineSize,height:o.blockSize});e._suggestNewBitmapSize(a)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},n})();function YS(n,e){return new XS(n,e.transform,e.options)}function Om(n){return n.ownerDocument.defaultView}function ZS(){return new Promise(function(n){var e=new ResizeObserver(function(t){n(t.every(function(s){return"devicePixelContentBoxSize"in s})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function e1(n,e){return Re({width:Math.round(n.left*e+n.width*e)-Math.round(n.left*e),height:Math.round(n.top*e+n.height*e)-Math.round(n.top*e)})}var t1=(function(){function n(e,t,s){if(t.width===0||t.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=t,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=e}return n.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},n.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(n.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),n})();function As(n,e){var t=n.canvasElementClientSize;if(t.width===0||t.height===0)return null;var s=n.bitmapSize;if(s.width===0||s.height===0)return null;var o=n.canvasElement.getContext("2d",e);return o===null?null:new t1(o,t,s)}/*!
 * @license
 * TradingView Lightweight Charts v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const n1={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},s1={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},i1={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},r1={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},o1={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},a1={color:"#26a69a",base:0},Eg={color:"#2196f3"},Cg={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Lm,Am;function Ms(n,e){const t={0:[],1:[n.lineWidth,n.lineWidth],2:[2*n.lineWidth,2*n.lineWidth],3:[6*n.lineWidth,6*n.lineWidth],4:[n.lineWidth,4*n.lineWidth]}[e];n.setLineDash(t)}function Tg(n,e,t,s){n.beginPath();const o=n.lineWidth%2?.5:0;n.moveTo(t,e+o),n.lineTo(s,e+o),n.stroke()}function is(n,e){if(!n)throw new Error("Assertion failed"+(e?": "+e:""))}function pt(n){if(n===void 0)throw new Error("Value is undefined");return n}function W(n){if(n===null)throw new Error("Value is null");return n}function xi(n){return W(pt(n))}(function(n){n[n.Simple=0]="Simple",n[n.WithSteps=1]="WithSteps",n[n.Curved=2]="Curved"})(Lm||(Lm={})),(function(n){n[n.Solid=0]="Solid",n[n.Dotted=1]="Dotted",n[n.Dashed=2]="Dashed",n[n.LargeDashed=3]="LargeDashed",n[n.SparseDotted=4]="SparseDotted"})(Am||(Am={}));const Mm={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function It(n){return n<0?0:n>255?255:Math.round(n)||0}function jg(n){return n<=0||n>1?Math.min(Math.max(n,0),1):Math.round(1e4*n)/1e4}const l1=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,u1=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,c1=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,h1=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function Jr(n){(n=n.toLowerCase())in Mm&&(n=Mm[n]);{const e=h1.exec(n)||c1.exec(n);if(e)return[It(parseInt(e[1],10)),It(parseInt(e[2],10)),It(parseInt(e[3],10)),jg(e.length<5?1:parseFloat(e[4]))]}{const e=u1.exec(n);if(e)return[It(parseInt(e[1],16)),It(parseInt(e[2],16)),It(parseInt(e[3],16)),1]}{const e=l1.exec(n);if(e)return[It(17*parseInt(e[1],16)),It(17*parseInt(e[2],16)),It(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${n}`)}function Ng(n){return .199*n[0]+.687*n[1]+.114*n[2]}function ll(n){const e=Jr(n);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:Ng(e)>160?"black":"white"}}class We{constructor(){this.h=[]}l(e,t,s){const o={o:e,_:t,u:s===!0};this.h.push(o)}v(e){const t=this.h.findIndex((s=>e===s.o));t>-1&&this.h.splice(t,1)}p(e){this.h=this.h.filter((t=>t._!==e))}m(e,t,s){const o=[...this.h];this.h=this.h.filter((a=>!a.u)),o.forEach((a=>a.o(e,t,s)))}M(){return this.h.length>0}S(){this.h=[]}}function Yt(n,...e){for(const t of e)for(const s in t)t[s]!==void 0&&Object.prototype.hasOwnProperty.call(t,s)&&!["__proto__","constructor","prototype"].includes(s)&&(typeof t[s]!="object"||n[s]===void 0||Array.isArray(t[s])?n[s]=t[s]:Yt(n[s],t[s]));return n}function cn(n){return typeof n=="number"&&isFinite(n)}function Qr(n){return typeof n=="number"&&n%1==0}function ao(n){return typeof n=="string"}function Aa(n){return typeof n=="boolean"}function Sn(n){const e=n;if(!e||typeof e!="object")return e;let t,s,o;for(s in t=Array.isArray(e)?[]:{},e)e.hasOwnProperty(s)&&(o=e[s],t[s]=o&&typeof o=="object"?Sn(o):o);return t}function d1(n){return n!==null}function Xr(n){return n===null?void 0:n}const Sh="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Ai(n,e,t){return e===void 0&&(e=Sh),`${t=t!==void 0?`${t} `:""}${n}px ${e}`}class f1{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,t=this.j(),s=this.H();return e.P===t&&e.D===s||(e.P=t,e.D=s,e.R=Ai(t,s),e.L=2.5/12*t,e.B=e.L,e.A=t/12*e.T,e.I=t/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class kh{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,t,s){this.Y.forEach((o=>{o.X(e,t,s)}))}}class Zt{X(e,t,s){e.useBitmapCoordinateSpace((o=>this.K(o,t,s)))}}class p1 extends Zt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:s}){if(this.G===null||this.G.tt===null)return;const o=this.G.tt,a=this.G,u=Math.max(1,Math.floor(t))%2/2,h=d=>{e.beginPath();for(let p=o.to-1;p>=o.from;--p){const v=a.it[p],g=Math.round(v.nt*t)+u,w=v.st*s,_=d*s+u;e.moveTo(g,w),e.arc(g,w,_,0,2*Math.PI)}e.fill()};a.et>0&&(e.fillStyle=a.rt,h(a.ht+a.et)),e.fillStyle=a.lt,h(a.ht)}}function m1(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const v1={from:0,to:1};class g1{constructor(e,t){this.ut=new kh,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=t,this.ut.Z(this.ct)}bt(e){const t=this.F.wt();t.length!==this.ct.length&&(this.dt=t.map(m1),this.ct=this.dt.map((s=>{const o=new p1;return o.J(s),o})),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,t=this.F.wt(),s=this.vt.xt(),o=this.F.St();t.forEach(((a,u)=>{var h;const d=this.dt[u],p=a.kt(s);if(e||p===null||!a.yt())return void(d.tt=null);const v=W(a.Ct());d.lt=p.Tt,d.ht=p.ht,d.et=p.Pt,d.it[0]._t=p._t,d.it[0].st=a.Dt().Rt(p._t,v.Vt),d.rt=(h=p.Ot)!==null&&h!==void 0?h:this.F.Bt(d.it[0].st/a.Dt().At()),d.it[0].ot=s,d.it[0].nt=o.It(s),d.tt=v1}))}}class y1 extends Zt{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:t,horizontalPixelRatio:s,verticalPixelRatio:o}){if(this.zt===null)return;const a=this.zt.Lt.yt,u=this.zt.Et.yt;if(!a&&!u)return;const h=Math.round(this.zt.nt*s),d=Math.round(this.zt.st*o);e.lineCap="butt",a&&h>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*s),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,Ms(e,this.zt.Lt.Nt),(function(p,v,g,w){p.beginPath();const _=p.lineWidth%2?.5:0;p.moveTo(v+_,g),p.lineTo(v+_,w),p.stroke()})(e,h,0,t.height)),u&&d>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*o),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,Ms(e,this.zt.Et.Nt),Tg(e,d,0,t.width))}}class w1{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new y1(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),t=W(this.jt.Ht()),s=t.$t().W().crosshair,o=this.Ft;if(s.mode===2)return o.Et.yt=!1,void(o.Lt.yt=!1);o.Et.yt=e&&this.jt.Ut(t),o.Lt.yt=e&&this.jt.qt(),o.Et.et=s.horzLine.width,o.Et.Nt=s.horzLine.style,o.Et.V=s.horzLine.color,o.Lt.et=s.vertLine.width,o.Lt.Nt=s.vertLine.style,o.Lt.V=s.vertLine.color,o.nt=this.jt.Yt(),o.st=this.jt.Zt()}}function b1(n,e,t,s,o,a){n.fillRect(e+a,t,s-2*a,a),n.fillRect(e+a,t+o-a,s-2*a,a),n.fillRect(e,t,a,o),n.fillRect(e+s-a,t,a,o)}function ul(n,e,t,s,o,a){n.save(),n.globalCompositeOperation="copy",n.fillStyle=a,n.fillRect(e,t,s,o),n.restore()}function Im(n,e,t,s,o,a){n.beginPath(),n.roundRect?n.roundRect(e,t,s,o,a):(n.lineTo(e+s-a[1],t),a[1]!==0&&n.arcTo(e+s,t,e+s,t+a[1],a[1]),n.lineTo(e+s,t+o-a[2]),a[2]!==0&&n.arcTo(e+s,t+o,e+s-a[2],t+o,a[2]),n.lineTo(e+a[3],t+o),a[3]!==0&&n.arcTo(e,t+o,e,t+o-a[3],a[3]),n.lineTo(e,t+a[0]),a[0]!==0&&n.arcTo(e,t,e+a[0],t,a[0]))}function $m(n,e,t,s,o,a,u=0,h=[0,0,0,0],d=""){if(n.save(),!u||!d||d===a)return Im(n,e,t,s,o,h),n.fillStyle=a,n.fill(),void n.restore();const p=u/2;var v;Im(n,e+p,t+p,s-u,o-u,(v=-p,h.map((g=>g===0?g:g+v)))),a!=="transparent"&&(n.fillStyle=a,n.fill()),d!=="transparent"&&(n.lineWidth=u,n.strokeStyle=d,n.closePath(),n.stroke()),n.restore()}function Rg(n,e,t,s,o,a,u){n.save(),n.globalCompositeOperation="copy";const h=n.createLinearGradient(0,0,0,o);h.addColorStop(0,a),h.addColorStop(1,u),n.fillStyle=h,n.fillRect(e,t,s,o),n.restore()}class zm{constructor(e,t){this.J(e,t)}J(e,t){this.zt=e,this.Xt=t}At(e,t){return this.zt.yt?e.P+e.L+e.B:0}X(e,t,s,o){if(!this.zt.yt||this.zt.Kt.length===0)return;const a=this.zt.V,u=this.Xt.t,h=e.useBitmapCoordinateSpace((d=>{const p=d.context;p.font=t.R;const v=this.Gt(d,t,s,o),g=v.Jt;return v.Qt?$m(p,g.ti,g.ii,g.ni,g.si,u,g.ei,[g.ht,0,0,g.ht],u):$m(p,g.ri,g.ii,g.ni,g.si,u,g.ei,[0,g.ht,g.ht,0],u),this.zt.hi&&(p.fillStyle=a,p.fillRect(g.ri,g.li,g.ai-g.ri,g.oi)),this.zt._i&&(p.fillStyle=t.O,p.fillRect(v.Qt?g.ui-g.ei:0,g.ii,g.ei,g.ci-g.ii)),v}));e.useMediaCoordinateSpace((({context:d})=>{const p=h.di;d.font=t.R,d.textAlign=h.Qt?"right":"left",d.textBaseline="middle",d.fillStyle=a,d.fillText(this.zt.Kt,p.fi,(p.ii+p.ci)/2+p.pi)}))}Gt(e,t,s,o){var a;const{context:u,bitmapSize:h,mediaSize:d,horizontalPixelRatio:p,verticalPixelRatio:v}=e,g=this.zt.hi||!this.zt.mi?t.T:0,w=this.zt.bi?t.C:0,_=t.L+this.Xt.wi,S=t.B+this.Xt.gi,x=t.A,k=t.I,C=this.zt.Kt,R=t.P,P=s.Mi(u,C),j=Math.ceil(s.xi(u,C)),U=R+_+S,B=t.C+x+k+j+g,G=Math.max(1,Math.floor(v));let Q=Math.round(U*v);Q%2!=G%2&&(Q+=1);const ie=w>0?Math.max(1,Math.floor(w*p)):0,we=Math.round(B*p),Le=Math.round(g*p),xe=(a=this.Xt.Si)!==null&&a!==void 0?a:this.Xt.ki,he=Math.round(xe*v)-Math.floor(.5*v),_e=Math.floor(he+G/2-Q/2),Fe=_e+Q,Ae=o==="right",be=Ae?d.width-w:w,q=Ae?h.width-ie:ie;let ne,H,O;return Ae?(ne=q-we,H=q-Le,O=be-g-x-w):(ne=q+we,H=q+Le,O=be+g+x),{Qt:Ae,Jt:{ii:_e,li:he,ci:Fe,ni:we,si:Q,ht:2*p,ei:ie,ti:ne,ri:q,ai:H,oi:G,ui:h.width},di:{ii:_e/v,ci:Fe/v,fi:O,pi:P}}}}class cl{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||zm)(this.Ci,this.yi),this.Ri=new(e||zm)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,t=!1){return Math.max(this.Pi.At(e,t),this.Ri.At(e,t))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class x1 extends cl{constructor(e,t,s){super(),this.jt=e,this.Li=t,this.Ei=s}zi(e,t,s){if(e.yt=!1,this.jt.W().mode===2)return;const o=this.jt.W().horzLine;if(!o.labelVisible)return;const a=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||a===null)return;const u=ll(o.labelBackgroundColor);s.t=u.t,e.V=u.i;const h=2/12*this.Li.P();s.wi=h,s.gi=h;const d=this.Ei(this.Li);s.ki=d.ki,e.Kt=this.Li.Fi(d._t,a),e.yt=!0}}const _1=/[1-9]/g;class Pg{constructor(){this.zt=null}J(e){this.zt=e}X(e,t){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const s=e.useMediaCoordinateSpace((({context:w})=>(w.font=t.R,Math.round(t.Wi.xi(w,W(this.zt).Kt,_1)))));if(s<=0)return;const o=t.ji,a=s+2*o,u=a/2,h=this.zt.Hi;let d=this.zt.ki,p=Math.floor(d-u)+.5;p<0?(d+=Math.abs(0-p),p=Math.floor(d-u)+.5):p+a>h&&(d-=Math.abs(h-(p+a)),p=Math.floor(d-u)+.5);const v=p+a,g=Math.ceil(0+t.C+t.T+t.L+t.P+t.B);e.useBitmapCoordinateSpace((({context:w,horizontalPixelRatio:_,verticalPixelRatio:S})=>{const x=W(this.zt);w.fillStyle=x.t;const k=Math.round(p*_),C=Math.round(0*S),R=Math.round(v*_),P=Math.round(g*S),j=Math.round(2*_);if(w.beginPath(),w.moveTo(k,C),w.lineTo(k,P-j),w.arcTo(k,P,k+j,P,j),w.lineTo(R-j,P),w.arcTo(R,P,R,P-j,j),w.lineTo(R,C),w.fill(),x.hi){const U=Math.round(x.ki*_),B=C,G=Math.round((B+t.T)*S);w.fillStyle=x.V;const Q=Math.max(1,Math.floor(_)),ie=Math.floor(.5*_);w.fillRect(U-ie,B,Q,G-B)}})),e.useMediaCoordinateSpace((({context:w})=>{const _=W(this.zt),S=0+t.C+t.T+t.L+t.P/2;w.font=t.R,w.textAlign="left",w.textBaseline="middle",w.fillStyle=_.V;const x=t.Wi.Mi(w,"Apr0");w.translate(p+o,S+x),w.fillText(_.Kt,0,0)}))}}class S1{constructor(e,t,s){this.ft=!0,this.Wt=new Pg,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=t,this.Ei=s}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const t=this.vt.W().vertLine;if(!t.labelVisible)return;const s=this.$i.St();if(s.Ni())return;e.Hi=s.Hi();const o=this.Ei();if(o===null)return;e.ki=o.ki;const a=s.Ui(this.vt.xt());e.Kt=s.qi(W(a)),e.yt=!0;const u=ll(t.labelBackgroundColor);e.t=u.t,e.V=u.i,e.hi=s.W().ticksVisible}}class Eh{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var Dm;(function(n){n[n.Normal=0]="Normal",n[n.Magnet=1]="Magnet",n[n.Hidden=2]="Hidden"})(Dm||(Dm={}));class k1 extends Eh{constructor(e,t){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=t,this.dn=new g1(e,this),this.fn=((o,a)=>u=>{const h=a(),d=o();if(u===W(this.tn).vn())return{_t:d,ki:h};{const p=W(u.Ct());return{_t:u.pn(h,p),ki:h}}})((()=>this.nn),(()=>this.an));const s=((o,a)=>()=>{const u=this.$i.St().mn(o()),h=a();return u&&Number.isFinite(h)?{ot:u,ki:h}:null})((()=>this.sn),(()=>this.Yt()));this.bn=new S1(this,e,s),this.wn=new w1(this)}W(){return this.cn}gn(e,t){this._n=e,this.un=t}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,t,s){this.hn||(this.hn=!0),this.en=!0,this.yn(e,t,s)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,t){this.en&&this.tn===e||this.rn.clear();const s=[];return this.tn===e&&s.push(this.Dn(this.rn,t,this.fn)),s}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach((e=>e.bt())),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,t,s){this.Bn(e,t,s)&&this.Vn()}Bn(e,t,s){const o=this.ln,a=this.an,u=this.nn,h=this.sn,d=this.tn,p=this.On(s);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=s;const v=p!==null?p.Ct():null;return p!==null&&v!==null?(this.nn=t,this.an=p.Rt(t,v)):(this.nn=NaN,this.an=NaN),o!==this.ln||a!==this.an||h!==this.sn||u!==this.nn||d!==this.tn}Tn(){const e=this.$i.wt().map((s=>s.In().An())).filter(d1),t=e.length===0?null:Math.max(...e);this.sn=t!==null?t:NaN}Dn(e,t,s){let o=e.get(t);return o===void 0&&(o=new x1(this,t,s),e.set(t,o)),o}}function hl(n){return n==="left"||n==="right"}class it{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,t){const s=(function(o,a){return o===void 0?a:{Fn:Math.max(o.Fn,a.Fn),Wn:o.Wn||a.Wn}})(this.zn.get(e),t);this.zn.set(e,s)}jn(){return this.En}Hn(e){const t=this.zn.get(e);return t===void 0?{Fn:this.En}:{Fn:Math.max(this.En,t.Fn),Wn:t.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const t of e.Ln)this.ns(t);this.En=Math.max(this.En,e.En),e.zn.forEach(((t,s)=>{this.Nn(s,t)}))}static ss(){return new it(2)}static es(){return new it(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex((t=>t.qn===5));e!==-1&&this.Ln.splice(e,1)}}const Um=".";function kn(n,e){if(!cn(n))return"n/a";if(!Qr(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?n.toString():("0000000000000000"+n.toString()).slice(-e)}class dl{constructor(e,t){if(t||(t=1),cn(e)&&Qr(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=t,this.hs()}format(e){const t=e<0?"":"";return e=Math.abs(e),t+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const t=this.Li/this.rs;let s=Math.floor(e),o="";const a=this._s!==void 0?this._s:NaN;if(t>1){let u=+(Math.round(e*t)-s*t).toFixed(this._s);u>=t&&(u-=t,s+=1),o=Um+kn(+u.toFixed(this._s)*this.rs,a)}else s=Math.round(s*t)/t,a>0&&(o=Um+kn(0,a));return s.toFixed(0)+o}}class Og extends dl{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class E1{constructor(e){this.us=e}format(e){let t="";return e<0&&(t="-",e=-e),e<995?t+this.cs(e):e<999995?t+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),t+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),t+this.cs(e/1e9)+"B")}cs(e){let t;const s=Math.pow(10,this.us);return t=(e=Math.round(e*s)/s)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),t.replace(/(\.[1-9]*)0+$/,((o,a)=>a))}}function Lg(n,e,t,s,o,a,u){if(e.length===0||s.from>=e.length||s.to<=0)return;const{context:h,horizontalPixelRatio:d,verticalPixelRatio:p}=n,v=e[s.from];let g=a(n,v),w=v;if(s.to-s.from<2){const _=o/2;h.beginPath();const S={nt:v.nt-_,st:v.st},x={nt:v.nt+_,st:v.st};h.moveTo(S.nt*d,S.st*p),h.lineTo(x.nt*d,x.st*p),u(n,g,S,x)}else{const _=(x,k)=>{u(n,g,w,k),h.beginPath(),g=x,w=k};let S=w;h.beginPath(),h.moveTo(v.nt*d,v.st*p);for(let x=s.from+1;x<s.to;++x){S=e[x];const k=a(n,S);switch(t){case 0:h.lineTo(S.nt*d,S.st*p);break;case 1:h.lineTo(S.nt*d,e[x-1].st*p),k!==g&&(_(k,S),h.lineTo(S.nt*d,e[x-1].st*p)),h.lineTo(S.nt*d,S.st*p);break;case 2:{const[C,R]=C1(e,x-1,x);h.bezierCurveTo(C.nt*d,C.st*p,R.nt*d,R.st*p,S.nt*d,S.st*p);break}}t!==1&&k!==g&&(_(k,S),h.moveTo(S.nt*d,S.st*p))}(w!==S||w===S&&t===1)&&u(n,g,w,S)}}const Fm=6;function _c(n,e){return{nt:n.nt-e.nt,st:n.st-e.st}}function Bm(n,e){return{nt:n.nt/e,st:n.st/e}}function C1(n,e,t){const s=Math.max(0,e-1),o=Math.min(n.length-1,t+1);var a,u;return[(a=n[e],u=Bm(_c(n[t],n[s]),Fm),{nt:a.nt+u.nt,st:a.st+u.st}),_c(n[t],Bm(_c(n[o],n[e]),Fm))]}function T1(n,e,t,s,o){const{context:a,horizontalPixelRatio:u,verticalPixelRatio:h}=e;a.lineTo(o.nt*u,n*h),a.lineTo(s.nt*u,n*h),a.closePath(),a.fillStyle=t,a.fill()}class Ag extends Zt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var t;if(this.G===null)return;const{it:s,tt:o,ds:a,et:u,Nt:h,fs:d}=this.G,p=(t=this.G.vs)!==null&&t!==void 0?t:this.G.ps?0:e.mediaSize.height;if(o===null)return;const v=e.context;v.lineCap="butt",v.lineJoin="round",v.lineWidth=u,Ms(v,h),v.lineWidth=1,Lg(e,s,d,o,a,this.bs.bind(this),T1.bind(null,p))}}function lh(n,e,t){return Math.min(Math.max(n,e),t)}function Ma(n,e,t){return e-n<=t}function Mg(n){const e=Math.ceil(n);return e%2==0?e-1:e}class Ch{ws(e,t){const s=this.gs,{Ms:o,xs:a,Ss:u,ks:h,ys:d,vs:p}=t;if(this.Cs===void 0||s===void 0||s.Ms!==o||s.xs!==a||s.Ss!==u||s.ks!==h||s.vs!==p||s.ys!==d){const v=e.context.createLinearGradient(0,0,0,d);if(v.addColorStop(0,o),p!=null){const g=lh(p*e.verticalPixelRatio/d,0,1);v.addColorStop(g,a),v.addColorStop(g,u)}v.addColorStop(1,h),this.Cs=v,this.gs=t}return this.Cs}}class j1 extends Ag{constructor(){super(...arguments),this.Ts=new Ch}bs(e,t){return this.Ts.ws(e,{Ms:t.Ps,xs:"",Ss:"",ks:t.Rs,ys:e.bitmapSize.height})}}function N1(n,e){const t=n.context;t.strokeStyle=e,t.stroke()}class Ig extends Zt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:t,tt:s,ds:o,fs:a,et:u,Nt:h,Ds:d}=this.G;if(s===null)return;const p=e.context;p.lineCap="butt",p.lineWidth=u*e.verticalPixelRatio,Ms(p,h),p.lineJoin="round";const v=this.Vs.bind(this);a!==void 0&&Lg(e,t,a,s,o,v,N1),d&&(function(g,w,_,S,x){const{horizontalPixelRatio:k,verticalPixelRatio:C,context:R}=g;let P=null;const j=Math.max(1,Math.floor(k))%2/2,U=_*C+j;for(let B=S.to-1;B>=S.from;--B){const G=w[B];if(G){const Q=x(g,G);Q!==P&&(R.beginPath(),P!==null&&R.fill(),R.fillStyle=Q,P=Q);const ie=Math.round(G.nt*k)+j,we=G.st*C;R.moveTo(ie,we),R.arc(ie,we,U,0,2*Math.PI)}}R.fill()})(e,t,d,s,v)}}class $g extends Ig{Vs(e,t){return t.lt}}function zg(n,e,t,s,o=0,a=e.length){let u=a-o;for(;0<u;){const h=u>>1,d=o+h;s(e[d],t)===n?(o=d+1,u-=h+1):u=h}return o}const lo=zg.bind(null,!0),Dg=zg.bind(null,!1);function R1(n,e){return n.ot<e}function P1(n,e){return e<n.ot}function Ug(n,e,t){const s=e.Os(),o=e.ui(),a=lo(n,s,R1),u=Dg(n,o,P1);if(!t)return{from:a,to:u};let h=a,d=u;return a>0&&a<n.length&&n[a].ot>=s&&(h=a-1),u>0&&u<n.length&&n[u-1].ot<=o&&(d=u+1),{from:h,to:d}}class Th{constructor(e,t,s){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=t,this.Fs=s}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map((e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot))))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),t=this.Ns.St();if(this.qs(),t.Ni()||e.Ni())return;const s=t.Xs();if(s===null||this.Es.In().Ks()===0)return;const o=this.Es.Ct();o!==null&&(this.Ls=Ug(this.zs,s,this.Fs),this.Gs(e,t,o.Vt),this.Js())}}class fl extends Th{constructor(e,t){super(e,t,!0)}Gs(e,t,s){t.Qs(this.zs,Xr(this.Ls)),e.te(this.zs,s,Xr(this.Ls))}ie(e,t){return{ot:e,_t:t,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map((t=>{const s=t.Vt[3];return this.se(t.ee,s,e)}))}}class O1 extends fl{constructor(e,t){super(e,t),this.js=new kh,this.re=new j1,this.he=new $g,this.js.Z([this.re,this.he])}se(e,t,s){return Object.assign(Object.assign({},this.ie(e,t)),s.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class L1 extends Zt{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:s}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(t),this.ae>=2&&Math.max(1,Math.floor(t))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(t)):this.ae;let o=null;const a=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*t);for(let u=this.zt.tt.from;u<this.zt.tt.to;++u){const h=this.zt.In[u];o!==h.ce&&(e.fillStyle=h.ce,o=h.ce);const d=Math.floor(.5*this.oe),p=Math.round(h.nt*t),v=p-d,g=this.oe,w=v+g-1,_=Math.min(h.de,h.fe),S=Math.max(h.de,h.fe),x=Math.round(_*s)-d,k=Math.round(S*s)+d,C=Math.max(k-x,this.oe);e.fillRect(v,x,g,C);const R=Math.ceil(1.5*this.ae);if(a){if(this.zt.ve){const B=p-R;let G=Math.max(x,Math.round(h.pe*s)-d),Q=G+g-1;Q>x+C-1&&(Q=x+C-1,G=Q-g+1),e.fillRect(B,G,v-B,Q-G+1)}const P=p+R;let j=Math.max(x,Math.round(h.me*s)-d),U=j+g-1;U>x+C-1&&(U=x+C-1,j=U-g+1),e.fillRect(w+1,j,P-w,U-j+1)}}}_e(e){const t=Math.floor(e);return Math.max(t,Math.floor((function(s,o){return Math.floor(.3*s*o)})(W(this.zt).le,e)))}}class Fg extends Th{constructor(e,t){super(e,t,!1)}Gs(e,t,s){t.Qs(this.zs,Xr(this.Ls)),e.be(this.zs,s,Xr(this.Ls))}we(e,t,s){return{ot:e,ge:t.Vt[0],Me:t.Vt[1],xe:t.Vt[2],Se:t.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map((t=>this.se(t.ee,t,e)))}}class A1 extends Fg{constructor(){super(...arguments),this.js=new L1}se(e,t,s){return Object.assign(Object.assign({},this.we(e,t,s)),s.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class M1 extends Ag{constructor(){super(...arguments),this.Ts=new Ch}bs(e,t){const s=this.G;return this.Ts.ws(e,{Ms:t.ke,xs:t.ye,Ss:t.Ce,ks:t.Te,ys:e.bitmapSize.height,vs:s.vs})}}class I1 extends Ig{constructor(){super(...arguments),this.Pe=new Ch}Vs(e,t){const s=this.G;return this.Pe.ws(e,{Ms:t.Re,xs:t.Re,Ss:t.De,ks:t.De,ys:e.bitmapSize.height,vs:s.vs})}}class $1 extends fl{constructor(e,t){super(e,t),this.js=new kh,this.Ve=new M1,this.Oe=new I1,this.js.Z([this.Ve,this.Oe])}se(e,t,s){return Object.assign(Object.assign({},this.ie(e,t)),s.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const t=this.Es.W(),s=this.Es.Dt().Rt(t.baseValue.price,e.Vt),o=this.Ns.St().le();this.Ve.J({it:this.zs,et:t.lineWidth,Nt:t.lineStyle,fs:t.lineType,vs:s,ps:!1,tt:this.Ls,ds:o}),this.Oe.J({it:this.zs,et:t.lineWidth,Nt:t.lineStyle,fs:t.lineVisible?t.lineType:void 0,Ds:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,vs:s,tt:this.Ls,ds:o})}}class z1 extends Zt{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:t}=e;this.ae=(function(a,u){if(a>=2.5&&a<=4)return Math.floor(3*u);const h=1-.2*Math.atan(Math.max(4,a)-4)/(.5*Math.PI),d=Math.floor(a*h*u),p=Math.floor(a*u),v=Math.min(d,p);return Math.max(Math.floor(u),v)})(this.zt.le,t),this.ae>=2&&Math.floor(t)%2!=this.ae%2&&this.ae--;const s=this.zt.In;this.zt.Be&&this.Ae(e,s,this.zt.tt),this.zt._i&&this.Ie(e,s,this.zt.tt);const o=this.ze(t);(!this.zt._i||this.ae>2*o)&&this.Le(e,s,this.zt.tt)}Ae(e,t,s){if(this.zt===null)return;const{context:o,horizontalPixelRatio:a,verticalPixelRatio:u}=e;let h="",d=Math.min(Math.floor(a),Math.floor(this.zt.le*a));d=Math.max(Math.floor(a),Math.min(d,this.ae));const p=Math.floor(.5*d);let v=null;for(let g=s.from;g<s.to;g++){const w=t[g];w.Ee!==h&&(o.fillStyle=w.Ee,h=w.Ee);const _=Math.round(Math.min(w.pe,w.me)*u),S=Math.round(Math.max(w.pe,w.me)*u),x=Math.round(w.de*u),k=Math.round(w.fe*u);let C=Math.round(a*w.nt)-p;const R=C+d-1;v!==null&&(C=Math.max(v+1,C),C=Math.min(C,R));const P=R-C+1;o.fillRect(C,x,P,_-x),o.fillRect(C,S+1,P,k-S),v=R}}ze(e){let t=Math.floor(1*e);this.ae<=2*t&&(t=Math.floor(.5*(this.ae-1)));const s=Math.max(Math.floor(e),t);return this.ae<=2*s?Math.max(Math.floor(e),Math.floor(1*e)):s}Ie(e,t,s){if(this.zt===null)return;const{context:o,horizontalPixelRatio:a,verticalPixelRatio:u}=e;let h="";const d=this.ze(a);let p=null;for(let v=s.from;v<s.to;v++){const g=t[v];g.Ne!==h&&(o.fillStyle=g.Ne,h=g.Ne);let w=Math.round(g.nt*a)-Math.floor(.5*this.ae);const _=w+this.ae-1,S=Math.round(Math.min(g.pe,g.me)*u),x=Math.round(Math.max(g.pe,g.me)*u);if(p!==null&&(w=Math.max(p+1,w),w=Math.min(w,_)),this.zt.le*a>2*d)b1(o,w,S,_-w+1,x-S+1,d);else{const k=_-w+1;o.fillRect(w,S,k,x-S+1)}p=_}}Le(e,t,s){if(this.zt===null)return;const{context:o,horizontalPixelRatio:a,verticalPixelRatio:u}=e;let h="";const d=this.ze(a);for(let p=s.from;p<s.to;p++){const v=t[p];let g=Math.round(Math.min(v.pe,v.me)*u),w=Math.round(Math.max(v.pe,v.me)*u),_=Math.round(v.nt*a)-Math.floor(.5*this.ae),S=_+this.ae-1;if(v.ce!==h){const x=v.ce;o.fillStyle=x,h=x}this.zt._i&&(_+=d,g+=d,S-=d,w-=d),g>w||o.fillRect(_,g,S-_+1,w-g+1)}}}class D1 extends Fg{constructor(){super(...arguments),this.js=new z1}se(e,t,s){return Object.assign(Object.assign({},this.we(e,t,s)),s.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class U1{constructor(e,t){this.Fe=e,this.Li=t}X(e,t,s){this.Fe.draw(e,this.Li,t,s)}}class Sc extends Th{constructor(e,t,s){super(e,t,!1),this.wn=s,this.js=new U1(this.wn.renderer(),(o=>{const a=e.Ct();return a===null?null:e.Dt().Rt(o,a.Vt)}))}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map((t=>Object.assign(Object.assign({ot:t.ee,nt:NaN},e.$s(t.ee)),{He:t.$e})))}Gs(e,t){t.Qs(this.zs,Xr(this.Ls))}Js(){this.wn.update({bars:this.zs.map(F1),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function F1(n){return{x:n.nt,time:n.ot,originalData:n.He,barColor:n.ce}}class B1 extends Zt{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:s}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(t);const o=Math.max(1,Math.floor(s)),a=Math.round(this.zt.Ye*s)-Math.floor(o/2),u=a+o;for(let h=this.zt.tt.from;h<this.zt.tt.to;h++){const d=this.zt.it[h],p=this.Ue[h-this.zt.tt.from],v=Math.round(d.st*s);let g,w;e.fillStyle=d.ce,v<=a?(g=v,w=u):(g=a,w=v-Math.floor(o/2)+o),e.fillRect(p.Os,g,p.ui-p.Os+1,w-g)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const t=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),s=Math.round(this.zt.le*e)-t;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const u=this.zt.it[a],h=Math.round(u.nt*e);let d,p;if(s%2){const v=(s-1)/2;d=h-v,p=h+v}else{const v=s/2;d=h-v,p=h+v-1}this.Ue[a-this.zt.tt.from]={Os:d,ui:p,Ze:h,Xe:u.nt*e,ot:u.ot}}for(let a=this.zt.tt.from+1;a<this.zt.tt.to;a++){const u=this.Ue[a-this.zt.tt.from],h=this.Ue[a-this.zt.tt.from-1];u.ot===h.ot+1&&u.Os-h.ui!==t+1&&(h.Ze>h.Xe?h.ui=u.Os-t-1:u.Os=h.ui+t+1)}let o=Math.ceil(this.zt.le*e);for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const u=this.Ue[a-this.zt.tt.from];u.ui<u.Os&&(u.ui=u.Os);const h=u.ui-u.Os+1;o=Math.min(h,o)}if(t>0&&o<4)for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const u=this.Ue[a-this.zt.tt.from];u.ui-u.Os+1>o&&(u.Ze>u.Xe?u.ui-=1:u.Os+=1)}}}class V1 extends fl{constructor(){super(...arguments),this.js=new B1}se(e,t,s){return Object.assign(Object.assign({},this.ie(e,t)),s.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,W(this.Es.Ct()).Vt)};this.js.J(e)}}class W1 extends fl{constructor(){super(...arguments),this.js=new $g}se(e,t,s){return Object.assign(Object.assign({},this.ie(e,t)),s.$s(e))}Js(){const e=this.Es.W(),t={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(t)}}const K1=/[2-9]/g;class Yr{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,t,s){return this.sr(e,t,s).width}Mi(e,t,s){const o=this.sr(e,t,s);return((o.actualBoundingBoxAscent||0)-(o.actualBoundingBoxDescent||0))/2}sr(e,t,s){const o=s||K1,a=String(t).replace(o,"0");if(this.tr.has(a))return pt(this.tr.get(a)).er;if(this.Ke===this.ir){const h=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(h),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const u=e.measureText(a);return e.restore(),u.width===0&&t.length||(this.tr.set(a,{er:u,rr:this.Ge}),this.Qe[this.Ge]=a,this.Ke++,this.Ge++),u}}class q1{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,t,s){this.hr=e,this.k=t,this.lr=s}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class Bg{constructor(e,t,s){this.ur=e,this.ar=new Yr(50),this.cr=t,this.F=s,this.j=-1,this.Wt=new q1(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const t=e.vr(this.cr)?e.pr():this.cr.Dt();if(t===null)return null;const s=e.mr(t);if(s==="overlay")return null;const o=this.F.br();return o.P!==this.j&&(this.j=o.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),o,s),this.Wt}}class H1 extends Zt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,t){var s;if(!(!((s=this.zt)===null||s===void 0)&&s.yt))return null;const{st:o,et:a,gr:u}=this.zt;return t>=o-a-7&&t<=o+a+7?{Mr:this.zt,gr:u}:null}K({context:e,bitmapSize:t,horizontalPixelRatio:s,verticalPixelRatio:o}){if(this.zt===null||this.zt.yt===!1)return;const a=Math.round(this.zt.st*o);a<0||a>t.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*s),Ms(e,this.zt.Nt),Tg(e,a,0,t.width))}}class jh{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new H1,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class G1 extends jh{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),t=e.Cr().Cr;if(t!==2&&t!==3)return;const s=this.Es.W();if(!s.baseLineVisible||!this.Es.yt())return;const o=this.Es.Ct();o!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(o.Vt,o.Vt),this.Sr.V=s.baseLineColor,this.Sr.et=s.baseLineWidth,this.Sr.Nt=s.baseLineStyle)}}class J1 extends Zt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:s}){const o=this.zt;if(o===null)return;const a=Math.max(1,Math.floor(t)),u=a%2/2,h=Math.round(o.Xe.x*t)+u,d=o.Xe.y*s;e.fillStyle=o.Tr,e.beginPath();const p=Math.max(2,1.5*o.Pr)*t;e.arc(h,d,p,0,2*Math.PI,!1),e.fill(),e.fillStyle=o.Rr,e.beginPath(),e.arc(h,d,o.ht*t,0,2*Math.PI,!1),e.fill(),e.lineWidth=a,e.strokeStyle=o.Dr,e.beginPath(),e.arc(h,d,o.ht*t+a/2,0,2*Math.PI,!1),e.stroke()}}const Q1=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function Vm(n,e,t,s){return(function(o,a){if(o==="transparent")return o;const u=Jr(o),h=u[3];return`rgba(${u[0]}, ${u[1]}, ${u[2]}, ${a*h})`})(n,t+(s-t)*e)}function Wm(n,e){const t=n%2600/2600;let s;for(const d of Q1)if(t>=d.Vr&&t<=d.Or){s=d;break}is(s!==void 0,"Last price animation internal logic error");const o=(t-s.Vr)/(s.Or-s.Vr);return{Rr:Vm(e,o,s.Ir,s.zr),Dr:Vm(e,o,s.Lr,s.Er),ht:(a=o,u=s.Br,h=s.Ar,u+(h-u)*a)};var a,u,h}class X1{constructor(e){this.Wt=new J1,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),t=this.Wr-e;if(t>0)return void(t<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),t=e.Xs(),s=this.jr.Ct();if(t===null||s===null)return;const o=this.jr.Zr(!0);if(o.Xr||!t.Kr(o.ee))return;const a={x:e.It(o.ee),y:this.jr.Dt().Rt(o._t,s.Vt)},u=o.V,h=this.jr.W().lineWidth,d=Wm(this.Gr(),u);this.Wt.J({Tr:u,Pr:h,Rr:d.Rr,Dr:d.Dr,ht:d.ht,Xe:a})}Yr(){const e=this.Wt.$e();if(e!==null){const t=Wm(this.Gr(),e.Tr);e.Rr=t.Rr,e.Dr=t.Dr,e.ht=t.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function Ar(n,e){return Mg(Math.min(Math.max(n,12),30)*e)}function Zr(n,e){switch(n){case"arrowDown":case"arrowUp":return Ar(e,1);case"circle":return Ar(e,.8);case"square":return Ar(e,.7)}}function Vg(n){return(function(e){const t=Math.ceil(e);return t%2!=0?t-1:t})(Ar(n,1))}function Km(n){return Math.max(Ar(n,.1),3)}function qm(n,e,t){return e?n:t?Math.ceil(n/2):0}function Wg(n,e,t,s,o){const a=Zr("square",t),u=(a-1)/2,h=n-u,d=e-u;return s>=h&&s<=h+a&&o>=d&&o<=d+a}function Hm(n,e,t,s){const o=(Zr("arrowUp",s)-1)/2*t.Jr,a=(Mg(s/2)-1)/2*t.Jr;e.beginPath(),n?(e.moveTo(t.nt-o,t.st),e.lineTo(t.nt,t.st-o),e.lineTo(t.nt+o,t.st),e.lineTo(t.nt+a,t.st),e.lineTo(t.nt+a,t.st+o),e.lineTo(t.nt-a,t.st+o),e.lineTo(t.nt-a,t.st)):(e.moveTo(t.nt-o,t.st),e.lineTo(t.nt,t.st+o),e.lineTo(t.nt+o,t.st),e.lineTo(t.nt+a,t.st),e.lineTo(t.nt+a,t.st-o),e.lineTo(t.nt-a,t.st-o),e.lineTo(t.nt-a,t.st)),e.fill()}function Y1(n,e,t,s,o,a){return Wg(e,t,s,o,a)}class Z1 extends Zt{constructor(){super(...arguments),this.zt=null,this.ar=new Yr,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,t){this.j===e&&this.H===t||(this.j=e,this.H=t,this.Qr=Ai(e,t),this.ar.nr())}wr(e,t){if(this.zt===null||this.zt.tt===null)return null;for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const o=this.zt.it[s];if(tk(o,e,t))return{Mr:o.th,gr:o.gr}}return null}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:s},o,a){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let u=this.zt.tt.from;u<this.zt.tt.to;u++){const h=this.zt.it[u];h.Kt!==void 0&&(h.Kt.Hi=this.ar.xi(e,h.Kt.ih),h.Kt.At=this.j,h.Kt.nt=h.nt-h.Kt.Hi/2),ek(h,e,t,s)}}}}function ek(n,e,t,s){e.fillStyle=n.V,n.Kt!==void 0&&(function(o,a,u,h,d,p){o.save(),o.scale(d,p),o.fillText(a,u,h),o.restore()})(e,n.Kt.ih,n.Kt.nt,n.Kt.st,t,s),(function(o,a,u){if(o.Ks!==0){switch(o.nh){case"arrowDown":return void Hm(!1,a,u,o.Ks);case"arrowUp":return void Hm(!0,a,u,o.Ks);case"circle":return void(function(h,d,p){const v=(Zr("circle",p)-1)/2;h.beginPath(),h.arc(d.nt,d.st,v*d.Jr,0,2*Math.PI,!1),h.fill()})(a,u,o.Ks);case"square":return void(function(h,d,p){const v=Zr("square",p),g=(v-1)*d.Jr/2,w=d.nt-g,_=d.st-g;h.fillRect(w,_,v*d.Jr,v*d.Jr)})(a,u,o.Ks)}o.nh}})(n,e,(function(o,a,u){const h=Math.max(1,Math.floor(a))%2/2;return{nt:Math.round(o.nt*a)+h,st:o.st*u,Jr:a}})(n,t,s))}function tk(n,e,t){return!(n.Kt===void 0||!(function(s,o,a,u,h,d){const p=u/2;return h>=s&&h<=s+a&&d>=o-p&&d<=o+p})(n.Kt.nt,n.Kt.st,n.Kt.Hi,n.Kt.At,e,t))||(function(s,o,a){if(s.Ks===0)return!1;switch(s.nh){case"arrowDown":case"arrowUp":return Y1(0,s.nt,s.st,s.Ks,o,a);case"circle":return(function(u,h,d,p,v){const g=2+Zr("circle",d)/2,w=u-p,_=h-v;return Math.sqrt(w*w+_*_)<=g})(s.nt,s.st,s.Ks,o,a);case"square":return Wg(s.nt,s.st,s.Ks,o,a)}})(n,e,t)}function nk(n,e,t,s,o,a,u,h,d){const p=cn(t)?t:t.Se,v=cn(t)?t:t.Me,g=cn(t)?t:t.xe,w=cn(e.size)?Math.max(e.size,0):1,_=Vg(h.le())*w,S=_/2;switch(n.Ks=_,e.position){case"inBar":return n.st=u.Rt(p,d),void(n.Kt!==void 0&&(n.Kt.st=n.st+S+a+.6*o));case"aboveBar":return n.st=u.Rt(v,d)-S-s.sh,n.Kt!==void 0&&(n.Kt.st=n.st-S-.6*o,s.sh+=1.2*o),void(s.sh+=_+a);case"belowBar":return n.st=u.Rt(g,d)+S+s.eh,n.Kt!==void 0&&(n.Kt.st=n.st+S+a+.6*o,s.eh+=1.2*o),void(s.eh+=_+a)}e.position}class sk{constructor(e,t){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new Z1,this.jr=e,this.$i=t,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const t=this.$i.W().layout;return this.Wt._r(t.fontSize,t.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),t=Km(e),s=1.5*Vg(e)+2*t,o=this.fh();this.ah={above:qm(s,o.aboveBar,o.inBar),below:qm(s,o.belowBar,o.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce(((e,t)=>(e[t.position]||(e[t.position]=!0),e)),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),t=this.$i.St(),s=this.jr.dh();this.rh&&(this.zt.it=s.map((v=>({ot:v.time,nt:0,st:0,Ks:0,nh:v.shape,V:v.color,th:v.th,gr:v.id,Kt:void 0}))),this.rh=!1);const o=this.$i.W().layout;this.zt.tt=null;const a=t.Xs();if(a===null)return;const u=this.jr.Ct();if(u===null||this.zt.it.length===0)return;let h=NaN;const d=Km(t.le()),p={sh:d,eh:d};this.zt.tt=Ug(this.zt.it,a,!0);for(let v=this.zt.tt.from;v<this.zt.tt.to;v++){const g=s[v];g.time!==h&&(p.sh=d,p.eh=d,h=g.time);const w=this.zt.it[v];w.nt=t.It(g.time),g.text!==void 0&&g.text.length>0&&(w.Kt={ih:g.text,nt:0,st:0,Hi:0,At:0});const _=this.jr.ph(g.time);_!==null&&nk(w,g,_,p,o.fontSize,d,e,t,u.Vt)}this.ft=!1}}class ik extends jh{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const t=this.Es.W();if(!t.priceLineVisible||!this.Es.yt())return;const s=this.Es.Zr(t.priceLineSource===0);s.Xr||(e.yt=!0,e.st=s.ki,e.V=this.Es.mh(s.V),e.et=t.priceLineWidth,e.Nt=t.priceLineStyle)}}class rk extends cl{constructor(e){super(),this.jt=e}zi(e,t,s){e.yt=!1,t.yt=!1;const o=this.jt;if(!o.yt())return;const a=o.W(),u=a.lastValueVisible,h=o.bh()!=="",d=a.seriesLastValueMode===0,p=o.Zr(!1);if(p.Xr)return;u&&(e.Kt=this.wh(p,u,d),e.yt=e.Kt.length!==0),(h||d)&&(t.Kt=this.gh(p,u,h,d),t.yt=t.Kt.length>0);const v=o.mh(p.V),g=ll(v);s.t=g.t,s.ki=p.ki,t.Ot=o.$t().Bt(p.ki/o.Dt().At()),e.Ot=v,e.V=g.i,t.V=g.i}gh(e,t,s,o){let a="";const u=this.jt.bh();return s&&u.length!==0&&(a+=`${u} `),t&&o&&(a+=this.jt.Dt().Mh()?e.xh:e.Sh),a.trim()}wh(e,t,s){return t?s?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function Gm(n,e,t,s){const o=Number.isFinite(e),a=Number.isFinite(t);return o&&a?n(e,t):o||a?o?e:t:s}class xt{constructor(e,t){this.kh=e,this.yh=t}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new xt(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new xt(Gm(Math.min,this.Ph(),e.Ph(),-1/0),Gm(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!cn(e)||this.yh-this.kh===0)return;const t=.5*(this.yh+this.kh);let s=this.yh-t,o=this.kh-t;s*=e,o*=e,this.yh=t+s,this.kh=t+o}Oh(e){cn(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new xt(e.minValue,e.maxValue)}}class Xa{constructor(e,t){this.Ih=e,this.zh=t||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new Xa(xt.Ah(e.priceRange),e.margins)}}class ok extends jh{constructor(e,t){super(e),this.Nh=t}yr(){const e=this.Sr;e.yt=!1;const t=this.Nh.W();if(!this.Es.yt()||!t.lineVisible)return;const s=this.Nh.Fh();s!==null&&(e.yt=!0,e.st=s,e.V=t.color,e.et=t.lineWidth,e.Nt=t.lineStyle,e.gr=this.Nh.W().id)}}class ak extends cl{constructor(e,t){super(),this.jr=e,this.Nh=t}zi(e,t,s){e.yt=!1,t.yt=!1;const o=this.Nh.W(),a=o.axisLabelVisible,u=o.title!=="",h=this.jr;if(!a||!h.yt())return;const d=this.Nh.Fh();if(d===null)return;u&&(t.Kt=o.title,t.yt=!0),t.Ot=h.$t().Bt(d/h.Dt().At()),e.Kt=this.Wh(o.price),e.yt=!0;const p=ll(o.axisLabelColor||o.color);s.t=p.t;const v=o.axisLabelTextColor||p.i;e.V=v,t.V=v,s.ki=d}Wh(e){const t=this.jr.Ct();return t===null?"":this.jr.Dt().Fi(e,t.Vt)}}class lk{constructor(e,t){this.jr=e,this.cn=t,this.jh=new ok(e,this),this.ur=new ak(e,this),this.Hh=new Bg(this.ur,e,e.$t())}$h(e){Yt(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,t=e.Dt();if(e.$t().St().Ni()||t.Ni())return null;const s=e.Ct();return s===null?null:t.Rt(this.cn.price,s.Vt)}}class uk extends Eh{constructor(e){super(),this.$i=e}$t(){return this.$i}}const ck={Bar:(n,e,t,s)=>{var o;const a=e.upColor,u=e.downColor,h=W(n(t,s)),d=xi(h.Vt[0])<=xi(h.Vt[3]);return{ce:(o=h.V)!==null&&o!==void 0?o:d?a:u}},Candlestick:(n,e,t,s)=>{var o,a,u;const h=e.upColor,d=e.downColor,p=e.borderUpColor,v=e.borderDownColor,g=e.wickUpColor,w=e.wickDownColor,_=W(n(t,s)),S=xi(_.Vt[0])<=xi(_.Vt[3]);return{ce:(o=_.V)!==null&&o!==void 0?o:S?h:d,Ne:(a=_.Ot)!==null&&a!==void 0?a:S?p:v,Ee:(u=_.Xh)!==null&&u!==void 0?u:S?g:w}},Custom:(n,e,t,s)=>{var o;return{ce:(o=W(n(t,s)).V)!==null&&o!==void 0?o:e.color}},Area:(n,e,t,s)=>{var o,a,u,h;const d=W(n(t,s));return{ce:(o=d.lt)!==null&&o!==void 0?o:e.lineColor,lt:(a=d.lt)!==null&&a!==void 0?a:e.lineColor,Ps:(u=d.Ps)!==null&&u!==void 0?u:e.topColor,Rs:(h=d.Rs)!==null&&h!==void 0?h:e.bottomColor}},Baseline:(n,e,t,s)=>{var o,a,u,h,d,p;const v=W(n(t,s));return{ce:v.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(o=v.Re)!==null&&o!==void 0?o:e.topLineColor,De:(a=v.De)!==null&&a!==void 0?a:e.bottomLineColor,ke:(u=v.ke)!==null&&u!==void 0?u:e.topFillColor1,ye:(h=v.ye)!==null&&h!==void 0?h:e.topFillColor2,Ce:(d=v.Ce)!==null&&d!==void 0?d:e.bottomFillColor1,Te:(p=v.Te)!==null&&p!==void 0?p:e.bottomFillColor2}},Line:(n,e,t,s)=>{var o,a;const u=W(n(t,s));return{ce:(o=u.V)!==null&&o!==void 0?o:e.color,lt:(a=u.V)!==null&&a!==void 0?a:e.color}},Histogram:(n,e,t,s)=>{var o;return{ce:(o=W(n(t,s)).V)!==null&&o!==void 0?o:e.color}}};class hk{constructor(e){this.Kh=(t,s)=>s!==void 0?s.Vt:this.jr.In().Gh(t),this.jr=e,this.Jh=ck[e.Qh()]}$s(e,t){return this.Jh(this.Kh,this.jr.W(),e,t)}}var Jm;(function(n){n[n.NearestLeft=-1]="NearestLeft",n[n.None=0]="None",n[n.NearestRight=1]="NearestRight"})(Jm||(Jm={}));const qn=30;class dk{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,t=0){const s=this.hl(e,t);return s===null?null:Object.assign(Object.assign({},this.al(s)),{ee:this.rl(s)})}ne(){return this.tl}ol(e,t,s){if(this.Ni())return null;let o=null;for(const a of s)o=Ia(o,this._l(e,t,a));return o}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,t){const s=this.ul(e);if(s===null&&t!==0)switch(t){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return s}cl(e){let t=this.fl(e);return t>0&&(t-=1),t!==this.tl.length&&this.rl(t)<e?t:null}dl(e){const t=this.vl(e);return t!==this.tl.length&&e<this.rl(t)?t:null}ul(e){const t=this.fl(e);return t===this.tl.length||e<this.tl[t].ee?null:t}fl(e){return lo(this.tl,e,((t,s)=>t.ee<s))}vl(e){return Dg(this.tl,e,((t,s)=>t.ee>s))}pl(e,t,s){let o=null;for(let a=e;a<t;a++){const u=this.tl[a].Vt[s];Number.isNaN(u)||(o===null?o={ml:u,bl:u}:(u<o.ml&&(o.ml=u),u>o.bl&&(o.bl=u)))}return o}_l(e,t,s){if(this.Ni())return null;let o=null;const a=W(this.el()),u=W(this.An()),h=Math.max(e,a),d=Math.min(t,u),p=Math.ceil(h/qn)*qn,v=Math.max(p,Math.floor(d/qn)*qn);{const w=this.fl(h),_=this.vl(Math.min(d,p,t));o=Ia(o,this.pl(w,_,s))}let g=this.il.get(s);g===void 0&&(g=new Map,this.il.set(s,g));for(let w=Math.max(p+1,h);w<v;w+=qn){const _=Math.floor(w/qn);let S=g.get(_);if(S===void 0){const x=this.fl(_*qn),k=this.vl((_+1)*qn-1);S=this.pl(x,k,s),g.set(_,S)}o=Ia(o,S)}{const w=this.fl(v),_=this.vl(d);o=Ia(o,this.pl(w,_,s))}return o}}function Ia(n,e){return n===null?e:e===null?n:{ml:Math.min(n.ml,e.ml),bl:Math.max(n.bl,e.bl)}}class fk{constructor(e){this.wl=e}X(e,t,s){this.wl.draw(e)}gl(e,t,s){var o,a;(a=(o=this.wl).drawBackground)===null||a===void 0||a.call(o,e)}}class kc{constructor(e){this.tr=null,this.wn=e}gt(){var e;const t=this.wn.renderer();if(t===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===t)return this.tr.xl;const s=new fk(t);return this.tr={Ml:t,xl:s},s}Sl(){var e,t,s;return(s=(t=(e=this.wn).zOrder)===null||t===void 0?void 0:t.call(e))!==null&&s!==void 0?s:"normal"}}function Kg(n){var e,t,s,o,a;return{Kt:n.text(),ki:n.coordinate(),Si:(e=n.fixedCoordinate)===null||e===void 0?void 0:e.call(n),V:n.textColor(),t:n.backColor(),yt:(s=(t=n.visible)===null||t===void 0?void 0:t.call(n))===null||s===void 0||s,hi:(a=(o=n.tickVisible)===null||o===void 0?void 0:o.call(n))===null||a===void 0||a}}class pk{constructor(e,t){this.Wt=new Pg,this.kl=e,this.yl=t}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},Kg(this.kl))),this.Wt}}class mk extends cl{constructor(e,t){super(),this.kl=e,this.Li=t}zi(e,t,s){const o=Kg(this.kl);s.t=o.t,e.V=o.V;const a=2/12*this.Li.P();s.wi=a,s.gi=a,s.ki=o.ki,s.Si=o.Si,e.Kt=o.Kt,e.yt=o.yt,e.hi=o.hi}}class vk{constructor(e,t){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=t}Ol(){return this.Vl}Vn(){var e,t;(t=(e=this.Vl).updateAllViews)===null||t===void 0||t.call(e)}Pn(){var e,t,s,o;const a=(s=(t=(e=this.Vl).paneViews)===null||t===void 0?void 0:t.call(e))!==null&&s!==void 0?s:[];if(((o=this.Cl)===null||o===void 0?void 0:o.Ml)===a)return this.Cl.xl;const u=a.map((h=>new kc(h)));return this.Cl={Ml:a,xl:u},u}Qi(){var e,t,s,o;const a=(s=(t=(e=this.Vl).timeAxisViews)===null||t===void 0?void 0:t.call(e))!==null&&s!==void 0?s:[];if(((o=this.Tl)===null||o===void 0?void 0:o.Ml)===a)return this.Tl.xl;const u=this.jr.$t().St(),h=a.map((d=>new pk(d,u)));return this.Tl={Ml:a,xl:h},h}Rn(){var e,t,s,o;const a=(s=(t=(e=this.Vl).priceAxisViews)===null||t===void 0?void 0:t.call(e))!==null&&s!==void 0?s:[];if(((o=this.Pl)===null||o===void 0?void 0:o.Ml)===a)return this.Pl.xl;const u=this.jr.Dt(),h=a.map((d=>new mk(d,u)));return this.Pl={Ml:a,xl:h},h}Bl(){var e,t,s,o;const a=(s=(t=(e=this.Vl).priceAxisPaneViews)===null||t===void 0?void 0:t.call(e))!==null&&s!==void 0?s:[];if(((o=this.Rl)===null||o===void 0?void 0:o.Ml)===a)return this.Rl.xl;const u=a.map((h=>new kc(h)));return this.Rl={Ml:a,xl:u},u}Al(){var e,t,s,o;const a=(s=(t=(e=this.Vl).timeAxisPaneViews)===null||t===void 0?void 0:t.call(e))!==null&&s!==void 0?s:[];if(((o=this.Dl)===null||o===void 0?void 0:o.Ml)===a)return this.Dl.xl;const u=a.map((h=>new kc(h)));return this.Dl={Ml:a,xl:u},u}Il(e,t){var s,o,a;return(a=(o=(s=this.Vl).autoscaleInfo)===null||o===void 0?void 0:o.call(s,e,t))!==null&&a!==void 0?a:null}wr(e,t){var s,o,a;return(a=(o=(s=this.Vl).hitTest)===null||o===void 0?void 0:o.call(s,e,t))!==null&&a!==void 0?a:null}}function Ec(n,e,t,s){n.forEach((o=>{e(o).forEach((a=>{a.Sl()===t&&s.push(a)}))}))}function Cc(n){return n.Pn()}function gk(n){return n.Bl()}function yk(n){return n.Al()}class Nh extends uk{constructor(e,t,s,o,a){super(e),this.zt=new dk,this.jh=new ik(this),this.zl=[],this.Ll=new G1(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=t,this.$l=s;const u=new rk(this);this.rn=[u],this.Hh=new Bg(u,this,e),s!=="Area"&&s!=="Line"&&s!=="Baseline"||(this.El=new X1(this)),this.Ul(),this.ql(a)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const t={Xr:!0},s=this.Dt();if(this.$t().St().Ni()||s.Ni()||this.zt.Ni())return t;const o=this.$t().St().Xs(),a=this.Ct();if(o===null||a===null)return t;let u,h;if(e){const g=this.zt.sl();if(g===null)return t;u=g,h=g.ee}else{const g=this.zt.ll(o.ui(),-1);if(g===null||(u=this.zt.Gh(g.ee),u===null))return t;h=g.ee}const d=u.Vt[3],p=this.Us().$s(h,{Vt:u}),v=s.Rt(d,a.Vt);return{Xr:!1,_t:d,Kt:s.Fi(d,a.Vt),xh:s.Yl(d),Sh:s.Zl(d,a.Vt),V:p.ce,ki:v,ee:h}}Us(){return this.Nl!==null||(this.Nl=new hk(this)),this.Nl}W(){return this.cn}$h(e){const t=e.priceScaleId;t!==void 0&&t!==this.cn.priceScaleId&&this.$t().Xl(this,t),Yt(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,t){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(t&&t.ta?this.El.$r():e.length===0&&this.El.Hr());const s=this.$t().dr(this);this.$t().ia(s),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const t=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(t),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const t=new lk(this,e);return this.zl.push(t),this.$t().Gl(this),t}ra(e){const t=this.zl.indexOf(e);t!==-1&&this.zl.splice(t,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const t=e.Os();return this.zt.ll(t,1)}In(){return this.zt}ph(e){const t=this.zt.Gh(e);return t===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:t.Vt[0],Me:t.Vt[1],xe:t.Vt[2],Se:t.Vt[3]}:t.Vt[3]}aa(e){const t=[];Ec(this.Hl,Cc,"top",t);const s=this.El;return s!==null&&s.yt()&&(this.jl===null&&s.qr()&&(this.jl=setTimeout((()=>{this.jl=null,this.$t().oa()}),0)),s.Ur(),t.unshift(s)),t}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const t=this.zl.map((s=>s.qh()));return e.push(...t),Ec(this.Hl,Cc,"normal",e),e}ua(){return this.ca(Cc,"bottom")}da(e){return this.ca(gk,e)}fa(e){return this.ca(yk,e)}va(e,t){return this.Hl.map((s=>s.wr(e,t))).filter((s=>s!==null))}Ji(e){return[this.Hh,...this.zl.map((t=>t.Yh()))]}Rn(e,t){if(t!==this.Yi&&!this._a())return[];const s=[...this.rn];for(const o of this.zl)s.push(o.Zh());return this.Hl.forEach((o=>{s.push(...o.Rn())})),s}Qi(){const e=[];return this.Hl.forEach((t=>{e.push(...t.Qi())})),e}Il(e,t){if(this.cn.autoscaleInfoProvider!==void 0){const s=this.cn.autoscaleInfoProvider((()=>{const o=this.pa(e,t);return o===null?null:o.Bh()}));return Xa.Ah(s)}return this.pa(e,t)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const t of this.rn)t.bt();for(const t of this.zl)t.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach((t=>t.Vn()))}Dt(){return W(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const t=this.zt.Gh(e);return t===null?null:{_t:t.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new vk(e,this))}ya(e){this.Hl=this.Hl.filter((t=>t.Ol()!==e))}Ca(){if(this.wn instanceof Sc)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof Sc)return e=>this.wn.je(e)}_a(){return!hl(this.Dt().Pa())}pa(e,t){if(!Qr(e)||!Qr(t)||this.zt.Ni())return null;const s=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],o=this.zt.ol(e,t,s);let a=o!==null?new xt(o.ml,o.bl):null;if(this.Qh()==="Histogram"){const h=this.cn.base,d=new xt(h,h);a=a!==null?a.ts(d):d}let u=this.dn.uh();return this.Hl.forEach((h=>{const d=h.Il(e,t);if(d!=null&&d.priceRange){const _=new xt(d.priceRange.minValue,d.priceRange.maxValue);a=a!==null?a.ts(_):_}var p,v,g,w;d!=null&&d.margins&&(p=u,v=d.margins,u={above:Math.max((g=p==null?void 0:p.above)!==null&&g!==void 0?g:0,v.above),below:Math.max((w=p==null?void 0:p.below)!==null&&w!==void 0?w:0,v.below)})})),new Xa(a,u)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const t=this.cn.crosshairMarkerBackgroundColor;if(t.length!==0)return t}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new E1(this.cn.priceFormat.precision);break;case"percent":this.wa=new Og(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new dl(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const t=W(this.zt.el());this.Wl=this.Fl.map(((s,o)=>{const a=W(e.Va(s.time,!0)),u=a<t?1:-1;return{time:W(this.zt.ll(a,u)).ee,position:s.position,shape:s.shape,color:s.color,id:s.id,th:o,text:s.text,size:s.size,originalTime:s.originalTime}}))}ql(e){switch(this.dn=new sk(this,this.$t()),this.$l){case"Bar":this.wn=new A1(this,this.$t());break;case"Candlestick":this.wn=new D1(this,this.$t());break;case"Line":this.wn=new W1(this,this.$t());break;case"Custom":this.wn=new Sc(this,this.$t(),pt(e));break;case"Area":this.wn=new O1(this,this.$t());break;case"Baseline":this.wn=new $1(this,this.$t());break;case"Histogram":this.wn=new V1(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,t){const s=[];return Ec(this.Hl,e,t,s),s}}class wk{constructor(e){this.cn=e}Oa(e,t,s){let o=e;if(this.cn.mode===0)return o;const a=s.vn(),u=a.Ct();if(u===null)return o;const h=a.Rt(e,u),d=s.Ba().filter((v=>v instanceof Nh)).reduce(((v,g)=>{if(s.vr(g)||!g.yt())return v;const w=g.Dt(),_=g.In();if(w.Ni()||!_.Kr(t))return v;const S=_.Gh(t);if(S===null)return v;const x=xi(g.Ct());return v.concat([w.Rt(S.Vt[3],x.Vt)])}),[]);if(d.length===0)return o;d.sort(((v,g)=>Math.abs(v-h)-Math.abs(g-h)));const p=d[0];return o=a.pn(p,u),o}}class bk extends Zt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:t,horizontalPixelRatio:s,verticalPixelRatio:o}){if(this.zt===null)return;const a=Math.max(1,Math.floor(s));e.lineWidth=a,(function(u,h){u.save(),u.lineWidth%2&&u.translate(.5,.5),h(),u.restore()})(e,(()=>{const u=W(this.zt);if(u.Aa){e.strokeStyle=u.Ia,Ms(e,u.za),e.beginPath();for(const h of u.La){const d=Math.round(h.Ea*s);e.moveTo(d,-a),e.lineTo(d,t.height+a)}e.stroke()}if(u.Na){e.strokeStyle=u.Fa,Ms(e,u.Wa),e.beginPath();for(const h of u.ja){const d=Math.round(h.Ea*o);e.moveTo(-a,d),e.lineTo(t.width+a,d)}e.stroke()}}))}}class xk{constructor(e){this.Wt=new bk,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,t={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map((s=>({Ea:s.coord})))};this.Wt.J(t),this.ft=!1}return this.Wt}}class _k{constructor(e){this.wn=new xk(e)}qh(){return this.wn}}const Tc={$a:4,Ua:1e-4};function _i(n,e){const t=100*(n-e)/e;return e<0?-t:t}function Sk(n,e){const t=_i(n.Ph(),e),s=_i(n.Rh(),e);return new xt(t,s)}function Mr(n,e){const t=100*(n-e)/e+100;return e<0?-t:t}function kk(n,e){const t=Mr(n.Ph(),e),s=Mr(n.Rh(),e);return new xt(t,s)}function Ya(n,e){const t=Math.abs(n);if(t<1e-15)return 0;const s=Math.log10(t+e.Ua)+e.$a;return n<0?-s:s}function Ir(n,e){const t=Math.abs(n);if(t<1e-15)return 0;const s=Math.pow(10,t-e.$a)-e.Ua;return n<0?-s:s}function Nr(n,e){if(n===null)return null;const t=Ya(n.Ph(),e),s=Ya(n.Rh(),e);return new xt(t,s)}function $a(n,e){if(n===null)return null;const t=Ir(n.Ph(),e),s=Ir(n.Rh(),e);return new xt(t,s)}function jc(n){if(n===null)return Tc;const e=Math.abs(n.Rh()-n.Ph());if(e>=1||e<1e-15)return Tc;const t=Math.ceil(Math.abs(Math.log10(e))),s=Tc.$a+t;return{$a:s,Ua:1/Math.pow(10,s)}}class Nc{constructor(e,t){if(this.qa=e,this.Ya=t,(function(s){if(s<0)return!1;for(let o=s;o>1;o/=10)if(o%10!=0)return!1;return!0})(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let s=this.qa;s!==1;){if(s%2==0)this.Za.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),s/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,t,s){const o=this.qa===0?0:1/this.qa;let a=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-t)))),u=0,h=this.Ya[0];for(;;){const g=Ma(a,o,1e-14)&&a>o+1e-14,w=Ma(a,s*h,1e-14),_=Ma(a,1,1e-14);if(!(g&&w&&_))break;a/=h,h=this.Ya[++u%this.Ya.length]}if(a<=o+1e-14&&(a=o),a=Math.max(1,a),this.Za.length>0&&(d=a,p=1,v=1e-14,Math.abs(d-p)<v))for(u=0,h=this.Za[0];Ma(a,s*h,1e-14)&&a>o+1e-14;)a/=h,h=this.Za[++u%this.Za.length];var d,p,v;return a}}class Qm{constructor(e,t,s,o){this.Ka=[],this.Li=e,this.qa=t,this.Ga=s,this.Ja=o}Xa(e,t){if(e<t)throw new Error("high < low");const s=this.Li.At(),o=(e-t)*this.Qa()/s,a=new Nc(this.qa,[2,2.5,2]),u=new Nc(this.qa,[2,2,2.5]),h=new Nc(this.qa,[2.5,2,2]),d=[];return d.push(a.Xa(e,t,o),u.Xa(e,t,o),h.Xa(e,t,o)),(function(p){if(p.length<1)throw Error("array is empty");let v=p[0];for(let g=1;g<p.length;++g)p[g]<v&&(v=p[g]);return v})(d)}io(){const e=this.Li,t=e.Ct();if(t===null)return void(this.Ka=[]);const s=e.At(),o=this.Ga(s-1,t),a=this.Ga(0,t),u=this.Li.W().entireTextOnly?this.no()/2:0,h=u,d=s-1-u,p=Math.max(o,a),v=Math.min(o,a);if(p===v)return void(this.Ka=[]);let g=this.Xa(p,v),w=p%g;w+=w<0?g:0;const _=p>=v?1:-1;let S=null,x=0;for(let k=p-w;k>v;k-=g){const C=this.Ja(k,t,!0);S!==null&&Math.abs(C-S)<this.Qa()||C<h||C>d||(x<this.Ka.length?(this.Ka[x].Ea=C,this.Ka[x].so=e.eo(k)):this.Ka.push({Ea:C,so:e.eo(k)}),x++,S=C,e.ro()&&(g=this.Xa(k*_,v)))}this.Ka.length=x}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function qg(n){return n.slice().sort(((e,t)=>W(e.Xi())-W(t.Xi())))}var Xm;(function(n){n[n.Normal=0]="Normal",n[n.Logarithmic=1]="Logarithmic",n[n.Percentage=2]="Percentage",n[n.IndexedTo100=3]="IndexedTo100"})(Xm||(Xm={}));const Ym=new Og,Zm=new dl(100,1);class Ek{constructor(e,t,s,o){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new We,this.vo=new We,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=Zm,this.xo=jc(null),this.So=e,this.cn=t,this.ko=s,this.yo=o,this.Co=new Qm(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(Yt(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const t=pt(e.scaleMargins.top),s=pt(e.scaleMargins.bottom);if(t<0||t>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${t}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(t+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${t+s}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const t=this.Cr();let s=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),t.Cr===1&&e.Cr!==t.Cr&&((function(a,u){if(a===null)return!1;const h=Ir(a.Ph(),u),d=Ir(a.Rh(),u);return isFinite(h)&&isFinite(d)})(this.Ih,this.xo)?(s=$a(this.Ih,this.xo),s!==null&&this.Ao(s)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==t.Cr&&(s=Nr(this.Ih,this.xo),s!==null&&this.Ao(s));const o=t.Cr!==this.cn.mode;o&&(t.Cr===2||this.Mh())&&this.Ra(),o&&(t.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&t.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(t,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,t){const s=this.Ih;(t||s===null&&e!==null||s!==null&&!s.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,t){return this.Mh()?e=_i(e,t):this.Oo()&&(e=Mr(e,t)),this.Po(e,t)}te(e,t,s){this.Wo();const o=this.Fo(),a=W(this.Lh()),u=a.Ph(),h=a.Rh(),d=this.Eo()-1,p=this.Bo(),v=d/(h-u),g=s===void 0?0:s.from,w=s===void 0?e.length:s.to,_=this.Ho();for(let S=g;S<w;S++){const x=e[S],k=x._t;if(isNaN(k))continue;let C=k;_!==null&&(C=_(x._t,t));const R=o+v*(C-u),P=p?R:this.ho-1-R;x.st=P}}be(e,t,s){this.Wo();const o=this.Fo(),a=W(this.Lh()),u=a.Ph(),h=a.Rh(),d=this.Eo()-1,p=this.Bo(),v=d/(h-u),g=s===void 0?0:s.from,w=s===void 0?e.length:s.to,_=this.Ho();for(let S=g;S<w;S++){const x=e[S];let k=x.ge,C=x.Me,R=x.xe,P=x.Se;_!==null&&(k=_(x.ge,t),C=_(x.Me,t),R=_(x.xe,t),P=_(x.Se,t));let j=o+v*(k-u),U=p?j:this.ho-1-j;x.pe=U,j=o+v*(C-u),U=p?j:this.ho-1-j,x.de=U,j=o+v*(R-u),U=p?j:this.ho-1-j,x.fe=U,j=o+v*(P-u),U=p?j:this.ho-1-j,x.me=U}}pn(e,t){const s=this.To(e,t);return this.$o(s,t)}$o(e,t){let s=e;return this.Mh()?s=(function(o,a){return a<0&&(o=-o),o/100*a+a})(s,t):this.Oo()&&(s=(function(o,a){return o-=100,a<0&&(o=-o),o/100*a+a})(s,t)),s}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let t=0;t<this.po.length;t++){const s=this.po[t];s.Xi()===null&&s.Ki(t+1),e.push(s)}return e=qg(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const t=this.po.indexOf(e);if(t===-1)throw new Error("source is not attached to scale");this.po.splice(t,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const t of this.po){const s=t.Ct();s!==null&&(e===null||s.la<e.la)&&(e=s)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const t=this.Co.Ha();return this.bo={Ha:t,Xo:e},this.fo.m(),t}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=W(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let t=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const s=W(this.ao).Th();t=Math.max(t,.1),s.Vh(t),this.Ao(s)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=W(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const t=W(this.Lh()).Dh()/(this.Eo()-1);let s=e-this.Mo;this.Bo()&&(s*=-1);const o=s*t,a=W(this.ao).Th();a.Oh(o),this.Ao(a,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,t){switch(this.cn.mode){case 2:return this.s_(_i(e,t));case 3:return this.ba().format(Mr(e,t));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,W(this.e_()).ba())}Zl(e,t){return e=_i(e,t),this.s_(e,Ym)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach((e=>e.Vn()))}Ra(){this.bo=null;const e=this.e_();let t=100;e!==null&&(t=Math.round(1/e.ma())),this.wa=Zm,this.Mh()?(this.wa=Ym,t=100):this.Oo()?(this.wa=new dl(100,1),t=100):e!==null&&(this.wa=e.ba()),this.Co=new Qm(this,t,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,t){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?Ya(e,this.xo):e;const s=W(this.Lh()),o=this.Fo()+(this.Eo()-1)*(e-s.Ph())/s.Dh();return this.jo(o)}To(e,t){if(this.Wo(),this.Ni())return 0;const s=this.jo(e),o=W(this.Lh()),a=o.Ph()+o.Dh()*((s-this.Fo())/(this.Eo()-1));return this.ro()?Ir(a,this.xo):a}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let t=null;const s=this.r_();let o=0,a=0;for(const d of s){if(!d.yt())continue;const p=d.Ct();if(p===null)continue;const v=d.Il(e.Os(),e.ui());let g=v&&v.Lh();if(g!==null){switch(this.cn.mode){case 1:g=Nr(g,this.xo);break;case 2:g=Sk(g,p.Vt);break;case 3:g=kk(g,p.Vt)}if(t=t===null?g:t.ts(W(g)),v!==null){const w=v.Eh();w!==null&&(o=Math.max(o,w.above),a=Math.max(a,w.below))}}}if(o===this.co&&a===this.do||(this.co=o,this.do=a,this.bo=null,this.Do()),t!==null){if(t.Ph()===t.Rh()){const d=this.e_(),p=5*(d===null||this.Mh()||this.Oo()?1:d.ma());this.ro()&&(t=$a(t,this.xo)),t=new xt(t.Ph()-p,t.Rh()+p),this.ro()&&(t=Nr(t,this.xo))}if(this.ro()){const d=$a(t,this.xo),p=jc(d);if(u=p,h=this.xo,u.$a!==h.$a||u.Ua!==h.Ua){const v=this.ao!==null?$a(this.ao,this.xo):null;this.xo=p,t=Nr(d,p),v!==null&&(this.ao=Nr(v,p))}}this.Ao(t)}else this.Ih===null&&(this.Ao(new xt(-.5,.5)),this.xo=jc(null));var u,h;this.oo._o=!0}Ho(){return this.Mh()?_i:this.Oo()?Mr:this.ro()?e=>Ya(e,this.xo):null}a_(e,t,s){return t===void 0?(s===void 0&&(s=this.ba()),s.format(e)):t(e)}Wh(e,t){return this.a_(e,this.yo.priceFormatter,t)}s_(e,t){return this.a_(e,this.yo.percentageFormatter,t)}}class Ck{constructor(e,t){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new We,this.yl=e,this.$i=t,this.d_=new _k(this);const s=t.W();this.f_=this.v_("left",s.leftPriceScale),this.p_=this.v_("right",s.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(s)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const t=Array.from(this.o_.values());for(const s of t){const o=W(s[0].Dt());o.$h(e.overlayPriceScales),e.localization&&o.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?pt(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach((e=>{e.S&&e.S()})),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach((t=>{if(this.vr(t)){const s=t.Dt();s!==null&&s.Lo(e)}})),this.k_()}Ba(){return this.po}vr(e){const t=e.Dt();return t===null||this.f_!==t&&this.p_!==t}qo(e,t,s){const o=s!==void 0?s:this.C_().y_+1;this.T_(e,t,o)}Zo(e){const t=this.po.indexOf(e);is(t!==-1,"removeDataSource: invalid data source"),this.po.splice(t,1);const s=W(e.Dt()).Pa();if(this.o_.has(s)){const a=pt(this.o_.get(s)),u=a.indexOf(e);u!==-1&&(a.splice(u,1),a.length===0&&this.o_.delete(s))}const o=e.Dt();o&&o.Ba().indexOf(e)>=0&&o.Zo(e),o!==null&&(o.Yo(),this.P_(o)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,t){e.Go(t)}O_(e,t){e.Jo(t),this.k_()}B_(e){e.Qo()}A_(e,t){e.t_(t)}I_(e,t){e.i_(t),this.k_()}z_(e){e.n_()}k_(){this.po.forEach((e=>{e.Vn()}))}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const t=this.yl.Xs();e.Ro({Wn:!0}),t!==null&&e.h_(t),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach((e=>{this.vr(e)&&this.P_(e.Dt())})),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=qg(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const t=e.r_();if(t&&t.length>0&&!this.yl.Ni()){const s=this.yl.Xs();s!==null&&e.h_(s)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let t=0,s=0;for(let o=0;o<e.length;o++){const a=e[o].Xi();a!==null&&(a<t&&(t=a),a>s&&(s=a))}return{H_:t,y_:s}}T_(e,t,s){let o=this.w_(t);if(o===null&&(o=this.v_(t,this.$i.W().overlayPriceScales)),this.po.push(e),!hl(t)){const a=this.o_.get(t)||[];a.push(e),this.o_.set(t,a)}o.qo(e),e.Gi(o),e.Ki(s),this.P_(o),this.mo=null}m_(e,t,s){t.Cr!==s.Cr&&this.L_(e)}v_(e,t){const s=Object.assign({visible:!0,autoScale:!0},Sn(t)),o=new Ek(e,s,this.$i.W().layout,this.$i.W().localization);return o.Lo(this.At()),o}}class Tk{constructor(e,t,s=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=t,this.ir=s}Y_(e){const t=e.time,s=this.q_.cacheKey(t),o=this.tr.get(s);if(o!==void 0)return o.Z_;if(this.Ke===this.ir){const u=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(pt(u)),this.Je++,this.Ke--}const a=this.U_(e);return this.tr.set(s,{Z_:a,rr:this.Ge}),this.Qe.set(this.Ge,s),this.Ke++,this.Ge++,a}}class $r{constructor(e,t){is(e<=t,"right should be >= left"),this.X_=e,this.K_=t}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function ev(n,e){return n===null||e===null?n===e:n.Ch(e)}class jk{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,t){this.nu(t),this.tr=null;for(let s=t;s<e.length;++s){const o=e[s];let a=this.J_.get(o.timeWeight);a===void 0&&(a=[],this.J_.set(o.timeWeight,a)),a.push({index:s,time:o.time,weight:o.timeWeight,originalTime:o.originalTime})}}su(e,t){const s=Math.ceil(t/e);return this.tr!==null&&this.tr.eu===s||(this.tr={Ha:this.ru(s),eu:s}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const t=[];this.J_.forEach(((s,o)=>{e<=s[0].index?t.push(o):s.splice(lo(s,e,(a=>a.index<e)),1/0)}));for(const s of t)this.J_.delete(s)}ru(e){let t=[];for(const s of Array.from(this.J_.keys()).sort(((o,a)=>a-o))){if(!this.J_.get(s))continue;const o=t;t=[];const a=o.length;let u=0;const h=pt(this.J_.get(s)),d=h.length;let p=1/0,v=-1/0;for(let g=0;g<d;g++){const w=h[g],_=w.index;for(;u<a;){const S=o[u],x=S.index;if(!(x<_)){p=x;break}u++,t.push(S),v=x,p=1/0}if(p-_>=e&&_-v>=e)t.push(w),v=_;else if(this.Q_)return o}for(;u<a;u++)t.push(o[u])}return t}}class ki{constructor(e){this.hu=e}lu(){return this.hu===null?null:new $r(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new ki(null)}}function Nk(n,e){return n.weight>e.weight?n:e}class Rk{constructor(e,t,s,o){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new jk,this.du=new Map,this.fu=ki.ou(),this.vu=!0,this.pu=new We,this.mu=new We,this.bu=new We,this.wu=null,this.gu=null,this.Mu=[],this.cn=t,this.yo=s,this.xu=t.rightOffset,this.Su=t.barSpacing,this.$i=e,this.q_=o,this.ku(),this.cu.tu(t.uniformDistribution)}W(){return this.cn}yu(e){Yt(this.yo,e),this.Cu(),this.ku()}$h(e,t){var s;Yt(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((s=e.barSpacing)!==null&&s!==void 0?s:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var t,s;return(s=(t=this.uu[e])===null||t===void 0?void 0:t.time)!==null&&s!==void 0?s:null}Ui(e){var t;return(t=this.uu[e])!==null&&t!==void 0?t:null}Va(e,t){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return t?this.uu.length-1:null;const s=lo(this.uu,this.q_.key(e),((o,a)=>this.q_.key(o.time)<a));return this.q_.key(e)<this.q_.key(this.uu[s].time)?t?s:null:s}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const t={from:e.Os(),to:e.ui()};return this.Ou(t)}Ou(e){const t=Math.round(e.from),s=Math.round(e.to),o=W(this.Bu()),a=W(this.Au());return{from:W(this.Ui(Math.max(o,t))),to:W(this.Ui(Math.min(a,s)))}}Iu(e){return{from:W(this.Va(e.from,!0)),to:W(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const t=this.Du(),s=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&s!==0){const o=this.Su*e/s;this.Su=o}if(this.cn.fixLeftEdge&&t!==null&&t.Os()<=0){const o=s-e;this.xu-=Math.round(o/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!Qr(e))return 0;const t=this.Eu()+this.xu-e;return this.__-(t+.5)*this.Su-1}Qs(e,t){const s=this.Eu(),o=t===void 0?0:t.from,a=t===void 0?e.length:t.to;for(let u=o;u<a;u++){const h=e[u].ot,d=s+this.xu-h,p=this.__-(d+.5)*this.Su-1;e[u].nt=p}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,t=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),s=Math.round(t/e),o=W(this.Xs()),a=Math.max(o.Os(),o.Os()-s),u=Math.max(o.ui(),o.ui()-s),h=this.cu.su(e,t),d=this.Bu()+s,p=this.Au()-s,v=this.$u(),g=this.cn.fixLeftEdge||v,w=this.cn.fixRightEdge||v;let _=0;for(const S of h){if(!(a<=S.index&&S.index<=u))continue;let x;_<this.Mu.length?(x=this.Mu[_],x.coord=this.It(S.index),x.label=this.Uu(S),x.weight=S.weight):(x={needAlignCoordinate:!1,coord:this.It(S.index),label:this.Uu(S),weight:S.weight},this.Mu.push(x)),this.Su>t/2&&!v?x.needAlignCoordinate=!1:x.needAlignCoordinate=g&&S.index<=d||w&&S.index>=p,_++}return this.Mu.length=_,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,t){const s=this.Fu(e),o=this.le(),a=o+t*(o/10);this.Gn(a),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(s-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const t=lh(this.__-e,0,this.__),s=lh(this.__-W(this.wo),0,this.__);t!==0&&s!==0&&this.Gn(this.wu.le*t/s)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const t=(this.Mo-e)/this.le();this.xu=W(this.wu).Hu+t,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,t=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(t)||t<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.xu,o=performance.now();this.$i.Zn({Qu:a=>(a-o)/t>=1,tc:a=>{const u=(a-o)/t;return u>=1?e:s+(e-s)*u}})}bt(e,t){this.vu=!0,this.uu=e,this.cu.iu(e,t),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const t=e.G_();this.ju(this.__/t),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),t=this.Au();e!==null&&t!==null&&this.rc(new $r(e,t+this.cn.rightOffset))}lc(e){const t=new $r(e.from,e.to);this.rc(t)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:t}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||t.axisDoubleClickReset.time||t.axisPressedMouseMove.time||t.mouseWheel||t.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const t=this.ac(e),s=this.Eu()+this.xu-t;return Math.round(1e6*s)/1e6}ju(e){const t=this.Su;this.Su=e,this.zu(),t!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(ki.ou());const e=this.Eu(),t=this.__/this.Su,s=this.xu+e,o=new $r(s-t+1,s);this._c(new ki(o))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const t=.5*this.__;this.Su>t&&(this.Su=t,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const t=this.dc();this.xu>t&&(this.xu=t,this.vu=!0)}cc(){const e=this.Bu(),t=this._u;return e===null||t===null?null:e-t-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let t=this.du.get(e.weight);return t===void 0&&(t=new Tk((s=>this.fc(s)),this.q_),this.du.set(e.weight,t)),t.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const t=this.fu;this.fu=e,ev(t.lu(),this.fu.lu())||this.pu.m(),ev(t.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const t=this.Xs();if(t===null)return;const s=t.Os()-e;if(s<0){const o=this.xu-s-1;this.Jn(o)}this.zu()}Pu(){this.Lu(),this.zu()}}class Pk{X(e,t,s){e.useMediaCoordinateSpace((o=>this.K(o,t,s)))}gl(e,t,s){e.useMediaCoordinateSpace((o=>this.vc(o,t,s)))}vc(e,t,s){}}class Ok extends Pk{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:t,mediaSize:s}=e;let o=0;for(const u of this.zt.bc){if(u.Kt.length===0)continue;t.font=u.R;const h=this.wc(t,u.Kt);h>s.width?u.Zu=s.width/h:u.Zu=1,o+=u.gc*u.Zu}let a=0;switch(this.zt.Mc){case"top":a=0;break;case"center":a=Math.max((s.height-o)/2,0);break;case"bottom":a=Math.max(s.height-o,0)}t.fillStyle=this.zt.V;for(const u of this.zt.bc){t.save();let h=0;switch(this.zt.xc){case"left":t.textAlign="left",h=u.gc/2;break;case"center":t.textAlign="center",h=s.width/2;break;case"right":t.textAlign="right",h=s.width-1-u.gc/2}t.translate(h,a),t.textBaseline="top",t.font=u.R,t.scale(u.Zu,u.Zu),t.fillText(u.Kt,0,u.Sc),t.restore(),a+=u.gc*u.Zu}}wc(e,t){const s=this.kc(e.font);let o=s.get(t);return o===void 0&&(o=e.measureText(t).width,s.set(t,o)),o}kc(e){let t=this.mc.get(e);return t===void 0&&(t=new Map,this.mc.set(e,t)),t}}class Lk{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new Ok(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),t=this.Ft;t.yt=e.visible,t.yt&&(t.V=e.color,t.xc=e.horzAlign,t.Mc=e.vertAlign,t.bc=[{Kt:e.text,R:Ai(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class Ak extends Eh{constructor(e,t){super(),this.cn=t,this.wn=new Lk(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var tv,nv,sv,iv,rv;(function(n){n[n.OnTouchEnd=0]="OnTouchEnd",n[n.OnNextTap=1]="OnNextTap"})(tv||(tv={}));class Mk{constructor(e,t,s){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new We,this.Rc=new We,this.Dc=null,this.Vc=e,this.cn=t,this.q_=s,this.Oc=new f1(this),this.yl=new Rk(this,t.timeScale,this.cn.localization,s),this.vt=new k1(this,t.crosshair),this.Bc=new wk(t.crosshair),this.Ac=new Ak(this,t.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(it.es())}Uh(){this.Nc(it.ss())}oa(){this.Nc(new it(1))}Gl(e){const t=this.Fc(e);this.Nc(t)}Wc(){return this.Tc}jc(e){const t=this.Tc;this.Tc=e,t!==null&&this.Gl(t.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){Yt(this.cn,e),this.yc.forEach((t=>t.b_(e))),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,t){if(e==="left")return void this.$h({leftPriceScale:t});if(e==="right")return void this.$h({rightPriceScale:t});const s=this.Uc(e);s!==null&&(s.Dt.$h(t),this.Pc.m())}Uc(e){for(const t of this.yc){const s=t.w_(e);if(s!==null)return{Ht:t,Dt:s}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,t){e.Lo(t),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach((t=>t.S_(e))),this.Wu()}Ic(e){const t=new Ck(this.yl,this);e!==void 0?this.yc.splice(e,0,t):this.yc.push(t);const s=e===void 0?this.yc.length-1:e,o=it.es();return o.Nn(s,{Fn:0,Wn:!0}),this.Nc(o),t}V_(e,t,s){e.V_(t,s)}O_(e,t,s){e.O_(t,s),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,t){e.B_(t),this.Nc(this.Gc(e,2))}A_(e,t,s){t.Vo()||e.A_(t,s)}I_(e,t,s){t.Vo()||(e.I_(t,s),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,t){t.Vo()||(e.z_(t),this.Nc(this.Gc(e,2)))}E_(e,t){e.E_(t),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,t){const s=this.St();if(s.Ni()||t===0)return;const o=s.Hi();e=Math.max(1,Math.min(e,o)),s.Zu(e,t),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,t,s,o,a){this.vt.gn(e,t);let u=NaN,h=this.yl.Nu(e);const d=this.yl.Xs();d!==null&&(h=Math.min(Math.max(d.Os(),h),d.ui()));const p=o.vn(),v=p.Ct();v!==null&&(u=p.pn(t,v)),u=this.Bc.Oa(u,h,o),this.vt.kn(h,u,o),this.oa(),a||this.Rc.m(this.vt.xt(),{x:e,y:t},s)}ad(e,t,s){const o=s.vn(),a=o.Ct(),u=o.Rt(e,W(a)),h=this.yl.Va(t,!0),d=this.yl.It(W(h));this.ld(d,u,null,s,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const t=this.vt.xn(),s=this.vt.Sn();this.ld(t,s,null,e)}this.vt.Vn()}_d(e,t,s){const o=this.yl.mn(0);t!==void 0&&s!==void 0&&this.yl.bt(t,s);const a=this.yl.mn(0),u=this.yl.Eu(),h=this.yl.Xs();if(h!==null&&o!==null&&a!==null){const d=h.Kr(u),p=this.q_.key(o)>this.q_.key(a),v=e!==null&&e>u&&!p,g=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,w=d&&(s!==void 0||g)&&this.yl.W().shiftVisibleRangeOnNewBar;if(v&&!w){const _=e-u;this.yl.Jn(this.yl.Hu()-_)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const t=this.yc.find((s=>s.Uo().includes(e)));return t===void 0?null:t}Wu(){this.Ac.Vn(),this.yc.forEach((e=>e.F_())),this.Jl()}S(){this.yc.forEach((e=>e.S())),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,t,s){const o=this.yc[0],a=this.fd(t,e,o,s);return this.Cc.push(a),this.Cc.length===1?this.Kl():this.Uh(),a}vd(e){const t=this.dr(e),s=this.Cc.indexOf(e);is(s!==-1,"Series not found"),this.Cc.splice(s,1),W(t).Zo(e),e.S&&e.S()}Xl(e,t){const s=W(this.dr(e));s.Zo(e);const o=this.Uc(t);if(o===null){const a=e.Xi();s.qo(e,t,a)}else{const a=o.Ht===s?e.Xi():void 0;o.Ht.qo(e,t,a)}}hc(){const e=it.ss();e.$n(),this.Nc(e)}pd(e){const t=it.ss();t.Yn(e),this.Nc(t)}Kn(){const e=it.ss();e.Kn(),this.Nc(e)}Gn(e){const t=it.ss();t.Gn(e),this.Nc(t)}Jn(e){const t=it.ss();t.Jn(e),this.Nc(t)}Zn(e){const t=it.ss();t.Zn(e),this.Nc(t)}Un(){const e=it.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const t=this.Ec,s=this.zc;if(t===s)return t;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==s||this.Dc.Rs!==t)this.Dc={Ps:s,Rs:t,wd:new Map};else{const a=this.Dc.wd.get(e);if(a!==void 0)return a}const o=(function(a,u,h){const[d,p,v,g]=Jr(a),[w,_,S,x]=Jr(u),k=[It(d+h*(w-d)),It(p+h*(_-p)),It(v+h*(S-v)),jg(g+h*(x-g))];return`rgba(${k[0]}, ${k[1]}, ${k[2]}, ${k[3]})`})(s,t,e/100);return this.Dc.wd.set(e,o),o}Gc(e,t){const s=new it(t);if(e!==null){const o=this.yc.indexOf(e);s.Nn(o,{Fn:t})}return s}Fc(e,t){return t===void 0&&(t=2),this.Gc(this.dr(e),t)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach((t=>t.j_().qh().bt()))}fd(e,t,s,o){const a=new Nh(this,e,t,s,o),u=e.priceScaleId!==void 0?e.priceScaleId:this.md();return s.qo(a,u),hl(u)||a.$h(e),a}Lc(e){const t=this.cn.layout;return t.background.type==="gradient"?e===0?t.background.topColor:t.background.bottomColor:t.background.color}}function uh(n){return!cn(n)&&!ao(n)}function Hg(n){return cn(n)}(function(n){n[n.Disabled=0]="Disabled",n[n.Continuous=1]="Continuous",n[n.OnDataUpdate=2]="OnDataUpdate"})(nv||(nv={})),(function(n){n[n.LastBar=0]="LastBar",n[n.LastVisible=1]="LastVisible"})(sv||(sv={})),(function(n){n.Solid="solid",n.VerticalGradient="gradient"})(iv||(iv={})),(function(n){n[n.Year=0]="Year",n[n.Month=1]="Month",n[n.DayOfMonth=2]="DayOfMonth",n[n.Time=3]="Time",n[n.TimeWithSeconds=4]="TimeWithSeconds"})(rv||(rv={}));const ov=n=>n.getUTCFullYear();function Ik(n,e,t){return e.replace(/yyyy/g,(s=>kn(ov(s),4))(n)).replace(/yy/g,(s=>kn(ov(s)%100,2))(n)).replace(/MMMM/g,((s,o)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(o,{month:"long"}))(n,t)).replace(/MMM/g,((s,o)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(o,{month:"short"}))(n,t)).replace(/MM/g,(s=>kn((o=>o.getUTCMonth()+1)(s),2))(n)).replace(/dd/g,(s=>kn((o=>o.getUTCDate())(s),2))(n))}class Gg{constructor(e="yyyy-MM-dd",t="default"){this.gd=e,this.Md=t}Y_(e){return Ik(e,this.gd,this.Md)}}class $k{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",kn(e.getUTCHours(),2)).replace("%m",kn(e.getUTCMinutes(),2)).replace("%s",kn(e.getUTCSeconds(),2))}}const zk={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class Dk{constructor(e={}){const t=Object.assign(Object.assign({},zk),e);this.Td=new Gg(t.Sd,t.Cd),this.Pd=new $k(t.kd),this.Rd=t.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function za(n){return 60*n*60*1e3}function Rc(n){return 60*n*1e3}const Da=[{Dd:(av=1,1e3*av),Vd:10},{Dd:Rc(1),Vd:20},{Dd:Rc(5),Vd:21},{Dd:Rc(30),Vd:22},{Dd:za(1),Vd:30},{Dd:za(3),Vd:31},{Dd:za(6),Vd:32},{Dd:za(12),Vd:33}];var av;function lv(n,e){if(n.getUTCFullYear()!==e.getUTCFullYear())return 70;if(n.getUTCMonth()!==e.getUTCMonth())return 60;if(n.getUTCDate()!==e.getUTCDate())return 50;for(let t=Da.length-1;t>=0;--t)if(Math.floor(e.getTime()/Da[t].Dd)!==Math.floor(n.getTime()/Da[t].Dd))return Da[t].Vd;return 0}function Pc(n){let e=n;if(ao(n)&&(e=Rh(n)),!uh(e))throw new Error("time must be of type BusinessDay");const t=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(t.getTime()/1e3),Bd:e}}function uv(n){if(!Hg(n))throw new Error("time must be of type isUTCTimestamp");return{Od:n}}function Rh(n){const e=new Date(n);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${n}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function cv(n){ao(n.time)&&(n.time=Rh(n.time))}class hv{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?(function(t){t.forEach(cv)})(e):cv(e)}createConverterToInternalObj(e){return W((function(t){return t.length===0?null:uh(t[0].time)||ao(t[0].time)?Pc:uv})(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const t=e;return t.Bd===void 0?new Date(1e3*t.Od).getTime():new Date(Date.UTC(t.Bd.year,t.Bd.month-1,t.Bd.day)).getTime()}convertHorzItemToInternal(e){return Hg(t=e)?uv(t):uh(t)?Pc(t):Pc(Rh(t));var t}updateFormatter(e){if(!this.cn)return;const t=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new Dk({Sd:t,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new Gg(t,e.locale)}formatHorzItem(e){const t=e;return this.Ad.Y_(new Date(1e3*t.Od))}formatTickmark(e,t){const s=(function(a,u,h){switch(a){case 0:case 10:return u?h?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return u?3:2;case 50:return 2;case 60:return 1;case 70:return 0}})(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),o=this.cn.timeScale;if(o.tickMarkFormatter!==void 0){const a=o.tickMarkFormatter(e.originalTime,s,t.locale);if(a!==null)return a}return(function(a,u,h){const d={};switch(u){case 0:d.year="numeric";break;case 1:d.month="short";break;case 2:d.day="numeric";break;case 3:d.hour12=!1,d.hour="2-digit",d.minute="2-digit";break;case 4:d.hour12=!1,d.hour="2-digit",d.minute="2-digit",d.second="2-digit"}const p=a.Bd===void 0?new Date(1e3*a.Od):new Date(Date.UTC(a.Bd.year,a.Bd.month-1,a.Bd.day));return new Date(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate(),p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()).toLocaleString(h,d)})(e.time,s,t.locale)}maxTickMarkWeight(e){let t=e.reduce(Nk,e[0]).weight;return t>30&&t<50&&(t=30),t}fillWeightsForPoints(e,t){(function(s,o=0){if(s.length===0)return;let a=o===0?null:s[o-1].time.Od,u=a!==null?new Date(1e3*a):null,h=0;for(let d=o;d<s.length;++d){const p=s[d],v=new Date(1e3*p.time.Od);u!==null&&(p.timeWeight=lv(v,u)),h+=p.time.Od-(a||p.time.Od),a=p.time.Od,u=v}if(o===0&&s.length>1){const d=Math.ceil(h/(s.length-1)),p=new Date(1e3*(s[0].time.Od-d));s[0].timeWeight=lv(new Date(1e3*s[0].time.Od),p)}})(e,t)}static Id(e){return Yt({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Mi=typeof window<"u";function dv(){return!!Mi&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Oc(){return!!Mi&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function ch(n){return n+n%2}function Lc(n,e){return n.zd-e.zd}function Ac(n,e,t){const s=(n.zd-e.zd)/(n.ot-e.ot);return Math.sign(s)*Math.min(Math.abs(s),t)}class Uk{constructor(e,t,s,o){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=t,this.qd=s,this.rs=o}Yd(e,t){if(this.Ld!==null){if(this.Ld.ot===t)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:t,zd:e}}Vr(e,t){if(this.Ld===null||this.Ed===null||t-this.Ld.ot>50)return;let s=0;const o=Ac(this.Ld,this.Ed,this.Ud),a=Lc(this.Ld,this.Ed),u=[o],h=[a];if(s+=a,this.Nd!==null){const p=Ac(this.Ed,this.Nd,this.Ud);if(Math.sign(p)===Math.sign(o)){const v=Lc(this.Ed,this.Nd);if(u.push(p),h.push(v),s+=v,this.Fd!==null){const g=Ac(this.Nd,this.Fd,this.Ud);if(Math.sign(g)===Math.sign(o)){const w=Lc(this.Nd,this.Fd);u.push(g),h.push(w),s+=w}}}}let d=0;for(let p=0;p<u.length;++p)d+=h[p]/s*u[p];Math.abs(d)<this.$d||(this.Wd={zd:e,ot:t},this.Hd=d,this.jd=(function(p,v){const g=Math.log(v);return Math.log(1*g/-p)/g})(Math.abs(d),this.qd))}tc(e){const t=W(this.Wd),s=e-t.ot;return t.zd+this.Hd*(Math.pow(this.qd,s)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const t=e-W(this.Wd).ot;return Math.min(t,this.jd)}}class Fk{constructor(e,t){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=t,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return Ng(Jr(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function Is(n,e){const t=W(n.ownerDocument).createElement("canvas");n.appendChild(t);const s=YS(t,{options:{allowResizeObserver:!1},transform:(o,a)=>({width:Math.max(o.width,a.width),height:Math.max(o.height,a.height)})});return s.resizeCanvasElement(e),s}function $s(n){var e;n.width=1,n.height=1,(e=n.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function hh(n,e,t,s){n.gl&&n.gl(e,t,s)}function Wa(n,e,t,s){n.X(e,t,s)}function dh(n,e,t,s){const o=n(t,s);for(const a of o){const u=a.gt();u!==null&&e(u)}}function Bk(n){Mi&&window.chrome!==void 0&&n.addEventListener("mousedown",(e=>{if(e.button===1)return e.preventDefault(),!1}))}class Ph{constructor(e,t,s){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!Oc(),this.Af=o=>{this.If(o)},this.zf=o=>{if(this.Lf(o)){const a=this.Ef(o);if(++this._f,this.uf&&this._f>1){const{Nf:u}=this.Ff(on(o),this.cf);u<30&&!this.wf&&this.Wf(a,this.Hf.jf),this.$f()}}else{const a=this.Ef(o);if(++this.hf,this.lf&&this.hf>1){const{Nf:u}=this.Ff(on(o),this.af);u<5&&!this.bf&&this.Uf(a,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=t,this.cn=s,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const t=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",t)},this.Zf.addEventListener("mousemove",t),this.Lf(e))return;const s=this.Ef(e);this.Uf(s,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const t=this.Ef(e);this.Uf(t,this.Hf.tv),this.Bf=!0}iv(e){const t=Mc(e.changedTouches,W(this.Of));if(t===null||(this.Vf=Ua(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const s=this.Ff(on(t),W(this.pf)),{nv:o,sv:a,Nf:u}=s;if(this.mf||!(u<5)){if(!this.mf){const h=.5*o,d=a>=h&&!this.cn.ev(),p=h>a&&!this.cn.rv();d||p||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const h=this.Ef(e,t);this.Wf(h,this.Hf.hv),vi(e)}}}lv(e){if(e.button!==0)return;const t=this.Ff(on(e),W(this.vf)),{Nf:s}=t;if(s>=5&&(this.bf=!0,this.Yf()),this.bf){const o=this.Ef(e);this.Uf(o,this.Hf.av)}}Ff(e,t){const s=Math.abs(t.nt-e.nt),o=Math.abs(t.st-e.st);return{nv:s,sv:o,Nf:s+o}}ov(e){let t=Mc(e.changedTouches,W(this.Of));if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t===null)return;this.Of=null,this.Vf=Ua(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const s=this.Ef(e,t);if(this.Wf(s,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:o}=this.Ff(on(t),this.cf);o<30&&!this.wf&&this.Wf(s,this.Hf.jf),this.$f()}else this.wf||(this.Wf(s,this.Hf.uv),this.Hf.uv&&vi(e));this._f===0&&vi(e),e.touches.length===0&&this.ff&&(this.ff=!1,vi(e))}If(e){if(e.button!==0)return;const t=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),dv()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(t,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:s}=this.Ff(on(e),this.af);s<5&&!this.bf&&this.Uf(t,this.Hf.qf),this.Yf()}else this.bf||this.Uf(t,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const t=e.changedTouches[0];this.Of=t.identifier,this.Vf=Ua(e);const s=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=on(t),this.yf&&(this.yf(),this.yf=null);{const a=this.iv.bind(this),u=this.ov.bind(this);this.yf=()=>{s.removeEventListener("touchmove",a),s.removeEventListener("touchend",u)},s.addEventListener("touchmove",a,{passive:!1}),s.addEventListener("touchend",u,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const o=this.Ef(e,t);this.Wf(o,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=on(t))}mv(e){if(e.button!==0)return;const t=this.Zf.ownerDocument.documentElement;dv()&&t.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=on(e),this.kf&&(this.kf(),this.kf=null);{const o=this.lv.bind(this),a=this.If.bind(this);this.kf=()=>{t.removeEventListener("mousemove",o),t.removeEventListener("mouseup",a)},t.addEventListener("mousemove",o),t.addEventListener("mouseup",a)}if(this.Df=!0,this.Lf(e))return;const s=this.Ef(e);this.Uf(s,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=on(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,t=s=>{this.Hf.wv&&(s.composed&&this.Zf.contains(s.composedPath()[0])||s.target&&this.Zf.contains(s.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",t)},this.gf=()=>{e.removeEventListener("mousedown",t)},e.addEventListener("mousedown",t),e.addEventListener("touchstart",t,{passive:!0})}Oc()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),Bk(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",(()=>{}),{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",(e=>this.yv(e.touches)),{passive:!0}),this.Zf.addEventListener("touchmove",(e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const t=fv(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,t),vi(e)}}),{passive:!1}),this.Zf.addEventListener("touchend",(e=>{this.yv(e.touches)})))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const t=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,st:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this.Tf=fv(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const t=this.Ef(e);this.Uf(t,this.Hf.Pv),this.Bf=!Oc()}vv(e){const t=Mc(e.touches,W(this.Of));if(t===null)return;const s=this.Ef(e,t);this.Wf(s,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Ua(e)<this.Vf+500}Wf(e,t){t&&t.call(this.Hf,e)}Uf(e,t){t&&t.call(this.Hf,e)}Ef(e,t){const s=t||e,o=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-o.left,localY:s.clientY-o.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:s.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&vi(e)}}}}function fv(n,e){const t=n.clientX-e.clientX,s=n.clientY-e.clientY;return Math.sqrt(t*t+s*s)}function vi(n){n.cancelable&&n.preventDefault()}function on(n){return{nt:n.pageX,st:n.pageY}}function Ua(n){return n.timeStamp||performance.now()}function Mc(n,e){for(let t=0;t<n.length;++t)if(n[t].identifier===e)return n[t];return null}function Fa(n){return{Hc:n.Hc,Iv:{gr:n.zv.externalId},Lv:n.zv.cursorStyle}}function Vk(n,e,t){for(const s of n){const o=s.gt();if(o!==null&&o.wr){const a=o.wr(e,t);if(a!==null)return{Bv:s,Iv:a}}}return null}function Ic(n,e){return t=>{var s,o,a,u;return((o=(s=t.Dt())===null||s===void 0?void 0:s.Pa())!==null&&o!==void 0?o:"")!==e?[]:(u=(a=t.da)===null||a===void 0?void 0:a.call(t,n))!==null&&u!==void 0?u:[]}}function pv(n,e,t,s){if(!n.length)return;let o=0;const a=t/2,u=n[0].At(s,!0);let h=e===1?a-(n[0].Vi()-u/2):n[0].Vi()-u/2-a;h=Math.max(0,h);for(let d=1;d<n.length;d++){const p=n[d],v=n[d-1],g=v.At(s,!1),w=p.Vi(),_=v.Vi();if(e===1?w>_-g:w<_+g){const S=_-g*e;p.Oi(S);const x=S-e*g/2;if((e===1?x<0:x>t)&&h>0){const k=e===1?-1-x:x-t,C=Math.min(k,h);for(let R=o;R<n.length;R++)n[R].Oi(n[R].Vi()+e*C);h-=C}}else o=d,h=e===1?_-g-w:w-(_+g)}}class mv{constructor(e,t,s,o){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new Yr(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=t,this.ko=t.layout,this.Oc=s,this.qv=o==="left",this.Yv=Ic("normal",o),this.Zv=Ic("top",o),this.Xv=Ic("bottom",o),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=Is(this.Kv,Re({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const a=this.Gv.canvasElement;a.style.position="absolute",a.style.zIndex="1",a.style.left="0",a.style.top="0",this.Jv=Is(this.Kv,Re({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const u=this.Jv.canvasElement;u.style.position="absolute",u.style.zIndex="2",u.style.left="0",u.style.top="0";const h={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new Ph(this.Jv.canvasElement,h,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),$s(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),$s(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const t=this.ap(),s=W(this.Gv.canvasElement.getContext("2d"));s.save();const o=this.Li.Ha();s.font=this._p(),o.length>0&&(e=Math.max(this.Fv.xi(s,o[0].so),this.Fv.xi(s,o[o.length-1].so)));const a=this.up();for(let p=a.length;p--;){const v=this.Fv.xi(s,a[p].Kt());v>e&&(e=v)}const u=this.Li.Ct();if(u!==null&&this.Ev!==null&&(h=this.cn.crosshair).mode!==2&&h.horzLine.visible&&h.horzLine.labelVisible){const p=this.Li.pn(1,u),v=this.Li.pn(this.Ev.height-2,u);e=Math.max(e,this.Fv.xi(s,this.Li.Fi(Math.floor(Math.min(p,v))+.11111111111111,u)),this.Fv.xi(s,this.Li.Fi(Math.ceil(Math.max(p,v))-.11111111111111,u)))}var h;s.restore();const d=e||34;return ch(Math.ceil(t.C+t.T+t.A+t.I+5+d))}cp(e){this.Ev!==null&&Ls(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return W(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,W(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const s=As(this.Gv);s!==null&&(s.useBitmapCoordinateSpace((o=>{this.mp(o),this.Ie(o)})),this.tn.bp(s,this.Xv),this.wp(s),this.tn.bp(s,this.Yv),this.gp(s))}this.Jv.applySuggestedBitmapSize();const t=As(this.Jv);t!==null&&(t.useBitmapCoordinateSpace((({context:s,bitmapSize:o})=>{s.clearRect(0,0,o.width,o.height)})),this.Mp(t),this.tn.bp(t,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,t,s){const o=this.xp();o.width>0&&o.height>0&&e.drawImage(this.Gv.canvasElement,t,s)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.tn.$v().$t(),s=this.tn.fp();this.Nv=!0,t.V_(s,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.tn.$v().$t(),s=this.tn.fp(),o=this.Li;t.O_(s,o,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),t=this.tn.fp(),s=this.Li;this.Nv&&(this.Nv=!1,e.B_(t,s))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.tn.$v().$t(),s=this.tn.fp();this.Nv=!1,t.B_(s,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],t=this.Li===null?void 0:this.Li;return(s=>{for(let o=0;o<s.length;++o){const a=s[o].Rn(this.tn.fp(),t);for(let u=0;u<a.length;u++)e.push(a[u])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:t}){const{width:s,height:o}=t,a=this.tn.fp().$t(),u=a.q(),h=a.bd();u===h?ul(e,0,0,s,o,u):Rg(e,0,0,s,o,u,h)}Ie({context:e,bitmapSize:t,horizontalPixelRatio:s}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const o=Math.max(1,Math.floor(this.ap().C*s));let a;a=this.qv?t.width-o:0,e.fillRect(a,0,o,t.height)}wp(e){if(this.Ev===null||this.Li===null)return;const t=this.Li.Ha(),s=this.Li.W(),o=this.ap(),a=this.qv?this.Ev.width-o.T:0;s.borderVisible&&s.ticksVisible&&e.useBitmapCoordinateSpace((({context:u,horizontalPixelRatio:h,verticalPixelRatio:d})=>{u.fillStyle=s.borderColor;const p=Math.max(1,Math.floor(d)),v=Math.floor(.5*d),g=Math.round(o.T*h);u.beginPath();for(const w of t)u.rect(Math.floor(a*h),Math.round(w.Ea*d)-v,g,p);u.fill()})),e.useMediaCoordinateSpace((({context:u})=>{var h;u.font=this._p(),u.fillStyle=(h=s.textColor)!==null&&h!==void 0?h:this.ko.textColor,u.textAlign=this.qv?"right":"left",u.textBaseline="middle";const d=this.qv?Math.round(a-o.A):Math.round(a+o.T+o.A),p=t.map((v=>this.Fv.Mi(u,v.so)));for(let v=t.length;v--;){const g=t[v];u.fillText(g.so,d,g.Ea+p[v])}}))}pp(){if(this.Ev===null||this.Li===null)return;const e=[],t=this.Li.Uo().slice(),s=this.tn.fp(),o=this.ap();this.Li===s.pr()&&this.tn.fp().Uo().forEach((u=>{s.vr(u)&&t.push(u)}));const a=this.Li;t.forEach((u=>{u.Rn(s,a).forEach((h=>{h.Oi(null),h.Bi()&&e.push(h)}))})),e.forEach((u=>u.Oi(u.ki()))),this.Li.W().alignLabels&&this.yp(e,o)}yp(e,t){if(this.Ev===null)return;const s=this.Ev.height/2,o=e.filter((u=>u.ki()<=s)),a=e.filter((u=>u.ki()>s));o.sort(((u,h)=>h.ki()-u.ki())),a.sort(((u,h)=>u.ki()-h.ki()));for(const u of e){const h=Math.floor(u.At(t)/2),d=u.ki();d>-h&&d<h&&u.Oi(h),d>this.Ev.height-h&&d<this.Ev.height+h&&u.Oi(this.Ev.height-h)}pv(o,1,this.Ev.height,t),pv(a,-1,this.Ev.height,t)}gp(e){if(this.Ev===null)return;const t=this.up(),s=this.ap(),o=this.qv?"right":"left";t.forEach((a=>{a.Ai()&&a.gt(W(this.Li)).X(e,s,this.Fv,o)}))}Mp(e){if(this.Ev===null||this.Li===null)return;const t=this.tn.$v().$t(),s=[],o=this.tn.fp(),a=t.Zc().Rn(o,this.Li);a.length&&s.push(a);const u=this.ap(),h=this.qv?"right":"left";s.forEach((d=>{d.forEach((p=>{p.gt(W(this.Li)).X(e,u,this.Fv,h)}))}))}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return Ai(this.ko.fontSize,this.ko.fontFamily)}}function Wk(n,e){var t,s;return(s=(t=n.ua)===null||t===void 0?void 0:t.call(n,e))!==null&&s!==void 0?s:[]}function Ba(n,e){var t,s;return(s=(t=n.Pn)===null||t===void 0?void 0:t.call(n,e))!==null&&s!==void 0?s:[]}function Kk(n,e){var t,s;return(s=(t=n.Ji)===null||t===void 0?void 0:t.call(n,e))!==null&&s!==void 0?s:[]}function qk(n,e){var t,s;return(s=(t=n.aa)===null||t===void 0?void 0:t.call(n,e))!==null&&s!==void 0?s:[]}class Oh{constructor(e,t){this.Ev=Re({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new We,this.Op=new We,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=t,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(s),this.Gv=Is(s,Re({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const o=this.Gv.canvasElement;o.style.position="absolute",o.style.zIndex="1",o.style.left="0",o.style.top="0",this.Jv=Is(s,Re({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const a=this.Jv.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new Ph(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),$s(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),$s(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return W(this.Np)}qp(e){var t,s;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(Oh.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(t=this.Pp)!==null&&t!==void 0?t:new Fk(this.Wp,this.Qd),this.Pp.bt()):((s=this.Pp)===null||s===void 0||s.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(W(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(W(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const t=e.localX,s=e.localY;this.Gp(t,s,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var t;if(!this.Np)return;this.Kp();const s=e.localX,o=e.localY;this.Gp(s,o,e);const a=this.wr(s,o);this.Qd.Qp((t=a==null?void 0:a.Lv)!==null&&t!==void 0?t:null),this.$i().jc(a&&{Hc:a.Hc,Iv:a.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const t={x:e.localX,y:e.localY};this.rm(t,t,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,t){if(!this.Qd.W().handleScale.pinch)return;const s=5*(t-this.Bp);this.Bp=t,this.$i().Qc(e.nt,s)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const t=this.$i().Zc();this.Ip!==null&&t.yt()&&(this.Lp={x:t.Yt(),y:t.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const t=e.localX,s=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const o=W(this.Lp),a=o.x+(t-this.Ip.x),u=o.y+(s-this.Ip.y);this.Gp(a,u,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,t){const s=this.Np;return s===null?null:(function(o,a,u){const h=o.Uo(),d=(function(p,v,g){var w,_;let S,x;for(const R of p){const P=(_=(w=R.va)===null||w===void 0?void 0:w.call(R,v,g))!==null&&_!==void 0?_:[];for(const j of P)k=j.zOrder,(!(C=S==null?void 0:S.zOrder)||k==="top"&&C!=="top"||k==="normal"&&C==="bottom")&&(S=j,x=R)}var k,C;return S&&x?{zv:S,Hc:x}:null})(h,a,u);if((d==null?void 0:d.zv.zOrder)==="top")return Fa(d);for(const p of h){if(d&&d.Hc===p&&d.zv.zOrder!=="bottom"&&!d.zv.isBackground)return Fa(d);const v=Vk(p.Pn(o),a,u);if(v!==null)return{Hc:p,Bv:v.Bv,Iv:v.Iv};if(d&&d.Hc===p&&d.zv.zOrder!=="bottom"&&d.zv.isBackground)return Fa(d)}return d!=null&&d.zv?Fa(d):null})(s,e,t)}_m(e,t){W(t==="left"?this.Cp:this.Tp).cp(Re({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){Ls(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=W(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const t of e.Ba())if(e.vr(t)){const s=t.Dt();s!==null&&e.P_(s),t.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,t,s){const o=this.xp();o.width>0&&o.height>0&&e.drawImage(this.Gv.canvasElement,t,s)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const s=As(this.Gv);s!==null&&(s.useBitmapCoordinateSpace((o=>{this.mp(o)})),this.Np&&(this.fm(s,Wk),this.vm(s),this.pm(s),this.fm(s,Ba),this.fm(s,Kk)))}this.Jv.applySuggestedBitmapSize();const t=As(this.Jv);t!==null&&(t.useBitmapCoordinateSpace((({context:s,bitmapSize:o})=>{s.clearRect(0,0,o.width,o.height)})),this.bm(t),this.fm(t,qk))}wm(){return this.Cp}gm(){return this.Tp}bp(e,t){this.fm(e,t)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,t){const s=t.localX,o=t.localY;e.M()&&e.m(this.$i().St().Nu(s),{x:s,y:o},t)}mp({context:e,bitmapSize:t}){const{width:s,height:o}=t,a=this.$i(),u=a.q(),h=a.bd();u===h?ul(e,0,0,s,o,h):Rg(e,0,0,s,o,u,h)}vm(e){const t=W(this.Np).j_().qh().gt();t!==null&&t.X(e,!1)}pm(e){const t=this.$i().Yc();this.Mm(e,Ba,hh,t),this.Mm(e,Ba,Wa,t)}bm(e){this.Mm(e,Ba,Wa,this.$i().Zc())}fm(e,t){const s=W(this.Np).Uo();for(const o of s)this.Mm(e,t,hh,o);for(const o of s)this.Mm(e,t,Wa,o)}Mm(e,t,s,o){const a=W(this.Np),u=a.$t().Wc(),h=u!==null&&u.Hc===o,d=u!==null&&h&&u.Iv!==void 0?u.Iv.Mr:void 0;dh(t,(p=>s(p,e,h,d)),o,a)}Zp(){if(this.Np===null)return;const e=this.Qd,t=this.Np.R_().W().visible,s=this.Np.D_().W().visible;t||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),s||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const o=e.$t().ud();t&&this.Cp===null&&(this.Cp=new mv(this,e.W(),o,"left"),this.jp.appendChild(this.Cp.lp())),s&&this.Tp===null&&(this.Tp=new mv(this,e.W(),o,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,t,s){this.$i().ld(this.Sm(e),this.km(t),s,W(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,t,s){this.Ip=e,this.zp=!1,this.Gp(t.x,t.y,s);const o=this.$i().Zc();this.Lp={x:o.Yt(),y:o.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const t=this.$i(),s=this.fp();if(t.z_(s,s.vn()),this.Rp=null,this.Dp=!1,t.ed(),this.Ep!==null){const o=performance.now(),a=t.St();this.Ep.Vr(a.Hu(),o),this.Ep.Qu(o)||t.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)W(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const t=this.$i(),s=t.St();if(s.Ni())return;const o=this.Qd.W(),a=o.handleScroll,u=o.kineticScroll;if((!a.pressedMouseMove||e.Dv)&&(!a.horzTouchDrag&&!a.vertTouchDrag||!e.Dv))return;const h=this.Np.vn(),d=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:d,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&u.touch||!e.Dv&&u.mouse){const p=s.le();this.Ep=new Uk(.2/p,7/p,.997,15/p),this.Ep.Yd(s.Hu(),this.Rp.Od)}else this.Ep=null;h.Ni()||t.A_(this.Np,h,e.localY),t.nd(e.localX),this.Dp=!0}this.Dp&&(h.Ni()||t.I_(this.Np,h,e.localY),t.sd(e.localX),this.Ep!==null&&this.Ep.Yd(s.Hu(),d))}}class vv{constructor(e,t,s,o,a){this.ft=!0,this.Ev=Re({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=s.ud,this.cn=t,this.Tm=o,this.Pm=a,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=Is(this.Kv,Re({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),$s(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){Ls(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const t=As(this.Gv);t!==null&&t.useBitmapCoordinateSpace((s=>{this.mp(s),this.Ie(s)}))}xp(){return this.Gv.bitmapSize}Sp(e,t,s){const o=this.xp();o.width>0&&o.height>0&&e.drawImage(this.Gv.canvasElement,t,s)}Ie({context:e,bitmapSize:t,horizontalPixelRatio:s,verticalPixelRatio:o}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const a=Math.floor(this.Oc.W().C*s),u=Math.floor(this.Oc.W().C*o),h=this.qv?t.width-a:0;e.fillRect(h,0,a,u)}mp({context:e,bitmapSize:t}){ul(e,0,0,t.width,t.height,this.Pm())}}function Lh(n){return e=>{var t,s;return(s=(t=e.fa)===null||t===void 0?void 0:t.call(e,n))!==null&&s!==void 0?s:[]}}const Hk=Lh("normal"),Gk=Lh("top"),Jk=Lh("bottom");class Qk{constructor(e,t){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=Re({width:0,height:0}),this.Om=new We,this.Fv=new Yr(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=t,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=Is(this.Im,Re({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const s=this.Gv.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jv=Is(this.Im,Re({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const o=this.Jv.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new Ph(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),$s(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),$s(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const t=this.Qd.$t();!t.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&t.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const t=this.Qd.$t();!t.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&t.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,t,s){Ls(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(Re({width:t,height:e.height})),this.Dm!==null&&this.Dm.cp(Re({width:s,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,t,s){const o=this.xp();o.width>0&&o.height>0&&e.drawImage(this.Gv.canvasElement,t,s)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const s=As(this.Gv);s!==null&&(s.useBitmapCoordinateSpace((o=>{this.mp(o),this.Ie(o),this.$m(s,Jk)})),this.wp(s),this.$m(s,Hk)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const t=As(this.Jv);t!==null&&(t.useBitmapCoordinateSpace((({context:s,bitmapSize:o})=>{s.clearRect(0,0,o.width,o.height)})),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],t),this.$m(t,Gk))}$m(e,t){const s=this.Qd.$t().wt();for(const o of s)dh(t,(a=>hh(a,e,!1,void 0)),o,void 0);for(const o of s)dh(t,(a=>Wa(a,e,!1,void 0)),o,void 0)}mp({context:e,bitmapSize:t}){ul(e,0,0,t.width,t.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:t,verticalPixelRatio:s}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const o=Math.max(1,Math.floor(this.jm().C*s));e.fillRect(0,0,t.width,o)}}wp(e){const t=this.Qd.$t().St(),s=t.Ha();if(!s||s.length===0)return;const o=this.q_.maxTickMarkWeight(s),a=this.jm(),u=t.W();u.borderVisible&&u.ticksVisible&&e.useBitmapCoordinateSpace((({context:h,horizontalPixelRatio:d,verticalPixelRatio:p})=>{h.strokeStyle=this.qm(),h.fillStyle=this.qm();const v=Math.max(1,Math.floor(d)),g=Math.floor(.5*d);h.beginPath();const w=Math.round(a.T*p);for(let _=s.length;_--;){const S=Math.round(s[_].coord*d);h.rect(S-g,0,v,w)}h.fill()})),e.useMediaCoordinateSpace((({context:h})=>{const d=a.C+a.T+a.L+a.P/2;h.textAlign="center",h.textBaseline="middle",h.fillStyle=this.$(),h.font=this._p();for(const p of s)if(p.weight<o){const v=p.needAlignCoordinate?this.Ym(h,p.coord,p.label):p.coord;h.fillText(p.label,v,d)}this.Qd.W().timeScale.allowBoldLabels&&(h.font=this.Zm());for(const p of s)if(p.weight>=o){const v=p.needAlignCoordinate?this.Ym(h,p.coord,p.label):p.coord;h.fillText(p.label,v,d)}}))}Ym(e,t,s){const o=this.Fv.xi(e,s),a=o/2,u=Math.floor(t-a)+.5;return u<0?t+=Math.abs(0-u):u+o>this.Ev.width&&(t-=Math.abs(this.Ev.width-(u+o))),t}Um(e,t){const s=this.jm();for(const o of e)for(const a of o.Qi())a.gt().X(t,s)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return Ai(this.j(),this.cn.fontFamily)}Zm(){return Ai(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new Yr,Hm:0});const e=this.k,t=this._p();if(e.R!==t){const s=this.j();e.P=s,e.R=t,e.L=3*s/12,e.B=3*s/12,e.ji=9*s/12,e.N=0,e.Hm=4*s/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),t=e.W();t.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),t.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const s={ud:this.Qd.$t().ud()},o=()=>t.leftPriceScale.borderVisible&&e.St().W().borderVisible,a=()=>e.bd();t.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new vv("left",t,s,o,a),this.Bm.appendChild(this.Rm.lp())),t.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new vv("right",t,s,o,a),this.Am.appendChild(this.Dm.lp()))}}const Xk=!!Mi&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((n=>n.brand.includes("Chromium")))&&!!Mi&&(!(($c=navigator==null?void 0:navigator.userAgentData)===null||$c===void 0)&&$c.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var $c;class Yk{constructor(e,t,s){var o;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new We,this.Op=new We,this.Rc=new We,this.ib=null,this.nb=null,this.Jd=e,this.cn=t,this.q_=s,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(o=this.Xd).style.userSelect="none",o.style.webkitUserSelect="none",o.style.msUserSelect="none",o.style.MozUserSelect="none",o.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),zc(this.cn)&&this.hb(!0),this.$i=new Mk(this.Vc.bind(this),this.cn,s),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new Qk(this,this.q_),this.sb.appendChild(this.ab.lp());const a=t.autoSize&&this.ob();let u=this.cn.width,h=this.cn.height;if(a||u===0||h===0){const d=e.getBoundingClientRect();u=u||d.width,h=h||d.height}this._b(u,h),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],W(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,t,s=!1){if(this.ho===t&&this.__===e)return;const o=(function(h){const d=Math.floor(h.width),p=Math.floor(h.height);return Re({width:d-d%2,height:p-p%2})})(Re({width:e,height:t}));this.ho=o.height,this.__=o.width;const a=this.ho+"px",u=this.__+"px";W(this.Xd).style.height=a,W(this.Xd).style.width=u,this.sb.style.height=a,this.sb.style.width=u,s?this.mb(it.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=it.es());for(let t=0;t<this.Xm.length;t++)this.Xm[t].vp(e.Hn(t).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const t=zc(this.cn);this.$i.$h(e);const s=zc(this.cn);s!==t&&this.hb(s),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),t=document.createElement("canvas");t.width=e.width,t.height=e.height;const s=W(t.getContext("2d"));return this.gb(s),t}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:W(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return pt(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let t=0,s=0;const o=this.Xm[0],a=(h,d)=>{let p=0;for(let v=0;v<this.Xm.length;v++){const g=this.Xm[v],w=W(h==="left"?g.wm():g.gm()),_=w.xp();e!==null&&w.Sp(e,d,p),p+=_.height}};this.xb()&&(a("left",0),t+=W(o.wm()).xp().width);for(let h=0;h<this.Xm.length;h++){const d=this.Xm[h],p=d.xp();e!==null&&d.Sp(e,t,s),s+=p.height}t+=o.xp().width,this.Sb()&&(a("right",t),t+=W(o.gm()).xp().width);const u=(h,d,p)=>{W(h==="left"?this.ab.Lm():this.ab.Em()).Sp(W(e),d,p)};if(this.cn.timeScale.visible){const h=this.ab.xp();if(e!==null){let d=0;this.xb()&&(u("left",d,s),d=W(o.wm()).xp().width),this.ab.Sp(e,d,s),d+=h.width,this.Sb()&&u("right",d,s)}s+=h.height}return Re({width:t,height:s})}Pb(){let e=0,t=0,s=0;for(const S of this.Xm)this.xb()&&(t=Math.max(t,W(S.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(s=Math.max(s,W(S.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=S.M_();t=ch(t),s=ch(s);const o=this.__,a=this.ho,u=Math.max(o-t-s,0),h=this.cn.timeScale.visible;let d=h?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var p;d=(p=d)+p%2;const v=0+d,g=a<v?0:a-v,w=g/e;let _=0;for(let S=0;S<this.Xm.length;++S){const x=this.Xm[S];x.qp(this.$i.qc()[S]);let k=0,C=0;C=S===this.Xm.length-1?g-_:Math.round(x.M_()*w),k=Math.max(C,2),_+=k,x.cp(Re({width:u,height:k})),this.xb()&&x._m(t,"left"),this.Sb()&&x._m(s,"right"),x.fp()&&this.$i.Kc(x.fp(),k)}this.ab.Fm(Re({width:h?u:0,height:d}),h?t:0,h?s:0),this.$i.S_(u),this.Gm!==t&&(this.Gm=t),this.Jm!==s&&(this.Jm=s)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return Xk?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const t=this.Rb(e),s=t*e.deltaX/100,o=-t*e.deltaY/100;if(e.cancelable&&e.preventDefault(),o!==0&&this.cn.handleScale.mouseWheel){const a=Math.sign(o)*Math.min(1,Math.abs(o)),u=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(u,a)}s!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*s)}mb(e,t){var s;const o=e.jn();o===3&&this.Db(),o!==3&&o!==2||(this.Vb(e),this.Ob(e,t),this.ab.bt(),this.Xm.forEach((a=>{a.Xp()})),((s=this.Qm)===null||s===void 0?void 0:s.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,t),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,t){for(const s of e.Qn())this.ns(s,t)}Vb(e){const t=this.$i.qc();for(let s=0;s<t.length;s++)e.Hn(s).Wn&&t[s].N_()}ns(e,t){const s=this.$i.St();switch(e.qn){case 0:s.hc();break;case 1:s.lc(e.Vt);break;case 2:s.Gn(e.Vt);break;case 3:s.Jn(e.Vt);break;case 4:s.qu();break;case 5:e.Vt.Qu(t)||s.Jn(e.Vt.tc(t))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame((t=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const s=this.Qm;this.Qm=null,this.mb(s,t);for(const o of s.Qn())if(o.qn===5&&!o.Vt.Qu(t)){this.$t().Zn(o.Vt);break}}})))}Db(){this.ub()}ub(){const e=this.$i.qc(),t=e.length,s=this.Xm.length;for(let o=t;o<s;o++){const a=pt(this.Xm.pop());this.sb.removeChild(a.lp()),a.lm().p(this),a.am().p(this),a.S()}for(let o=s;o<t;o++){const a=new Oh(this,e[o]);a.lm().l(this.Bb.bind(this),this),a.am().l(this.Ab.bind(this),this),this.Xm.push(a),this.sb.insertBefore(a.lp(),this.ab.lp())}for(let o=0;o<t;o++){const a=e[o],u=this.Xm[o];u.fp()!==a?u.qp(a):u.Up()}this.cb(),this.Pb()}Ib(e,t,s){var o;const a=new Map;e!==null&&this.$i.wt().forEach((v=>{const g=v.In().ll(e);g!==null&&a.set(v,g)}));let u;if(e!==null){const v=(o=this.$i.St().Ui(e))===null||o===void 0?void 0:o.originalTime;v!==void 0&&(u=v)}const h=this.$t().Wc(),d=h!==null&&h.Hc instanceof Nh?h.Hc:void 0,p=h!==null&&h.Iv!==void 0?h.Iv.gr:void 0;return{zb:u,ee:e??void 0,Lb:t??void 0,Eb:d,Nb:a,Fb:p,Wb:s??void 0}}Bb(e,t,s){this.Vp.m((()=>this.Ib(e,t,s)))}Ab(e,t,s){this.Op.m((()=>this.Ib(e,t,s)))}lb(e,t,s){this.Rc.m((()=>this.Ib(e,t,s)))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver((e=>{const t=e.find((s=>s.target===this.Jd));t&&this._b(t.contentRect.width,t.contentRect.height)})),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function zc(n){return!!(n.handleScroll.mouseWheel||n.handleScale.mouseWheel)}function Zk(n){return(function(e){return e.open!==void 0})(n)||(function(e){return e.value!==void 0})(n)}function Jg(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var o=0;for(s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]])}return t}function gv(n,e,t,s){const o=t.value,a={ee:e,ot:n,Vt:[o,o,o,o],zb:s};return t.color!==void 0&&(a.V=t.color),a}function eE(n,e,t,s){const o=t.value,a={ee:e,ot:n,Vt:[o,o,o,o],zb:s};return t.lineColor!==void 0&&(a.lt=t.lineColor),t.topColor!==void 0&&(a.Ps=t.topColor),t.bottomColor!==void 0&&(a.Rs=t.bottomColor),a}function tE(n,e,t,s){const o=t.value,a={ee:e,ot:n,Vt:[o,o,o,o],zb:s};return t.topLineColor!==void 0&&(a.Re=t.topLineColor),t.bottomLineColor!==void 0&&(a.De=t.bottomLineColor),t.topFillColor1!==void 0&&(a.ke=t.topFillColor1),t.topFillColor2!==void 0&&(a.ye=t.topFillColor2),t.bottomFillColor1!==void 0&&(a.Ce=t.bottomFillColor1),t.bottomFillColor2!==void 0&&(a.Te=t.bottomFillColor2),a}function nE(n,e,t,s){const o={ee:e,ot:n,Vt:[t.open,t.high,t.low,t.close],zb:s};return t.color!==void 0&&(o.V=t.color),o}function sE(n,e,t,s){const o={ee:e,ot:n,Vt:[t.open,t.high,t.low,t.close],zb:s};return t.color!==void 0&&(o.V=t.color),t.borderColor!==void 0&&(o.Ot=t.borderColor),t.wickColor!==void 0&&(o.Xh=t.wickColor),o}function iE(n,e,t,s,o){const a=pt(o)(t),u=Math.max(...a),h=Math.min(...a),d=a[a.length-1],p=[d,u,h,d],v=t,{time:g,color:w}=v;return{ee:e,ot:n,Vt:p,zb:s,$e:Jg(v,["time","color"]),V:w}}function Va(n){return n.Vt!==void 0}function yv(n,e){return e.customValues!==void 0&&(n.jb=e.customValues),n}function _s(n){return(e,t,s,o,a,u)=>(function(h,d){return d?d(h):(p=h).open===void 0&&p.value===void 0;var p})(s,u)?yv({ot:e,ee:t,zb:o},s):yv(n(e,t,s,o,a),s)}function wv(n){return{Candlestick:_s(sE),Bar:_s(nE),Area:_s(eE),Baseline:_s(tE),Histogram:_s(gv),Line:_s(gv),Custom:_s(iE)}[n]}function bv(n){return{ee:0,Hb:new Map,la:n}}function xv(n,e){if(n!==void 0&&n.length!==0)return{$b:e.key(n[0].ot),Ub:e.key(n[n.length-1].ot)}}function _v(n){let e;return n.forEach((t=>{e===void 0&&(e=t.zb)})),pt(e)}class rE{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,t){let s=this.qb.size!==0,o=!1;const a=this.Yb.get(e);if(a!==void 0)if(this.Yb.size===1)s=!1,o=!0,this.qb.clear();else for(const d of this.Xb)d.pointData.Hb.delete(e)&&(o=!0);let u=[];if(t.length!==0){const d=t.map((_=>_.time)),p=this.q_.createConverterToInternalObj(t),v=wv(e.Qh()),g=e.Ca(),w=e.Ta();u=t.map(((_,S)=>{const x=p(_.time),k=this.q_.key(x);let C=this.qb.get(k);C===void 0&&(C=bv(x),this.qb.set(k,C),o=!0);const R=v(x,C.ee,_,d[S],g,w);return C.Hb.set(e,R),R}))}s&&this.Gb(),this.Jb(e,u);let h=-1;if(o){const d=[];this.qb.forEach((p=>{d.push({timeWeight:0,time:p.la,pointData:p,originalTime:_v(p.Hb)})})),d.sort(((p,v)=>this.q_.key(p.time)-this.q_.key(v.time))),h=this.Qb(d)}return this.tw(e,h,(function(d,p,v){const g=xv(d,v),w=xv(p,v);if(g!==void 0&&w!==void 0)return{ta:g.Ub>=w.Ub&&g.$b>=w.$b}})(this.Yb.get(e),a,this.q_))}vd(e){return this.Kb(e,[])}iw(e,t){const s=t;(function(x){x.zb===void 0&&(x.zb=x.time)})(s),this.q_.preprocessData(t);const o=this.q_.createConverterToInternalObj([t])(t.time),a=this.Zb.get(e);if(a!==void 0&&this.q_.key(o)<this.q_.key(a))throw new Error(`Cannot update oldest data, last time=${a}, new time=${o}`);let u=this.qb.get(this.q_.key(o));const h=u===void 0;u===void 0&&(u=bv(o),this.qb.set(this.q_.key(o),u));const d=wv(e.Qh()),p=e.Ca(),v=e.Ta(),g=d(o,u.ee,t,s.zb,p,v);u.Hb.set(e,g),this.nw(e,g);const w={ta:Va(g)};if(!h)return this.tw(e,-1,w);const _={timeWeight:0,time:u.la,pointData:u,originalTime:_v(u.Hb)},S=lo(this.Xb,this.q_.key(_.time),((x,k)=>this.q_.key(x.time)<k));this.Xb.splice(S,0,_);for(let x=S;x<this.Xb.length;++x)Dc(this.Xb[x].pointData,x);return this.q_.fillWeightsForPoints(this.Xb,S),this.tw(e,S,w)}nw(e,t){let s=this.Yb.get(e);s===void 0&&(s=[],this.Yb.set(e,s));const o=s.length!==0?s[s.length-1]:null;o===null||this.q_.key(t.ot)>this.q_.key(o.ot)?Va(t)&&s.push(t):Va(t)?s[s.length-1]=t:s.splice(-1,1),this.Zb.set(e,t.ot)}Jb(e,t){t.length!==0?(this.Yb.set(e,t.filter(Va)),this.Zb.set(e,t[t.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let t=-1;for(let s=0;s<this.Xb.length&&s<e.length;++s){const o=this.Xb[s],a=e[s];if(this.q_.key(o.time)!==this.q_.key(a.time)){t=s;break}a.timeWeight=o.timeWeight,Dc(a.pointData,s)}if(t===-1&&this.Xb.length!==e.length&&(t=Math.min(this.Xb.length,e.length)),t===-1)return-1;for(let s=t;s<e.length;++s)Dc(e[s].pointData,s);return this.q_.fillWeightsForPoints(e,t),this.Xb=e,t}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach((t=>{t.length!==0&&(e=Math.max(e,t[t.length-1].ee))})),e}tw(e,t,s){const o={ew:new Map,St:{Eu:this.sw()}};if(t!==-1)this.Yb.forEach(((a,u)=>{o.ew.set(u,{$e:a,rw:u===e?s:void 0})})),this.Yb.has(e)||o.ew.set(e,{$e:[],rw:s}),o.St.hw=this.Xb,o.St.lw=t;else{const a=this.Yb.get(e);o.ew.set(e,{$e:a||[],rw:s})}return o}}function Dc(n,e){n.ee=e,n.Hb.forEach((t=>{t.ee=e}))}function Ah(n){const e={value:n.Vt[3],time:n.zb};return n.jb!==void 0&&(e.customValues=n.jb),e}function Sv(n){const e=Ah(n);return n.V!==void 0&&(e.color=n.V),e}function oE(n){const e=Ah(n);return n.lt!==void 0&&(e.lineColor=n.lt),n.Ps!==void 0&&(e.topColor=n.Ps),n.Rs!==void 0&&(e.bottomColor=n.Rs),e}function aE(n){const e=Ah(n);return n.Re!==void 0&&(e.topLineColor=n.Re),n.De!==void 0&&(e.bottomLineColor=n.De),n.ke!==void 0&&(e.topFillColor1=n.ke),n.ye!==void 0&&(e.topFillColor2=n.ye),n.Ce!==void 0&&(e.bottomFillColor1=n.Ce),n.Te!==void 0&&(e.bottomFillColor2=n.Te),e}function Qg(n){const e={open:n.Vt[0],high:n.Vt[1],low:n.Vt[2],close:n.Vt[3],time:n.zb};return n.jb!==void 0&&(e.customValues=n.jb),e}function lE(n){const e=Qg(n);return n.V!==void 0&&(e.color=n.V),e}function uE(n){const e=Qg(n),{V:t,Ot:s,Xh:o}=n;return t!==void 0&&(e.color=t),s!==void 0&&(e.borderColor=s),o!==void 0&&(e.wickColor=o),e}function fh(n){return{Area:oE,Line:Sv,Baseline:aE,Histogram:Sv,Bar:lE,Candlestick:uE,Custom:cE}[n]}function cE(n){const e=n.zb;return Object.assign(Object.assign({},n.$e),{time:e})}const hE={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},dE={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},fE={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Sh,attributionLogo:!0},Uc={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},pE={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},mE={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Sh,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function kv(){return{width:0,height:0,autoSize:!1,layout:fE,crosshair:hE,grid:dE,overlayPriceScales:Object.assign({},Uc),leftPriceScale:Object.assign(Object.assign({},Uc),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},Uc),{visible:!0}),timeScale:pE,watermark:mE,localization:{locale:Mi?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class vE{constructor(e,t){this.aw=e,this.ow=t}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return hl(this.ow)?this.aw.Mb(this.ow):0}Li(){return W(this.aw.$t().Uc(this.ow)).Dt}}function Ev(n,e,t){const s=Jg(n,["time","originalTime"]),o=Object.assign({time:e},s);return t!==void 0&&(o.originalTime=t),o}const gE={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class yE{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class wE{constructor(e,t,s,o,a){this.uw=new We,this.Es=e,this.cw=t,this.dw=s,this.q_=a,this.fw=o}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const t=this.Es.Ct();return t===null?null:this.Es.Dt().Rt(e,t.Vt)}coordinateToPrice(e){const t=this.Es.Ct();return t===null?null:this.Es.Dt().pn(e,t.Vt)}barsInLogicalRange(e){if(e===null)return null;const t=new ki(new $r(e.from,e.to)).lu(),s=this.Es.In();if(s.Ni())return null;const o=s.ll(t.Os(),1),a=s.ll(t.ui(),-1),u=W(s.el()),h=W(s.An());if(o!==null&&a!==null&&o.ee>a.ee)return{barsBefore:e.from-u,barsAfter:h-e.to};const d={barsBefore:o===null||o.ee===u?e.from-u:o.ee-u,barsAfter:a===null||a.ee===h?h-e.to:h-a.ee};return o!==null&&a!==null&&(d.from=o.zb,d.to=a.zb),d}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,t){const s=this.Es.In().ll(e,t);return s===null?null:fh(this.seriesType())(s)}data(){const e=fh(this.seriesType());return this.Es.In().ne().map((t=>e(t)))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const t=e.map((s=>Ev(s,this.q_.convertHorzItemToInternal(s.time),s.time)));this.Es.na(t)}markers(){return this.Es.sa().map((e=>Ev(e,e.originalTime,void 0)))}applyOptions(e){this.Es.$h(e)}options(){return Sn(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const t=Yt(Sn(gE),e),s=this.Es.ea(t);return new yE(s)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class bE{constructor(e,t,s){this.ww=new We,this.mu=new We,this.Om=new We,this.$i=e,this.yl=e.St(),this.ab=t,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=s}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,t){t?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const t={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},s=this.yl.Iu(t);this.$i.pd(s)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){is(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const t=this.$i.St();return t.Ni()?null:t.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const t=this.q_.convertHorzItemToInternal(e),s=this.yl.Va(t,!1);return s===null?null:this.yl.It(s)}coordinateToTime(e){const t=this.$i.St(),s=t.Nu(e),o=t.Ui(s);return o===null?null:o.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},Sn(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function xE(n){if(n===void 0||n.type==="custom")return;const e=n;e.minMove!==void 0&&e.precision===void 0&&(e.precision=(function(t){if(t>=1)return 0;let s=0;for(;s<8;s++){const o=Math.round(t);if(Math.abs(o-t)<1e-8)return s;t*=10}return s})(e.minMove))}function Cv(n){return(function(e){if(Aa(e.handleScale)){const s=e.handleScale;e.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:o}=e.handleScale;Aa(s)&&(e.handleScale.axisPressedMouseMove={time:s,price:s}),Aa(o)&&(e.handleScale.axisDoubleClickReset={time:o,price:o})}const t=e.handleScroll;Aa(t)&&(e.handleScroll={horzTouchDrag:t,vertTouchDrag:t,mouseWheel:t,pressedMouseMove:t})})(n),n}class _E{constructor(e,t,s){this.Sw=new Map,this.kw=new Map,this.yw=new We,this.Cw=new We,this.Tw=new We,this.Pw=new rE(t);const o=s===void 0?Sn(kv()):Yt(Sn(kv()),Cv(s));this.q_=t,this.aw=new Yk(e,o,t),this.aw.lm().l((u=>{this.yw.M()&&this.yw.m(this.Rw(u()))}),this),this.aw.am().l((u=>{this.Cw.M()&&this.Cw.m(this.Rw(u()))}),this),this.aw.Xc().l((u=>{this.Tw.M()&&this.Tw.m(this.Rw(u()))}),this);const a=this.aw.$t();this.Dw=new bE(a,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,t,s){this.autoSizeActive()||this.aw._b(e,t,s)}addCustomSeries(e,t){const s=xi(e),o=Object.assign(Object.assign({},Eg),s.defaultOptions());return this.Vw("Custom",o,t,s)}addAreaSeries(e){return this.Vw("Area",r1,e)}addBaselineSeries(e){return this.Vw("Baseline",o1,e)}addBarSeries(e){return this.Vw("Bar",s1,e)}addCandlestickSeries(e={}){return(function(t){t.borderColor!==void 0&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),t.wickColor!==void 0&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)})(e),this.Vw("Candlestick",n1,e)}addHistogramSeries(e){return this.Vw("Histogram",a1,e)}addLineSeries(e){return this.Vw("Line",i1,e)}removeSeries(e){const t=pt(this.Sw.get(e)),s=this.Pw.vd(t);this.aw.$t().vd(t),this.Ow(s),this.Sw.delete(e),this.kw.delete(t)}pw(e,t){this.Ow(this.Pw.Kb(e,t))}bw(e,t){this.Ow(this.Pw.iw(e,t))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new vE(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(Cv(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,t,s){const o=this.Sw.get(s);if(o===void 0)return;const a=this.aw.$t().dr(o);a!==null&&this.aw.$t().ad(e,t,a)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,t,s={},o){xE(s.priceFormat);const a=Yt(Sn(Cg),Sn(t),s),u=this.aw.$t().dd(e,a,o),h=new wE(u,this,this,this,this.q_);return this.Sw.set(h,u),this.kw.set(u,h),h}Ow(e){const t=this.aw.$t();t._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach(((s,o)=>o.J(s.$e,s.rw))),t.Wu()}Bw(e){return pt(this.kw.get(e))}Rw(e){const t=new Map;e.Nb.forEach(((o,a)=>{const u=a.Qh(),h=fh(u)(o);if(u!=="Custom")is(Zk(h));else{const d=a.Ta();is(!d||d(h)===!1)}t.set(this.Bw(a),h)}));const s=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:s,hoveredObjectId:e.Fb,seriesData:t,sourceEvent:e.Wb}}}function SE(n,e,t){let s;if(ao(n)){const a=document.getElementById(n);is(a!==null,`Cannot find element in DOM with id=${n}`),s=a}else s=n;const o=new _E(s,e,t);return e.setOptions(o.options()),o}function Tv(n,e){return SE(n,new hv,hv.Id(e))}Object.assign(Object.assign({},Cg),Eg);function kE({signal:n}){const e=n.ok===!0?"sig-ok":n.ok==="warn"?"sig-warn":"sig-fail";return y.jsx("span",{className:`${e} text-[9px] px-2 py-0.5 rounded-full`,children:n.label})}const EE={fire:"border-[#e65100] shadow-[0_0_12px_rgba(230,81,0,0.15)]",valid:"border-[#00c853]",weak:"border-[#ffab00]",skip:"border-[#37474f] opacity-70"},CE={fire:"#ff6d00",valid:"#69f0ae",weak:"#ffd740",skip:"#546e7a"};function TE({data:n,isFavorite:e,onToggleFavorite:t,onRemove:s,onLogTrade:o}){const a=z.useRef(null),u=z.useRef(null),[h,d]=z.useState(!1),p=n.price.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:6}),v=n.type==="crypto"?"CRYPTO":n.type==="forex"?"FOREX":"STOCK";return z.useEffect(()=>{if(!a.current||!u.current)return;const g="#0d1526",w="#1a2d45",_="#607d9b",S="#0a0e1a",x=Tv(a.current,{width:a.current.clientWidth,height:200,layout:{background:{color:g},textColor:_},grid:{vertLines:{color:w},horzLines:{color:w}},timeScale:{borderColor:w,timeVisible:!0},rightPriceScale:{borderColor:w},crosshair:{mode:1},handleScroll:!1,handleScale:!1}),k=x.addCandlestickSeries({upColor:"#26a69a",downColor:"#ef5350",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickUpColor:"#26a69a",wickDownColor:"#ef5350"}),C=n.klines.slice(-60).map(I=>({time:Math.floor(I[0]/1e3),open:parseFloat(String(I[1])),high:parseFloat(String(I[2])),low:parseFloat(String(I[3])),close:parseFloat(String(I[4]))}));k.setData(C);const R=n.klines.slice(-60).map(I=>parseFloat(String(I[4]))),P=n.klines.slice(-60).map(I=>Math.floor(I[0]/1e3)),j=xc(R,9),U=xc(R,21),B=xc(R,50);x.addLineSeries({color:"#ff9800",lineWidth:1}).setData(j.map((I,se)=>({time:P[se],value:I}))),x.addLineSeries({color:"#2196f3",lineWidth:1}).setData(U.map((I,se)=>({time:P[se],value:I}))),x.addLineSeries({color:"#9c27b0",lineWidth:1}).setData(B.map((I,se)=>({time:P[se],value:I})));const we=x.addLineSeries({color:"rgba(150,150,255,0.5)",lineWidth:1,lineStyle:2}),Le=x.addLineSeries({color:"rgba(150,150,255,0.5)",lineWidth:1,lineStyle:2}),xe=R.map((I,se)=>{if(se<19)return null;const de=R.slice(se-19,se+1);return Sg(de)});we.setData(xe.map((I,se)=>I?{time:P[se],value:I.upper}:null).filter(Boolean)),Le.setData(xe.map((I,se)=>I?{time:P[se],value:I.lower}:null).filter(Boolean)),x.addLineSeries({color:"#ffd740",lineWidth:1,lineStyle:2}).setData(P.slice(-5).map(I=>({time:I,value:parseFloat(n.vwap)}))),x.timeScale().fitContent();const _e=Tv(u.current,{width:u.current.clientWidth,height:70,layout:{background:{color:S},textColor:_},grid:{vertLines:{color:w},horzLines:{color:w}},timeScale:{borderColor:w,timeVisible:!1,visible:!1},rightPriceScale:{borderColor:w,scaleMargins:{top:.1,bottom:.1}},handleScroll:!1,handleScale:!1}),Fe=_e.addLineSeries({color:"#e040fb",lineWidth:1}),Ae=WS(R,14).map(I=>({time:P[I.idx],value:I.rsi}));Fe.setData(Ae);const be=P.slice(-20);_e.addLineSeries({color:"#ef5350",lineWidth:1,lineStyle:2}).setData(be.map(I=>({time:I,value:70}))),_e.addLineSeries({color:"#78909c",lineWidth:1,lineStyle:2}).setData(be.map(I=>({time:I,value:50}))),_e.addLineSeries({color:"#26a69a",lineWidth:1,lineStyle:2}).setData(be.map(I=>({time:I,value:30}))),_e.timeScale().fitContent(),d(!0);const O=new ResizeObserver(()=>{a.current&&x.applyOptions({width:a.current.clientWidth}),u.current&&_e.applyOptions({width:u.current.clientWidth})});return a.current&&O.observe(a.current),()=>{O.disconnect(),x.remove(),_e.remove()}},[n.sym,n.scanTime]),y.jsxs("div",{className:`card border overflow-hidden transition-all duration-200 ${EE[n.gradeClass]}`,children:[y.jsx("div",{className:"h-[3px] bg-[#1a2d45]",children:y.jsx("div",{className:"h-full transition-all duration-500",style:{width:`${n.score/10*100}%`,background:CE[n.gradeClass]}})}),y.jsxs("div",{className:"px-3 py-2 flex items-center justify-between border-b border-[#1a2d45]",children:[y.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[y.jsx("span",{className:"font-bold text-[#e0e6f0] text-sm",style:{fontFamily:"Space Grotesk"},children:n.display.replace("USDT","")}),y.jsx("span",{className:"text-[9px] text-[#546e7a] bg-[#0b1220] rounded px-1 py-0.5",children:v}),y.jsxs("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full grade-${n.gradeClass}`,children:[n.grade," ",n.score,"/10"]})]}),y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsxs("span",{className:"text-[#90caf9] text-xs font-mono",children:["$",p]}),y.jsx("button",{onClick:()=>t(n.sym),className:`text-sm px-1 py-0.5 bg-transparent border-none cursor-pointer transition-colors ${e?"text-[#ffd740]":"text-[#546e7a] hover:text-[#ffd740]"}`,title:"Add to watchlist",children:""}),y.jsx("button",{onClick:()=>s(n.sym),className:"text-sm px-1 py-0.5 bg-transparent border-none cursor-pointer text-[#546e7a] hover:text-[#ef5350] transition-colors",title:"Remove",children:""})]})]}),y.jsx("div",{ref:a,className:"h-[200px]"}),y.jsx("div",{ref:u,className:"h-[70px] border-t border-[#1a2d45]"}),y.jsx("div",{className:"flex flex-wrap gap-1 px-3 py-2 border-t border-[#1a2d45]",children:n.sigs.map((g,w)=>y.jsx(kE,{signal:g},w))}),y.jsxs("div",{className:"px-3 py-2 text-[11px] text-[#546e7a] border-t border-[#1a2d45] flex flex-wrap gap-x-3 gap-y-1",children:[y.jsxs("span",{children:[" Limit: ",y.jsxs("b",{className:"text-[#4fc3f7]",children:["$",n.entryLimit]})]}),y.jsxs("span",{children:[" TP3: ",y.jsxs("b",{className:"text-[#4fc3f7]",children:["$",n.tp3]})]}),y.jsxs("span",{children:[" TP5: ",y.jsxs("b",{className:"text-[#4fc3f7]",children:["$",n.tp5]})]}),y.jsxs("span",{children:[" Stop: ",y.jsxs("b",{className:"text-[#4fc3f7]",children:["$",n.stop]})]}),y.jsxs("span",{children:["VWAP: ",y.jsxs("b",{className:"text-[#4fc3f7]",children:["$",n.vwap]})]}),y.jsxs("span",{children:["ATR: ",y.jsxs("b",{className:"text-[#4fc3f7]",children:[n.atrPct,"%"]})]}),y.jsxs("span",{className:"ml-auto text-[9px] text-[#37474f]",children:[" ",n.scanTime]})]}),y.jsxs("div",{className:"px-3 py-2 border-t border-[#1a2d45] flex gap-2 items-center flex-wrap",children:[y.jsx("button",{onClick:()=>o(n.sym,n.price,n.score),className:"btn-ghost text-[10px] py-1 px-2",children:" Log Trade"}),y.jsxs("span",{className:"text-[9px] text-[#546e7a] bg-[#0b1220] border border-[#1e3050] rounded-full px-2 py-0.5",children:["RSI: ",n.rsiNow," ",n.rsiRising?"":""]}),y.jsxs("span",{className:"text-[9px] text-[#546e7a] bg-[#0b1220] border border-[#1e3050] rounded-full px-2 py-0.5",children:["Vol: ",n.volRatio,""]}),y.jsxs("span",{className:"text-[9px] text-[#546e7a] bg-[#0b1220] border border-[#1e3050] rounded-full px-2 py-0.5",children:[" ",n.greenCount]})]})]})}function jE(){const[n,e]=z.useState(""),[t,s]=z.useState(""),{addPair:o,symbols:a}=kg(),{canAddPair:u,limits:h}=zs();function d(){const v=n.trim().toUpperCase();if(v){s("");try{o(v),e("")}catch(g){s(g.message)}}}const p=u(a.length);return y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsxs("div",{className:"flex gap-2 items-center",children:[y.jsx("input",{type:"text",className:"input-base w-44",placeholder:"BTCUSDT / AAPL / EURUSD",value:n,onChange:v=>e(v.target.value),onKeyDown:v=>v.key==="Enter"&&d(),disabled:!p}),y.jsx("button",{onClick:d,disabled:!p||!n.trim(),className:"btn-primary px-3 py-1.5 text-xs disabled:opacity-50 disabled:cursor-not-allowed",children:"+ Add"})]}),t&&y.jsx("p",{className:"text-red-400 text-xs",children:t}),!p&&y.jsxs("p",{className:"text-[#ffd740] text-xs",children:["Max ",h.maxPairs," pairs on Starter. ",y.jsx("a",{href:"/pricing",className:"underline text-[#4fc3f7]",children:"Upgrade"})]})]})}function NE(){const{results:n,allResults:e,favorites:t,scanning:s,lastScanTime:o,settings:a,summary:u,runScan:h,removePair:d,toggleFavorite:p,updateSettings:v}=kg(),[g,w]=z.useState(a.refreshInterval),[_,S]=z.useState(null),x=z.useRef(null);z.useEffect(()=>(x.current&&clearInterval(x.current),w(a.refreshInterval),x.current=setInterval(()=>{w(C=>C<=1?(h(),a.refreshInterval):C-1)},1e3),()=>{x.current&&clearInterval(x.current)}),[a.refreshInterval,o]),z.useEffect(()=>{h()},[]);function k(C,R,P){S({sym:C,price:R,score:P})}return y.jsxs("div",{children:[y.jsxs("div",{className:"sticky top-0 z-10 px-4 py-2 flex flex-wrap gap-2 items-center border-b border-[#1e3050]",style:{background:"var(--bg-secondary)"},children:[y.jsxs("select",{className:"input-base py-1.5 text-xs",value:a.interval,onChange:C=>v({interval:C.target.value}),children:[y.jsx("option",{value:"5m",children:"5m"}),y.jsx("option",{value:"15m",children:"15m"}),y.jsx("option",{value:"1h",children:"1h"}),y.jsx("option",{value:"4h",children:"4h"})]}),y.jsxs("select",{className:"input-base py-1.5 text-xs",value:a.limit,onChange:C=>v({limit:parseInt(C.target.value)}),children:[y.jsx("option",{value:"60",children:"60 candles"}),y.jsx("option",{value:"100",children:"100 candles"}),y.jsx("option",{value:"200",children:"200 candles"})]}),y.jsxs("select",{className:"input-base py-1.5 text-xs",value:a.minScore,onChange:C=>v({minScore:parseInt(C.target.value)}),children:[y.jsx("option",{value:"0",children:"Show All"}),y.jsx("option",{value:"4",children:"Score  4"}),y.jsx("option",{value:"6",children:"Score  6"}),y.jsx("option",{value:"8",children:"Score  8 (STRONG)"})]}),y.jsx("button",{onClick:()=>{h(),w(a.refreshInterval)},disabled:s,className:"btn-primary text-xs py-1.5 px-3 disabled:opacity-50",children:s?y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"spinner mr-1"})," Scanning..."]}):" Refresh"}),y.jsx("div",{className:"h-5 w-px bg-[#1e3050]"}),y.jsx(jE,{}),y.jsx("div",{className:"ml-auto text-[11px] text-[#546e7a]",children:s?y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"spinner mr-1"})," Scanning..."]}):o?`Auto-refresh in ${g}s  Updated ${o}`:"Initializing..."})]}),e.length>0&&y.jsxs("div",{className:"px-4 py-2 flex flex-wrap gap-2 items-center border-b border-[#1a2d45] text-xs",style:{background:"var(--bg-tertiary)"},children:[y.jsxs("span",{className:"px-2 py-0.5 rounded-full font-bold grade-fire",children:[" STRONG: ",u.strong]}),y.jsxs("span",{className:"px-2 py-0.5 rounded-full font-bold grade-valid",children:[" VALID: ",u.valid]}),y.jsxs("span",{className:"px-2 py-0.5 rounded-full font-bold grade-weak",children:[" WEAK: ",u.weak]}),y.jsxs("span",{className:"px-2 py-0.5 rounded-full font-bold grade-skip",children:[" SKIP: ",u.skip]}),u.best&&y.jsxs("span",{className:"ml-2 text-[#607d9b]",children:["Best: ",y.jsx("b",{className:"text-[#e0e6f0]",children:u.best.display.replace("USDT","")})," ",u.best.score,"/10  RSI ",u.best.rsiNow]})]}),t.size>0&&y.jsxs("div",{className:"px-4 py-2 flex items-center gap-2 flex-wrap border-b border-[#1a2d45] text-xs",style:{background:"var(--bg-secondary)"},children:[y.jsx("span",{className:"text-[#607d9b] font-semibold",children:" Watchlist:"}),Array.from(t).map(C=>{const R=e.find(P=>P.sym===C);return y.jsxs("button",{onClick:()=>{var P;(P=document.getElementById(`card-${C}`))==null||P.scrollIntoView({behavior:"smooth",block:"center"})},className:`px-2 py-0.5 rounded-full border cursor-pointer text-[10px] transition-colors ${R?`grade-${R.gradeClass}`:"text-[#607d9b] border-[#1e3050]"}`,children:[C.replace("USDT","").replace("=X","")," ",R?`${R.score}/10`:""]},C)})]}),y.jsxs("div",{className:"p-4 grid gap-4",style:{gridTemplateColumns:"repeat(auto-fill, minmax(460px, 1fr))"},children:[n.length===0&&!s&&y.jsxs("div",{className:"col-span-full text-center py-16",children:[y.jsx("div",{className:"text-4xl mb-3",children:""}),y.jsxs("p",{className:"text-[#607d9b]",children:["No setups found with score  ",a.minScore,"."]}),y.jsx("p",{className:"text-[#546e7a] text-sm mt-1",children:"Lower the filter or click Refresh."})]}),s&&n.length===0&&y.jsxs("div",{className:"col-span-full text-center py-16",children:[y.jsx("div",{className:"spinner",style:{width:32,height:32,margin:"0 auto 12px"}}),y.jsx("p",{className:"text-[#607d9b]",children:"Scanning markets..."})]}),n.map(C=>y.jsx("div",{id:`card-${C.sym}`,children:y.jsx(TE,{data:C,isFavorite:t.has(C.sym),onToggleFavorite:p,onRemove:d,onLogTrade:k})},C.sym))]}),_&&y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",onClick:()=>S(null),children:y.jsxs("div",{className:"card p-6 w-full max-w-md",onClick:C=>C.stopPropagation(),children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsxs("h3",{className:"text-[#4fc3f7] font-bold",style:{fontFamily:"Space Grotesk"},children:[" Log Trade  ",_.sym.replace("USDT","")]}),y.jsx("button",{onClick:()=>S(null),className:"text-[#607d9b] hover:text-[#e0e6f0] bg-transparent border-none cursor-pointer text-lg",children:""})]}),y.jsx("p",{className:"text-[#607d9b] text-sm",children:"Use the Journal page to log trades with full details."}),y.jsxs("p",{className:"text-[#e0e6f0] text-sm mt-2",children:["Pre-fill: ",y.jsxs("b",{children:["$",_.price.toFixed(4)]}),"  Score: ",y.jsxs("b",{children:[_.score,"/10"]})]}),y.jsx("a",{href:"/journal",className:"btn-primary block text-center mt-4 no-underline",children:"Go to Journal "})]})})]})}function RE(){return y.jsx(NE,{})}function PE({onSaved:n,onCancel:e,defaultSym:t="",defaultPrice:s,defaultScore:o}){const{user:a}=ro(),[u,h]=z.useState({symbol:t,direction:"long",entry_price:(s==null?void 0:s.toString())??"",exit_price:"",size:"",score_at_entry:(o==null?void 0:o.toString())??"",notes:""}),[d,p]=z.useState(!1),[v,g]=z.useState("");function w(S,x){h(k=>({...k,[S]:x}))}async function _(){if(!a)return;if(!u.symbol||!u.entry_price||!u.size){g("Symbol, entry price, and size are required.");return}p(!0),g("");const S=parseFloat(u.entry_price),x=u.exit_price?parseFloat(u.exit_price):null,k=parseFloat(u.size);let C=null;x!==null&&(C=u.direction==="long"?(x-S)*k:(S-x)*k);const{error:R}=await Gt.from("trade_journal").insert({user_id:a.id,symbol:u.symbol.toUpperCase(),direction:u.direction,entry_price:S,exit_price:x,size:k,score_at_entry:u.score_at_entry?parseInt(u.score_at_entry):null,notes:u.notes||null,pnl:C});p(!1),R?g(R.message):n()}return y.jsxs("div",{className:"flex flex-col gap-3",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-[#607d9b] text-xs mb-1",children:"Symbol"}),y.jsx("input",{type:"text",className:"input-base w-full",placeholder:"BTCUSDT",value:u.symbol,onChange:S=>w("symbol",S.target.value)})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-[#607d9b] text-xs mb-1",children:"Direction"}),y.jsxs("select",{className:"input-base w-full",value:u.direction,onChange:S=>w("direction",S.target.value),children:[y.jsx("option",{value:"long",children:"Long "}),y.jsx("option",{value:"short",children:"Short "})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-[#607d9b] text-xs mb-1",children:"Entry Price"}),y.jsx("input",{type:"number",className:"input-base w-full",placeholder:"0.00",step:"any",value:u.entry_price,onChange:S=>w("entry_price",S.target.value)})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-[#607d9b] text-xs mb-1",children:"Exit Price (optional)"}),y.jsx("input",{type:"number",className:"input-base w-full",placeholder:"0.00",step:"any",value:u.exit_price,onChange:S=>w("exit_price",S.target.value)})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-[#607d9b] text-xs mb-1",children:"Size / Qty"}),y.jsx("input",{type:"number",className:"input-base w-full",placeholder:"0",step:"any",value:u.size,onChange:S=>w("size",S.target.value)})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-[#607d9b] text-xs mb-1",children:"Score at Entry"}),y.jsx("input",{type:"number",className:"input-base w-full",placeholder:"0-10",min:"0",max:"10",value:u.score_at_entry,onChange:S=>w("score_at_entry",S.target.value)})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-[#607d9b] text-xs mb-1",children:"Notes"}),y.jsx("textarea",{className:"input-base w-full",rows:3,placeholder:"Setup notes, market context...",value:u.notes,onChange:S=>w("notes",S.target.value),style:{resize:"vertical"}})]}),v&&y.jsx("p",{className:"text-red-400 text-xs",children:v}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:_,disabled:d,className:"btn-primary flex-1 disabled:opacity-50",children:d?"Saving...":" Save Trade"}),y.jsx("button",{onClick:e,className:"btn-ghost flex-1",children:"Cancel"})]})]})}function OE(){const{user:n}=ro(),{canUseJournal:e,limits:t}=zs(),[s,o]=z.useState([]),[a,u]=z.useState(!0),[h,d]=z.useState(!1);z.useEffect(()=>{p()},[n]);async function p(){if(!n)return;u(!0);const{data:k}=await Gt.from("trade_journal").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}).limit(500);o(k??[]),u(!1)}async function v(k){confirm("Delete this trade?")&&(await Gt.from("trade_journal").delete().eq("id",k),o(C=>C.filter(R=>R.id!==k)))}function g(){const k=["Date","Symbol","Direction","Entry","Exit","Size","P&L","Score","Notes"],C=s.map(B=>{var G;return[new Date(B.created_at).toLocaleDateString(),B.symbol,B.direction,B.entry_price,B.exit_price??"",B.size,((G=B.pnl)==null?void 0:G.toFixed(2))??"",B.score_at_entry??"",B.notes??""]}),R=[k,...C].map(B=>B.join(",")).join(`
`),P=new Blob([R],{type:"text/csv"}),j=URL.createObjectURL(P),U=document.createElement("a");U.href=j,U.download="cedars-wave-journal.csv",U.click()}const w=s.filter(k=>k.pnl!==null).reduce((k,C)=>k+(C.pnl??0),0),_=s.filter(k=>(k.pnl??0)>0),S=s.filter(k=>k.pnl!==null).length>0?(_.length/s.filter(k=>k.pnl!==null).length*100).toFixed(0):"",x=e(s.length);return y.jsxs("div",{className:"p-4",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-3",children:[y.jsx("h2",{className:"text-[#4fc3f7] font-bold text-xl",style:{fontFamily:"Space Grotesk"},children:" Trade Journal"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:g,className:"btn-ghost text-xs py-1.5 px-3",children:" Export CSV"}),x?y.jsx("button",{onClick:()=>d(!0),className:"btn-primary text-xs py-1.5 px-3",children:"+ Log Trade"}):y.jsxs("span",{className:"text-[#ffd740] text-xs self-center",children:["Limit: ",t.maxJournalEntries," entries. ",y.jsx("a",{href:"/pricing",className:"underline text-[#4fc3f7]",children:"Upgrade"})]})]})]}),y.jsx("div",{className:"flex gap-3 mb-4 flex-wrap",children:[{label:"Total Trades",value:s.length,color:"text-[#4fc3f7]"},{label:"Total P&L",value:`$${w.toFixed(2)}`,color:w>=0?"text-[#69f0ae]":"text-[#ef5350]"},{label:"Win Rate",value:`${S}%`,color:"text-[#4fc3f7]"},{label:"Winners",value:_.length,color:"text-[#69f0ae]"}].map(k=>y.jsxs("div",{className:"card p-3 min-w-[100px]",children:[y.jsx("div",{className:"text-[10px] text-[#546e7a] uppercase tracking-wide",children:k.label}),y.jsx("div",{className:`text-xl font-bold mt-0.5 ${k.color}`,children:k.value})]},k.label))}),h&&y.jsxs("div",{className:"card p-4 mb-4",children:[y.jsx("h3",{className:"text-[#4fc3f7] font-semibold mb-3",style:{fontFamily:"Space Grotesk"},children:"New Trade"}),y.jsx(PE,{onSaved:()=>{d(!1),p()},onCancel:()=>d(!1)})]}),y.jsx("div",{className:"overflow-x-auto rounded-xl border border-[#1e3050]",children:a?y.jsxs("div",{className:"p-8 text-center text-[#607d9b]",children:[y.jsx("div",{className:"spinner",style:{width:24,height:24,margin:"0 auto 8px"}}),"Loading trades..."]}):s.length===0?y.jsxs("div",{className:"p-8 text-center",children:[y.jsx("div",{className:"text-3xl mb-2",children:""}),y.jsx("p",{className:"text-[#607d9b]",children:"No trades yet. Log your first trade!"})]}):y.jsxs("table",{className:"w-full border-collapse text-xs",children:[y.jsx("thead",{children:y.jsx("tr",{style:{background:"var(--bg-tertiary)"},children:["Date","Symbol","Dir","Entry","Exit","Size","P&L","Score","Notes",""].map(k=>y.jsx("th",{className:"px-3 py-2 text-left text-[#607d9b] font-bold border-b border-[#1e3050] whitespace-nowrap",children:k},k))})}),y.jsx("tbody",{children:s.map(k=>y.jsxs("tr",{className:"border-b border-[#1a2d45] hover:bg-[#0b1220] transition-colors",children:[y.jsx("td",{className:"px-3 py-2 text-[#607d9b] whitespace-nowrap",children:new Date(k.created_at).toLocaleDateString()}),y.jsx("td",{className:"px-3 py-2 font-bold text-[#e0e6f0] whitespace-nowrap",children:k.symbol.replace("USDT","")}),y.jsx("td",{className:"px-3 py-2",children:y.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-bold ${k.direction==="long"?"bg-[#003300] text-[#69f0ae]":"bg-[#3a0000] text-[#ef9a9a]"}`,children:k.direction.toUpperCase()})}),y.jsx("td",{className:"px-3 py-2 text-[#e0e6f0] font-mono whitespace-nowrap",children:k.entry_price}),y.jsx("td",{className:"px-3 py-2 text-[#e0e6f0] font-mono whitespace-nowrap",children:k.exit_price??""}),y.jsx("td",{className:"px-3 py-2 text-[#607d9b]",children:k.size}),y.jsx("td",{className:`px-3 py-2 font-bold whitespace-nowrap ${k.pnl===null?"text-[#546e7a]":k.pnl>=0?"text-[#69f0ae]":"text-[#ef5350]"}`,children:k.pnl===null?"Open":`$${k.pnl.toFixed(2)}`}),y.jsx("td",{className:"px-3 py-2 text-[#4fc3f7]",children:k.score_at_entry??""}),y.jsx("td",{className:"px-3 py-2 text-[#607d9b] max-w-[150px] truncate",children:k.notes??""}),y.jsx("td",{className:"px-3 py-2",children:y.jsx("button",{onClick:()=>v(k.id),className:"text-[#546e7a] hover:text-[#ef5350] transition-colors bg-transparent border-none cursor-pointer text-sm",children:""})})]},k.id))})]})})]})}function LE(){return y.jsx(OE,{})}function AE(){var x,k;const{user:n,logout:e}=oo(),{tier:t,subscription:s,getDaysRemaining:o}=zs(),{symbols:a,settings:u,setSymbols:h,updateSettings:d}=_g(),[p,v]=z.useState(a.join(", ")),[g,w]=z.useState(!1);function _(){const C=p.split(/[\s,]+/).map(R=>R.trim().toUpperCase()).filter(Boolean);h(C),w(!0),setTimeout(()=>w(!1),2e3)}const S={trial:"text-[#4fc3f7] border-[#1565c0] bg-[#0d2035]",starter:"text-[#607d9b] border-[#1e3050] bg-[#0b1220]",pro:"text-[#4fc3f7] border-[#1565c0] bg-[#0d2035]",elite:"text-[#ff9800] border-[#ff6d00] bg-[#1a0e00]"};return y.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[y.jsx("h1",{className:"text-2xl font-bold text-[#e0e6f0] mb-6",style:{fontFamily:"Space Grotesk"},children:" Settings"}),y.jsxs("div",{className:"card p-5 mb-4",children:[y.jsx("h2",{className:"text-[#4fc3f7] font-semibold mb-4",style:{fontFamily:"Space Grotesk"},children:"Account"}),y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsx("div",{className:"w-10 h-10 rounded-full bg-[#1565c0] flex items-center justify-center text-white font-bold",children:((k=(x=n==null?void 0:n.email)==null?void 0:x[0])==null?void 0:k.toUpperCase())??"U"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-[#e0e6f0] font-medium",children:n==null?void 0:n.email}),y.jsxs("p",{className:"text-[#607d9b] text-xs",children:["Member since ",new Date((n==null?void 0:n.created_at)??"").toLocaleDateString()]})]})]}),y.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg border text-sm font-semibold ${S[t]}`,children:[t==="trial"?" Trial":t==="starter"?" Starter":t==="pro"?" Pro":" Elite",t==="trial"&&y.jsxs("span",{className:"opacity-70",children:[" ",o()," days remaining"]}),(s==null?void 0:s.current_period_end)&&t!=="trial"&&y.jsxs("span",{className:"opacity-70 text-xs",children:[" Renews ",new Date(s.current_period_end).toLocaleDateString()]})]}),t!=="elite"&&y.jsx("div",{className:"mt-3",children:y.jsx("a",{href:"/pricing",className:"btn-primary text-xs py-1.5 px-3 inline-block no-underline",children:"Upgrade Plan "})})]}),y.jsxs("div",{className:"card p-5 mb-4",children:[y.jsx("h2",{className:"text-[#4fc3f7] font-semibold mb-4",style:{fontFamily:"Space Grotesk"},children:"Scanner Defaults"}),y.jsxs("div",{className:"flex flex-col gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-[#607d9b] text-xs mb-1.5",children:"Auto-refresh interval (seconds)"}),y.jsx("input",{type:"number",className:"input-base",min:"10",max:"300",value:u.refreshInterval,onChange:C=>d({refreshInterval:parseInt(C.target.value)})})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-[#607d9b] text-xs mb-1.5",children:"Default timeframe"}),y.jsxs("select",{className:"input-base",value:u.interval,onChange:C=>d({interval:C.target.value}),children:[y.jsx("option",{value:"5m",children:"5 minutes"}),y.jsx("option",{value:"15m",children:"15 minutes"}),y.jsx("option",{value:"1h",children:"1 hour"}),y.jsx("option",{value:"4h",children:"4 hours"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-[#607d9b] text-xs mb-1.5",children:"Default symbols (comma or newline separated)"}),y.jsx("textarea",{className:"input-base w-full",rows:4,value:p,onChange:C=>v(C.target.value),style:{resize:"vertical"},placeholder:"BTCUSDT, ETHUSDT, SOLUSDT..."}),y.jsx("p",{className:"text-[#546e7a] text-xs mt-1",children:"Supports crypto (USDT pairs), stocks (AAPL), forex (EURUSD)"})]}),y.jsx("button",{onClick:_,className:"btn-primary self-start text-sm",children:g?" Saved!":"Save Changes"})]})]}),y.jsxs("div",{className:"card p-5 border-[#c62828]",children:[y.jsx("h2",{className:"text-[#ef5350] font-semibold mb-4",style:{fontFamily:"Space Grotesk"},children:"Danger Zone"}),y.jsx("button",{onClick:()=>{confirm("Are you sure you want to sign out?")&&e()},className:"btn-danger text-sm",children:"Sign Out"})]}),y.jsx("p",{className:"text-[#37474f] text-xs text-center mt-6",children:" A.K. Cedars CY LTD  Made with Claude Opus 4.6 "})]})}function ME(){const[n,e]=z.useState(!1),{tier:t}=zs();return y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-center gap-3 mb-8",children:[y.jsx("span",{className:`text-sm ${n?"text-[#607d9b]":"text-[#e0e6f0]"}`,children:"Monthly"}),y.jsx("button",{onClick:()=>e(!n),className:`relative w-12 h-6 rounded-full transition-colors border-none cursor-pointer ${n?"bg-[#1565c0]":"bg-[#1e3050]"}`,children:y.jsx("span",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full transition-transform ${n?"translate-x-6":"translate-x-0.5"}`})}),y.jsxs("span",{className:`text-sm ${n?"text-[#e0e6f0]":"text-[#607d9b]"}`,children:["Annual ",y.jsx("span",{className:"text-[#69f0ae] font-semibold ml-1",children:"Save 33%"})]})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:xg.map(s=>y.jsxs("div",{className:`card p-6 flex flex-col relative transition-all duration-200 ${s.popular?"border-[#4fc3f7] shadow-[0_0_20px_rgba(79,195,247,0.1)]":s.color}`,children:[s.popular&&y.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:y.jsx("span",{className:"bg-[#1565c0] text-white text-xs font-bold px-3 py-1 rounded-full",children:" Most Popular"})}),y.jsx("h3",{className:"text-lg font-bold text-[#e0e6f0] mb-1",style:{fontFamily:"Space Grotesk"},children:s.name}),y.jsx("p",{className:"text-[#607d9b] text-sm mb-4",children:s.description}),y.jsxs("div",{className:"mb-6",children:[y.jsxs("div",{className:"flex items-end gap-1",children:[y.jsxs("span",{className:"text-4xl font-bold text-[#e0e6f0]",style:{fontFamily:"Space Grotesk"},children:["",n?s.annualMonthly.toFixed(0):s.monthlyPrice]}),y.jsx("span",{className:"text-[#607d9b] text-sm mb-1",children:"/mo"})]}),n&&y.jsxs("p",{className:"text-[#546e7a] text-xs mt-1",children:["Billed ",s.annualPrice,"/year"]})]}),y.jsxs("ul",{className:"flex-1 space-y-2 mb-6",children:[s.features.map(o=>y.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[y.jsx("span",{className:"text-[#69f0ae] mt-0.5",children:""}),y.jsx("span",{className:"text-[#607d9b]",children:o})]},o)),s.limitations.map(o=>y.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[y.jsx("span",{className:"text-[#546e7a] mt-0.5",children:""}),y.jsx("span",{className:"text-[#37474f]",children:o})]},o))]}),y.jsx("button",{className:`w-full py-2.5 rounded-lg font-semibold text-sm transition-all ${t===s.id?"bg-[#1e3050] text-[#607d9b] cursor-default border border-[#1e3050]":s.popular?"bg-[#1565c0] hover:bg-[#1976d2] text-white border-none cursor-pointer":"border border-[#1e3050] text-[#e0e6f0] hover:bg-[#1a2d45] bg-transparent cursor-pointer"}`,onClick:()=>{t!==s.id&&(window.location.href=`/checkout?plan=${s.id}&billing=${n?"annual":"monthly"}`)},children:t===s.id?" Current Plan":`Start ${s.name}`})]},s.id))}),y.jsx("p",{className:"text-center text-[#546e7a] text-xs mt-6",children:"14-day free trial  No credit card required  Cancel anytime  30-day money-back guarantee"})]})}function IE(){const{isTrial:n,getDaysRemaining:e}=zs();return y.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("h1",{className:"text-3xl font-bold text-[#e0e6f0] mb-3",style:{fontFamily:"Space Grotesk"},children:"Simple Pricing"}),y.jsx("p",{className:"text-[#607d9b] text-lg",children:"No hidden fees. Cancel anytime."}),n&&y.jsxs("div",{className:"inline-flex items-center gap-2 mt-3 bg-[#0d2035] border border-[#1565c0] text-[#4fc3f7] text-sm px-4 py-2 rounded-full",children:[" You have ",e()," days left on your free trial"]})]}),y.jsx(ME,{})]})}function $E(){return oo(),y.jsxs(Hw,{children:[y.jsx(wn,{path:"/",element:y.jsx(RS,{})}),y.jsx(wn,{path:"/login",element:y.jsx(PS,{})}),y.jsx(wn,{path:"/signup",element:y.jsx(OS,{})}),y.jsx(wn,{path:"/dashboard",element:y.jsx(La,{children:y.jsx(Oa,{children:y.jsx(RE,{})})})}),y.jsx(wn,{path:"/journal",element:y.jsx(La,{children:y.jsx(Oa,{children:y.jsx(LE,{})})})}),y.jsx(wn,{path:"/settings",element:y.jsx(La,{children:y.jsx(Oa,{children:y.jsx(AE,{})})})}),y.jsx(wn,{path:"/pricing",element:y.jsx(La,{children:y.jsx(Oa,{children:y.jsx(IE,{})})})}),y.jsx(wn,{path:"*",element:y.jsx(Hv,{to:"/",replace:!0})})]})}const zE=new Lb({defaultOptions:{queries:{staleTime:3e4,retry:2}}});sw.createRoot(document.getElementById("root")).render(y.jsx(z.StrictMode,{children:y.jsx(tb,{children:y.jsx(Mb,{client:zE,children:y.jsx($E,{})})})}));
